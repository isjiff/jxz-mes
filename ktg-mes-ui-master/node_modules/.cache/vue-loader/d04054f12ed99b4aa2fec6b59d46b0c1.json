{"remainingRequest":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\pro\\schedule\\ganttx.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\pro\\schedule\\ganttx.vue","mtime":1662109326000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1662432871518},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1662432874590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCB7IGdhbnR0IH0gZnJvbSAnZGh0bWx4LWdhbnR0JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdHYW50dENoYXInLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuZXdPYmo6IHt9CiAgICB9CiAgfSwKICBwcm9wczogewogICAgdGFza3M6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0ICgpIHsKICAgICAgICByZXR1cm4ge2RhdGE6IFtdLCBsaW5rczogW119CiAgICAgIH0KICAgIH0sCiAgICBvcHRUeXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdCAoKXsKICAgICAgICByZXR1cm4gJ3ZpZXcnCiAgICAgIH0KICAgIH0sCiAgICBpZHM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQgKCl7CiAgICAgICAgcmV0dXJuIFtdCiAgICAgIH0KICAgIH0KICB9LAoKICBjcmVhdGVkKCkgewogIH0sCgogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIC8vIOWIneWni+WMlueUmOeJueWbvumFjee9rgogICAgdGhpcy5pbml0Q29uZmlnKCk7CiAgICBnYW50dC5wbHVnaW5zKHsKICAgICAgbWFya2VyOiB0cnVlCiAgICB9KTsKICAgIC8vIOeUmOeJueWbvuWIneWni+WMluWSjOWvvOWFpeaVsOaNrgogICAgZ2FudHQuaW5pdCh0aGlzLiRyZWZzLmdhbnR0KTsKICAgIGdhbnR0LnBhcnNlKHRoaXMudGFza3MpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIC8vIOWIneWni+WMlueUmOeJueWbvuaVsOaNrgogICAgaW5pdERhdGEoKSB7CgogICAgfSwKICAgIHJlbG9hZCgpIHsKICAgICAgZ2FudHQuY2xlYXJBbGwoKTsKICAgICAgdGhpcy5hZGRUb2RheUxpbmUoKTsKICAgICAgZ2FudHQucGFyc2UodGhpcy4kcHJvcHMudGFza3MpOwogICAgICBnYW50dC5yZW5kZXIoKTsKICAgIH0sCiAgICBhZGRUb2RheUxpbmUoKSB7CiAgICAgIC8vIOaXtumXtOe6vwogICAgICB2YXIgZGF0ZV90b19zdHIgPSBnYW50dC5kYXRlLmRhdGVfdG9fc3RyKGdhbnR0LmNvbmZpZy50YXNrX2RhdGUpOwogICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgICBnYW50dC5hZGRNYXJrZXIoewogICAgICAgIHN0YXJ0X2RhdGU6IHRvZGF5LAogICAgICAgIGNzczogInRvZGF5IiwKICAgICAgICB0ZXh0OiAi5LuK5aSpIiwKICAgICAgICB0aXRsZTogIuS7iuWkqTogIiArIGRhdGVfdG9fc3RyKHRvZGF5KQogICAgICB9KTsKICAgIH0sCiAgICAvLyDliJ3lp4vljJbnlJjnibnlm77phY3nva4KICAgIGluaXRDb25maWcoKSB7CiAgICAgIC8vIDEg5Z+656GA6YWN572uCiAgICAgIC8vIDEuMSDnlJjnibnlm77mmK/lkKblj6ror7sKICAgICAgaWYodGhpcy5vcHRUeXBlID09J3ZpZXcnKXsKICAgICAgICBnYW50dC5jb25maWcucmVhZG9ubHkgPSB0cnVlOwogICAgICB9ZWxzZXsKICAgICAgICBnYW50dC5jb25maWcucmVhZG9ubHkgPSBmYWxzZTsKICAgICAgfQogICAgICAKICAgICAgLy8gMS4yIOihqOagvOWIl+iuvue9rgogICAgICBnYW50dC5jb25maWcuZHVyYXRpb25fdW5pdD0iaG91ciI7CiAgICAgIGdhbnR0LmNvbmZpZy5kdXJhdGlvbl9zdGVwPTg7CiAgICAgIGdhbnR0LmNvbmZpZy5ncmlkX3dpZHRoPTUyMDsKICAgICAgZ2FudHQuY29uZmlnLmNvbHVtbnMgPSBbCiAgICAgICAge25hbWU6InRleHQiLCBsYWJlbDoi5Lu75Yqh5ZCNIiwgdHJlZTp0cnVlLCB3aWR0aDonMjAwJyB9LAogICAgICAgIHtuYW1lOiJ3b3Jrc3RhdGlvbiIsbGFiZWw6IuW3peS9nOermSIsYWxpZ246ImNlbnRlciIsd2lkdGg6JyonfSwKICAgICAgICB7bmFtZToicHJvY2VzcyIsbGFiZWw6IuW3peW6jyIsYWxpZ246ImNlbnRlciIsd2lkdGg6JyonfSwgICAgICAgIAogICAgICAgIHtuYW1lOiJzdGFydF9kYXRlIiwgbGFiZWw6IuW8gOWni+aXtumXtCIsIGFsaWduOiJjZW50ZXIiLCB3aWR0aDonKicgfSwKICAgICAgICB7bmFtZToiZW5kX2RhdGUiLCBsYWJlbDoi57uT5p2f5pe26Ze0IiwgYWxpZ246ImNlbnRlciIgLCB3aWR0aDonKid9LAogICAgICBdOwogICAgICAvLyAxLjMg6K6+572u5Lit5paHCiAgICAgIGdhbnR0LmkxOG4uc2V0TG9jYWxlKCJjbiIpOwogICAgICAvLyAxLjQg6byg5qCH5oKs5rWu5qGGCiAgICAgIGdhbnR0LnBsdWdpbnMoe3Rvb2x0aXA6IHRydWV9KTsvLyDlkK/nlKh0b29sdGlw5oKs5rWu5qGGCiAgICAgIGdhbnR0LnRlbXBsYXRlcy50b29sdGlwX3RleHQgPSBmdW5jdGlvbihzdGFydCwgZW5kLCB0YXNrKSB7CiAgICAgICAgaWYodGFzay50eXBlPT0ncHJvamVjdCcpewogICAgICAgICAgcmV0dXJuICI8YiBzdHlsZT0ndGV4dC1hbGlnbjpsZWZ0Oyc+55Sf5Lqn5bel5Y2VOjwvYj4gIiArIHRhc2sudGV4dCArIiAgICA8c3BhbiBzdHlsZT0ndGV4dC1hbGlnbjpsZWZ0Oyc+IiArIiDlrozmiJDmr5TkvovvvJoiKyBNYXRoLnJvdW5kKHRhc2sucHJvZ3Jlc3MgKiAxMDApICsgIiUgPC9zcGFuPiI7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICByZXR1cm4gIjxiIHN0eWxlPSd0ZXh0LWFsaWduOmxlZnQ7Jz7nlJ/kuqfku7vliqE6PC9iPiAiK3Rhc2sucHJvY2VzcysiICIrIHRhc2sudGV4dCArIiAgICA8c3BhbiBzdHlsZT0ndGV4dC1hbGlnbjpsZWZ0Oyc+IiArIiDlrozmiJDmr5TkvovvvJoiKyBNYXRoLnJvdW5kKHRhc2sucHJvZ3Jlc3MgKiAxMDApICsgIiUgPC9zcGFuPiI7CiAgICAgICAgfQogICAgICB9OwoKCiAgICAgIC8vIDEuNSDliJ3lp4vljJbnmoTml7blgJnlsLHlsZXlvIDmoJHnu5PmnoQKICAgICAgZ2FudHQuY29uZmlnLm9wZW5fdHJlZV9pbml0aWFsbHkgPSB0cnVlOwogICAgICAvLyAxLjYg5pi+56S65Yiw5Lu75Yqh5LiK55qE5paH5pysCiAgICAgIGdhbnR0LnRlbXBsYXRlcy50YXNrX3RleHQgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCwgdGFzaykgewogICAgICAgIGlmKHRhc2sudHlwZT09J3Byb2plY3QnKXsKICAgICAgICAgIHJldHVybiAiPGIgc3R5bGU9J3RleHQtYWxpZ246bGVmdDsnPueUn+S6p+W3peWNlTo8L2I+ICIgKyB0YXNrLnRleHQgKyIgICAgPHNwYW4gc3R5bGU9J3RleHQtYWxpZ246bGVmdDsnPiIgKyIg5a6M5oiQ5q+U5L6L77yaIisgTWF0aC5yb3VuZCh0YXNrLnByb2dyZXNzICogMTAwKSArICIlIDwvc3Bhbj4iOwogICAgICAgIH1lbHNlewogICAgICAgICAgcmV0dXJuICI8YiBzdHlsZT0ndGV4dC1hbGlnbjpsZWZ0Oyc+55Sf5Lqn5Lu75YqhOjwvYj4gIit0YXNrLnByb2Nlc3MrIiAiKyB0YXNrLnRleHQgKyIgICAgPHNwYW4gc3R5bGU9J3RleHQtYWxpZ246bGVmdDsnPiIgKyIg5a6M5oiQ5q+U5L6L77yaIisgTWF0aC5yb3VuZCh0YXNrLnByb2dyZXNzICogMTAwKSArICIlIDwvc3Bhbj4iOwogICAgICAgIH0KICAgICAgICAKICAgICAgfTsKICAgICAgLy8gMS43IOaYvuekuuWNleWFg+agvAogICAgICBnYW50dC5jb25maWcuc2hvd190YXNrX2NlbGxzID0gdHJ1ZTsKCiAgICAgIC8vIDIg5pe26Ze06YWN572uCiAgICAgIC8vIDIuMSDml7bpl7TlnZDmoIfovbTljZXkvY0gbWludXRlL2hvdXIvZGF5L3dlZWsvcXVhcnRlci9tb250aC95ZWFyCiAgICAgLy8gZ2FudHQuY29uZmlnLnNjYWxlX3VuaXQgPSAiaG91ciI7CiAgICAgIC8vIDIuMiDml6XmnJ/moLzlvI8KICAgICAvLyBnYW50dC5jb25maWcuZGF0ZV9zY2FsZSA9ICIlSCI7CiAgICAgIC8vIDIuMyDml7bpl7TlnZDmoIfkuLrmnIjku73nmoTml7blgJkgIOWFiOaYvuekuuW5tOS7veWGjeaciOS7vQogICAgIC8vIGdhbnR0LmNvbmZpZy5zdWJzY2FsZXMgPSBbe3VuaXQ6ICJtb250aCIsIHN0ZXA6IDEsIGRhdGU6ICIlWSwlRiJ9XTsKICAgICAgCiAgICAgIHZhciB3ZWVrU2NhbGVUZW1wbGF0ZSA9IGZ1bmN0aW9uIChkYXRlKSB7CiAgICAgICAgdmFyIGRhdGVUb1N0ciA9IGdhbnR0LmRhdGUuZGF0ZV90b19zdHIoIiVNICVkIik7CiAgICAgICAgdmFyIGVuZERhdGUgPSBnYW50dC5kYXRlLmFkZChnYW50dC5kYXRlLmFkZChkYXRlLCAxLCAid2VlayIpLCAtMSwgImRheSIpOwogICAgICAgIHJldHVybiBkYXRlVG9TdHIoZGF0ZSkgKyAiIC0gIiArIGRhdGVUb1N0cihlbmREYXRlKTsKICAgICAgfTsKCiAgICAgIHZhciBkYXlUZW1wbGF0ZSA9IGZ1bmN0aW9uKGRhdGUpewogICAgICAgIHZhciBkYXRlVG9TdHIgPSBnYW50dC5kYXRlLmRhdGVfdG9fc3RyKCIlTSAlZCIpOwogICAgICAgIHZhciB3ZWVrRGF5ID0gZ2FudHQuZGF0ZS5kYXRlX3RvX3N0cigiJUQiKTsKICAgICAgICByZXR1cm4gZGF0ZVRvU3RyKGRhdGUpOyArICIoIiArIHdlZWtEYXkoZGF0ZSkgKyAiKSI7CiAgICAgIH07CgogICAgICB2YXIgZGF5c1N0eWxlID0gZnVuY3Rpb24oZGF0ZSl7CiAgICAgICAgICAvLyB5b3UgY2FuIHVzZSBnYW50dC5pc1dvcmtUaW1lKGRhdGUpCiAgICAgICAgICAvLyB3aGVuIGdhbnR0LmNvbmZpZy53b3JrX3RpbWUgY29uZmlnIGlzIGVuYWJsZWQKICAgICAgICAgIC8vIEluIHRoaXMgc2FtcGxlIGl0J3Mgbm90IHNvIHdlIGp1c3QgY2hlY2sgd2VlayBkYXlzCgogICAgICAgICAgaWYoZGF0ZS5nZXREYXkoKSA9PT0gMCB8fCBkYXRlLmdldERheSgpID09PSA2KXsKICAgICAgICAgICAgcmV0dXJuICJ3ZWVrZW5kIjsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICB9OwoKICAgICAgZ2FudHQuY29uZmlnLnNjYWxlcyA9WwogICAgICAgIHt1bml0OiJ3ZWVrIiwgc3RlcDoxLGZvcm1hdDogd2Vla1NjYWxlVGVtcGxhdGV9LAogICAgICAgIHt1bml0OiJkYXkiLCBzdGVwOjEsZm9ybWF0OiBkYXlUZW1wbGF0ZSxjc3M6IGRheXNTdHlsZX0sCiAgICAgICAge3VuaXQ6ImhvdXIiLCBzdGVwOjgsZm9ybWF0OiAiJUg6JWkifSwgLy/ov5nph4znmoRzdGVw6KaB5qC55o2u5b2T5YmN55qE54+t5qyh6K6+572u5p2l44CC5aaC5p6c5piv5LiJ54+t5YCS5YiZ5pivOO+8jOWmguaenOaYr+S4pOePreWAkuWImeaYrzEy44CCCiAgICAgIF0KICAgICAgCiAgICAgIGdhbnR0LmNvbmZpZy5zY2FsZV9oZWlnaHQgPSA1MDsKCiAgICAgIC8vIDIuNCDlrprkuYnku47lkI7nq6/ojrflj5bmiJblj5HpgIHliLDlkI7nq6/nmoTml6XmnJ/mlbDmja7op6PmnpDmoLzlvI8KICAgICAgZ2FudHQuY29uZmlnLnhtbF9kYXRlID0gIiVZLSVtLSVkICVIOiVpOiVzIjsKCiAgICAgIC8vIDMg5ouW5Yqo6YWN572uCiAgICAgIC8vIDMuMSDoh6rliqjosIPmlbTnsbvlnoss5b2T5a2Y5Zyo5a2Q6IqC54K55pe26Ieq5Yqo5Y2H57qn5Li6cHJvamVjdAogICAgICBnYW50dC5jb25maWcuYXV0b190eXBlcyA9IGZhbHNlOwogICAgICAvLyAzLjIg6K6+572u5LiN5Y+v5Lul5ouW5Yqo6L+b5bqmCiAgICAgIGdhbnR0LmNvbmZpZy5kcmFnX3Byb2dyZXNzID0gdHJ1ZTsKICAgICAgLy8gMy4zIOiuvue9rlRhc2vkuI3lj6/ku6Xmi5bliqgKICAgICAgZ2FudHQuY29uZmlnLmRyYWdfbW92ZSA9IHRydWU7CiAgICAgIC8vIDMuNCDorr7nva7kuI3lj6/ku6Xmi5bliqjlhbPns7sKICAgICAgZ2FudHQuY29uZmlnLmRyYWdfbGlua3MgPSB0cnVlOwogICAgICAvLyAzLjUg6K6+572u5LiN5Y+v5ouW5YqoVGFzayDlpKflsI8KICAgICAgZ2FudHQuY29uZmlnLmRyYWdfcmVzaXplID0gdHJ1ZTsKICAgICAgLy8gMy42IOWNleWHu+aYvuekuua3u+WKoOivpuaDhQogICAgICBnYW50dC5jb25maWcuZGV0YWlsc19vbl9jcmVhdGUgPSB0cnVlOwogICAgICAvLyAzLjcg5Y+M5Ye75pi+56S65piO57uGCiAgICAgIGdhbnR0LmNvbmZpZy5kZXRhaWxzX29uX2RibGNsaWNrID0gdHJ1ZTsKCiAgICAgIGxldCB0ID0gdGhpcy4kcHJvcHMudGFza3M7CiAgICAgIGxldCBjID0gdGhpcy4kcHJvcHMuaWRzOwogICAgICBnYW50dC5hdHRhY2hFdmVudCgib25BZnRlclRhc2tVcGRhdGUiLGZ1bmN0aW9uKGlkLG9iail7CiAgICAgICAgZGVidWdnZXI7CiAgICAgICAgbGV0IHR0ID0gdC5kYXRhLmZpbHRlciggaXRlbT0+IGl0ZW0uaWQgPT0gaWQpOwogICAgICAgIHR0PW9iajsgIAogICAgICAgIGMucHVzaChpZCk7ICAgICAgICAgICAgICAKICAgICAgfSk7CgoKICAgIH0KICB9Cn0K"},{"version":3,"sources":["ganttx.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA","file":"ganttx.vue","sourceRoot":"src/views/mes/pro/schedule","sourcesContent":["<template>\n  <div ref=\"gantt\"></div>\n</template>\n\n<script>\nimport { gantt } from 'dhtmlx-gantt';\nexport default {\n  name: 'GanttChar',\n  data() {\n    return {\n      newObj: {}\n    }\n  },\n  props: {\n    tasks: {\n      type: Object,\n      default () {\n        return {data: [], links: []}\n      }\n    },\n    optType: {\n      type: String,\n      default (){\n        return 'view'\n      }\n    },\n    ids: {\n      type: Array,\n      default (){\n        return []\n      }\n    }\n  },\n\n  created() {\n  },\n\n  mounted: function () {\n    // 初始化甘特图配置\n    this.initConfig();\n    gantt.plugins({\n      marker: true\n    });\n    // 甘特图初始化和导入数据\n    gantt.init(this.$refs.gantt);\n    gantt.parse(this.tasks);\n  },\n\n  methods: {\n    // 初始化甘特图数据\n    initData() {\n\n    },\n    reload() {\n      gantt.clearAll();\n      this.addTodayLine();\n      gantt.parse(this.$props.tasks);\n      gantt.render();\n    },\n    addTodayLine() {\n      // 时间线\n      var date_to_str = gantt.date.date_to_str(gantt.config.task_date);\n      var today = new Date();\n      gantt.addMarker({\n        start_date: today,\n        css: \"today\",\n        text: \"今天\",\n        title: \"今天: \" + date_to_str(today)\n      });\n    },\n    // 初始化甘特图配置\n    initConfig() {\n      // 1 基础配置\n      // 1.1 甘特图是否只读\n      if(this.optType =='view'){\n        gantt.config.readonly = true;\n      }else{\n        gantt.config.readonly = false;\n      }\n      \n      // 1.2 表格列设置\n      gantt.config.duration_unit=\"hour\";\n      gantt.config.duration_step=8;\n      gantt.config.grid_width=520;\n      gantt.config.columns = [\n        {name:\"text\", label:\"任务名\", tree:true, width:'200' },\n        {name:\"workstation\",label:\"工作站\",align:\"center\",width:'*'},\n        {name:\"process\",label:\"工序\",align:\"center\",width:'*'},        \n        {name:\"start_date\", label:\"开始时间\", align:\"center\", width:'*' },\n        {name:\"end_date\", label:\"结束时间\", align:\"center\" , width:'*'},\n      ];\n      // 1.3 设置中文\n      gantt.i18n.setLocale(\"cn\");\n      // 1.4 鼠标悬浮框\n      gantt.plugins({tooltip: true});// 启用tooltip悬浮框\n      gantt.templates.tooltip_text = function(start, end, task) {\n        if(task.type=='project'){\n          return \"<b style='text-align:left;'>生产工单:</b> \" + task.text +\"    <span style='text-align:left;'>\" +\" 完成比例：\"+ Math.round(task.progress * 100) + \"% </span>\";\n        }else{\n          return \"<b style='text-align:left;'>生产任务:</b> \"+task.process+\" \"+ task.text +\"    <span style='text-align:left;'>\" +\" 完成比例：\"+ Math.round(task.progress * 100) + \"% </span>\";\n        }\n      };\n\n\n      // 1.5 初始化的时候就展开树结构\n      gantt.config.open_tree_initially = true;\n      // 1.6 显示到任务上的文本\n      gantt.templates.task_text = function (start, end, task) {\n        if(task.type=='project'){\n          return \"<b style='text-align:left;'>生产工单:</b> \" + task.text +\"    <span style='text-align:left;'>\" +\" 完成比例：\"+ Math.round(task.progress * 100) + \"% </span>\";\n        }else{\n          return \"<b style='text-align:left;'>生产任务:</b> \"+task.process+\" \"+ task.text +\"    <span style='text-align:left;'>\" +\" 完成比例：\"+ Math.round(task.progress * 100) + \"% </span>\";\n        }\n        \n      };\n      // 1.7 显示单元格\n      gantt.config.show_task_cells = true;\n\n      // 2 时间配置\n      // 2.1 时间坐标轴单位 minute/hour/day/week/quarter/month/year\n     // gantt.config.scale_unit = \"hour\";\n      // 2.2 日期格式\n     // gantt.config.date_scale = \"%H\";\n      // 2.3 时间坐标为月份的时候  先显示年份再月份\n     // gantt.config.subscales = [{unit: \"month\", step: 1, date: \"%Y,%F\"}];\n      \n      var weekScaleTemplate = function (date) {\n        var dateToStr = gantt.date.date_to_str(\"%M %d\");\n        var endDate = gantt.date.add(gantt.date.add(date, 1, \"week\"), -1, \"day\");\n        return dateToStr(date) + \" - \" + dateToStr(endDate);\n      };\n\n      var dayTemplate = function(date){\n        var dateToStr = gantt.date.date_to_str(\"%M %d\");\n        var weekDay = gantt.date.date_to_str(\"%D\");\n        return dateToStr(date); + \"(\" + weekDay(date) + \")\";\n      };\n\n      var daysStyle = function(date){\n          // you can use gantt.isWorkTime(date)\n          // when gantt.config.work_time config is enabled\n          // In this sample it's not so we just check week days\n\n          if(date.getDay() === 0 || date.getDay() === 6){\n            return \"weekend\";\n          }\n          return \"\";\n        };\n\n      gantt.config.scales =[\n        {unit:\"week\", step:1,format: weekScaleTemplate},\n        {unit:\"day\", step:1,format: dayTemplate,css: daysStyle},\n        {unit:\"hour\", step:8,format: \"%H:%i\"}, //这里的step要根据当前的班次设置来。如果是三班倒则是8，如果是两班倒则是12。\n      ]\n      \n      gantt.config.scale_height = 50;\n\n      // 2.4 定义从后端获取或发送到后端的日期数据解析格式\n      gantt.config.xml_date = \"%Y-%m-%d %H:%i:%s\";\n\n      // 3 拖动配置\n      // 3.1 自动调整类型,当存在子节点时自动升级为project\n      gantt.config.auto_types = false;\n      // 3.2 设置不可以拖动进度\n      gantt.config.drag_progress = true;\n      // 3.3 设置Task不可以拖动\n      gantt.config.drag_move = true;\n      // 3.4 设置不可以拖动关系\n      gantt.config.drag_links = true;\n      // 3.5 设置不可拖动Task 大小\n      gantt.config.drag_resize = true;\n      // 3.6 单击显示添加详情\n      gantt.config.details_on_create = true;\n      // 3.7 双击显示明细\n      gantt.config.details_on_dblclick = true;\n\n      let t = this.$props.tasks;\n      let c = this.$props.ids;\n      gantt.attachEvent(\"onAfterTaskUpdate\",function(id,obj){\n        debugger;\n        let tt = t.data.filter( item=> item.id == id);\n        tt=obj;  \n        c.push(id);              \n      });\n\n\n    }\n  }\n}\n</script>\n\n<style>\n  @import \"~dhtmlx-gantt/codebase/dhtmlxgantt.css\";\n  /* 任务名前的logo */\n  .gantt_tree_icon.gantt_file, .gantt_tree_icon.gantt_folder_open, .gantt_tree_icon.gantt_folder_closed{width: 10px; background-image: none;}\n  /* 任务线 */\n  .gantt_task_line{\n    height: 16px !important;\n    line-height: 16px !important;\n    margin-top: 8px;\n    border: none !important;\n    border-radius: 8px;\n  }\n  .gantt_task_line.gantt_milestone{border-radius: 0;}\n  /* 里程碑 */\n  .gantt_task_line.gantt_milestone{\n    width: 12px !important;\n    height: 16px !important;\n    border: none !important;\n    background-color: inherit !important;\n    background-size: cover;\n  }\n  /* 里程碑icon */\n  .gantt_task_line.gantt_milestone .gantt_task_content{\n    width: 12px;\n    height: 16px;\n    margin-left: 40px;\n    transform: rotate(0deg) !important;\n    background-image: url('../../../../assets/logo/logo.png') !important;\n  }\n  /* 左侧悬浮单元格背景色 */\n  .gantt_grid_data .gantt_row.odd:hover, .gantt_grid_data .gantt_row:hover{background-color: #f3f1fe !important;}\n  /* 选中一行背景色 */\n  .gantt_grid_data .gantt_row.gantt_selected, .gantt_grid_data .gantt_row.odd.gantt_selected, .gantt_task_row.gantt_selected{background-color: #f3f1fe !important;}\n  /* 选中一行每个单元格右border颜色 */\n  .gantt_task_row.gantt_selected .gantt_task_cell{border-right-color: #f3f1fe !important;}\n\n  /* 标记线 */\n  .gantt_marker{background-color: #f4ae05;opacity: .8;}\n\n\n  /*滚动条整体样式*/\n  .gantt-wrapper ::-webkit-scrollbar {\n    width: 14px;  /*宽分别对应竖滚动条的尺寸*/\n    height: 6px;  /*高分别对应横滚动条的尺寸*/\n  }\n\n  /*滚动条里面轨道*/\n  .gantt-wrapper ::-webkit-scrollbar-track {\n    background-color: rgba(0,0,0,.2);\n    border-radius: 5px;\n  }\n  /*滚动条里面拖动条*/\n  .gantt-wrapper ::-webkit-scrollbar-thumb {\n    background-color: rgba(0,0,0,.3);\n    border-radius: 5px;\n  }\n  .gantt-wrapper ::-webkit-scrollbar-thumb:hover {\n    background-color: rgba(0,0,0,.5);\n    border-radius: 5px;\n  }\n\n  /* 展开收起背景图片 */\n  .gantt_tree_icon.gantt_close, .gantt_tree_icon.gantt_open{\n    background-image: none !important;\n    position: relative;\n  }\n  /* 收起小三角 */\n  .gantt_tree_icon.gantt_close::after{\n    position: absolute;\n    content: '';\n    top: 14px;\n    left: 10px;\n    border-right: 6px solid transparent;\n    border-left: 6px solid transparent;\n    border-top: 6px solid #999999;\n\n  }\n  /* 展开小三角 */\n  .gantt_tree_icon.gantt_open::after{\n    position: absolute;\n    content: '';\n    top: 12px;\n    left: 12px;\n    border-bottom: 6px solid transparent;\n    border-top: 6px solid transparent;\n    border-left: 6px solid #999999;\n  }\n  /* 下方滚动条宽度 */\n  .gantt_layout_cell .gantt_hor_scroll{\n    width: calc(100% - 199px) !important;\n    left: 199px;\n  }\n\n  .scaleStyle{\n    height: 20px;\n  }\n  /* 周末背景颜色 */\n  .weekend{\n    background: rgb(189, 185, 186) !important;\n    width: 30s\n  }  \n</style>"]}]}