{"remainingRequest":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\tool\\build\\DraggableItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\tool\\build\\DraggableItem.vue","mtime":1662109326000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\babel.config.js","mtime":1662109326000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1662432871518},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1662432874590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgZHJhZ2dhYmxlIGZyb20gJ3Z1ZWRyYWdnYWJsZSc7CmltcG9ydCByZW5kZXIgZnJvbSAnQC91dGlscy9nZW5lcmF0b3IvcmVuZGVyJzsKdmFyIGNvbXBvbmVudHMgPSB7CiAgaXRlbUJ0bnM6IGZ1bmN0aW9uIGl0ZW1CdG5zKGgsIGVsZW1lbnQsIGluZGV4LCBwYXJlbnQpIHsKICAgIHZhciBfdGhpcyQkbGlzdGVuZXJzID0gdGhpcy4kbGlzdGVuZXJzLAogICAgICAgIGNvcHlJdGVtID0gX3RoaXMkJGxpc3RlbmVycy5jb3B5SXRlbSwKICAgICAgICBkZWxldGVJdGVtID0gX3RoaXMkJGxpc3RlbmVycy5kZWxldGVJdGVtOwogICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAiY2xhc3MiOiAiZHJhd2luZy1pdGVtLWNvcHkiLAogICAgICAiYXR0cnMiOiB7CiAgICAgICAgInRpdGxlIjogIuWkjeWItiIKICAgICAgfSwKICAgICAgIm9uIjogewogICAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKGV2ZW50KSB7CiAgICAgICAgICBjb3B5SXRlbShlbGVtZW50LCBwYXJlbnQpOwogICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBbaCgiaSIsIHsKICAgICAgImNsYXNzIjogImVsLWljb24tY29weS1kb2N1bWVudCIKICAgIH0pXSksIGgoInNwYW4iLCB7CiAgICAgICJjbGFzcyI6ICJkcmF3aW5nLWl0ZW0tZGVsZXRlIiwKICAgICAgImF0dHJzIjogewogICAgICAgICJ0aXRsZSI6ICLliKDpmaQiCiAgICAgIH0sCiAgICAgICJvbiI6IHsKICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljayhldmVudCkgewogICAgICAgICAgZGVsZXRlSXRlbShpbmRleCwgcGFyZW50KTsKICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgW2goImkiLCB7CiAgICAgICJjbGFzcyI6ICJlbC1pY29uLWRlbGV0ZSIKICAgIH0pXSldOwogIH0KfTsKdmFyIGxheW91dHMgPSB7CiAgY29sRm9ybUl0ZW06IGZ1bmN0aW9uIGNvbEZvcm1JdGVtKGgsIGVsZW1lbnQsIGluZGV4LCBwYXJlbnQpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIGFjdGl2ZUl0ZW0gPSB0aGlzLiRsaXN0ZW5lcnMuYWN0aXZlSXRlbTsKICAgIHZhciBjbGFzc05hbWUgPSB0aGlzLmFjdGl2ZUlkID09PSBlbGVtZW50LmZvcm1JZCA/ICdkcmF3aW5nLWl0ZW0gYWN0aXZlLWZyb20taXRlbScgOiAnZHJhd2luZy1pdGVtJzsKICAgIGlmICh0aGlzLmZvcm1Db25mLnVuRm9jdXNlZENvbXBvbmVudEJvcmRlcikgY2xhc3NOYW1lICs9ICcgdW5mb2N1cy1ib3JkZXJlZCc7CiAgICByZXR1cm4gaCgiZWwtY29sIiwgewogICAgICAiYXR0cnMiOiB7CiAgICAgICAgInNwYW4iOiBlbGVtZW50LnNwYW4KICAgICAgfSwKICAgICAgImNsYXNzIjogY2xhc3NOYW1lLAogICAgICAibmF0aXZlT24iOiB7CiAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soZXZlbnQpIHsKICAgICAgICAgIGFjdGl2ZUl0ZW0oZWxlbWVudCk7CiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIFtoKCJlbC1mb3JtLWl0ZW0iLCB7CiAgICAgICJhdHRycyI6IHsKICAgICAgICAibGFiZWwtd2lkdGgiOiBlbGVtZW50LmxhYmVsV2lkdGggPyAiIi5jb25jYXQoZWxlbWVudC5sYWJlbFdpZHRoLCAicHgiKSA6IG51bGwsCiAgICAgICAgImxhYmVsIjogZWxlbWVudC5sYWJlbCwKICAgICAgICAicmVxdWlyZWQiOiBlbGVtZW50LnJlcXVpcmVkCiAgICAgIH0KICAgIH0sIFtoKHJlbmRlciwgewogICAgICAia2V5IjogZWxlbWVudC5yZW5kZXJLZXksCiAgICAgICJhdHRycyI6IHsKICAgICAgICAiY29uZiI6IGVsZW1lbnQKICAgICAgfSwKICAgICAgIm9uIjogewogICAgICAgICJpbnB1dCI6IGZ1bmN0aW9uIGlucHV0KGV2ZW50KSB7CiAgICAgICAgICBfdGhpcy4kc2V0KGVsZW1lbnQsICdkZWZhdWx0VmFsdWUnLCBldmVudCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KV0pLCBjb21wb25lbnRzLml0ZW1CdG5zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyldKTsKICB9LAogIHJvd0Zvcm1JdGVtOiBmdW5jdGlvbiByb3dGb3JtSXRlbShoLCBlbGVtZW50LCBpbmRleCwgcGFyZW50KSB7CiAgICB2YXIgYWN0aXZlSXRlbSA9IHRoaXMuJGxpc3RlbmVycy5hY3RpdmVJdGVtOwogICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMuYWN0aXZlSWQgPT09IGVsZW1lbnQuZm9ybUlkID8gJ2RyYXdpbmctcm93LWl0ZW0gYWN0aXZlLWZyb20taXRlbScgOiAnZHJhd2luZy1yb3ctaXRlbSc7CiAgICB2YXIgY2hpbGQgPSByZW5kZXJDaGlsZHJlbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoKICAgIGlmIChlbGVtZW50LnR5cGUgPT09ICdmbGV4JykgewogICAgICBjaGlsZCA9IGgoImVsLXJvdyIsIHsKICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAidHlwZSI6IGVsZW1lbnQudHlwZSwKICAgICAgICAgICJqdXN0aWZ5IjogZWxlbWVudC5qdXN0aWZ5LAogICAgICAgICAgImFsaWduIjogZWxlbWVudC5hbGlnbgogICAgICAgIH0KICAgICAgfSwgW2NoaWxkXSk7CiAgICB9CgogICAgcmV0dXJuIGgoImVsLWNvbCIsIHsKICAgICAgImF0dHJzIjogewogICAgICAgICJzcGFuIjogZWxlbWVudC5zcGFuCiAgICAgIH0KICAgIH0sIFtoKCJlbC1yb3ciLCB7CiAgICAgICJhdHRycyI6IHsKICAgICAgICAiZ3V0dGVyIjogZWxlbWVudC5ndXR0ZXIKICAgICAgfSwKICAgICAgImNsYXNzIjogY2xhc3NOYW1lLAogICAgICAibmF0aXZlT24iOiB7CiAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soZXZlbnQpIHsKICAgICAgICAgIGFjdGl2ZUl0ZW0oZWxlbWVudCk7CiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIFtoKCJzcGFuIiwgewogICAgICAiY2xhc3MiOiAiY29tcG9uZW50LW5hbWUiCiAgICB9LCBbZWxlbWVudC5jb21wb25lbnROYW1lXSksIGgoZHJhZ2dhYmxlLCB7CiAgICAgICJhdHRycyI6IHsKICAgICAgICAibGlzdCI6IGVsZW1lbnQuY2hpbGRyZW4sCiAgICAgICAgImFuaW1hdGlvbiI6IDM0MCwKICAgICAgICAiZ3JvdXAiOiAiY29tcG9uZW50c0dyb3VwIgogICAgICB9LAogICAgICAiY2xhc3MiOiAiZHJhZy13cmFwcGVyIgogICAgfSwgW2NoaWxkXSksIGNvbXBvbmVudHMuaXRlbUJ0bnMuYXBwbHkodGhpcywgYXJndW1lbnRzKV0pXSk7CiAgfQp9OwoKZnVuY3Rpb24gcmVuZGVyQ2hpbGRyZW4oaCwgZWxlbWVudCwgaW5kZXgsIHBhcmVudCkgewogIHZhciBfdGhpczIgPSB0aGlzOwoKICBpZiAoIUFycmF5LmlzQXJyYXkoZWxlbWVudC5jaGlsZHJlbikpIHJldHVybiBudWxsOwogIHJldHVybiBlbGVtZW50LmNoaWxkcmVuLm1hcChmdW5jdGlvbiAoZWwsIGkpIHsKICAgIHZhciBsYXlvdXQgPSBsYXlvdXRzW2VsLmxheW91dF07CgogICAgaWYgKGxheW91dCkgewogICAgICByZXR1cm4gbGF5b3V0LmNhbGwoX3RoaXMyLCBoLCBlbCwgaSwgZWxlbWVudC5jaGlsZHJlbik7CiAgICB9CgogICAgcmV0dXJuIGxheW91dElzTm90Rm91bmQoKTsKICB9KTsKfQoKZnVuY3Rpb24gbGF5b3V0SXNOb3RGb3VuZCgpIHsKICB0aHJvdyBuZXcgRXJyb3IoIlx1NkNBMVx1NjcwOVx1NEUwRSIuY29uY2F0KHRoaXMuZWxlbWVudC5sYXlvdXQsICJcdTUzMzlcdTkxNERcdTc2ODRsYXlvdXQiKSk7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICByZW5kZXI6IHJlbmRlciwKICAgIGRyYWdnYWJsZTogZHJhZ2dhYmxlCiAgfSwKICBwcm9wczogWydlbGVtZW50JywgJ2luZGV4JywgJ2RyYXdpbmdMaXN0JywgJ2FjdGl2ZUlkJywgJ2Zvcm1Db25mJ10sCiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCkgewogICAgdmFyIGxheW91dCA9IGxheW91dHNbdGhpcy5lbGVtZW50LmxheW91dF07CgogICAgaWYgKGxheW91dCkgewogICAgICByZXR1cm4gbGF5b3V0LmNhbGwodGhpcywgaCwgdGhpcy5lbGVtZW50LCB0aGlzLmluZGV4LCB0aGlzLmRyYXdpbmdMaXN0KTsKICAgIH0KCiAgICByZXR1cm4gbGF5b3V0SXNOb3RGb3VuZCgpOwogIH0KfTs="},{"version":3,"mappings":";;AACA;AACA;AAEA;EACAA,QADA,oBACAC,CADA,EACAC,OADA,EACAC,KADA,EACAC,MADA,EACA;IACA;IAAA;IAAA;IACA;MAAA,SACA,mBADA;MAAA;QAAA,SACA;MADA;MAAA;QAAA,SACA;UACAC;UAAAC;QACA;MAHA;IAAA;MAAA,SAIA;IAJA;MAAA,SAMA,qBANA;MAAA;QAAA,SAMA;MANA;MAAA;QAAA,SAMA;UACAC;UAAAD;QACA;MARA;IAAA;MAAA,SASA;IATA;EAYA;AAfA;AAiBA;EACAE,WADA,uBACAP,CADA,EACAC,OADA,EACAC,KADA,EACAC,MADA,EACA;IAAA;;IACA;IACA;IACA;IACA;MAAA;QAAA,QACAF;MADA;MAAA,SACAO,SADA;MAAA;QAAA,SAEA;UAAAC;UAAAJ;QAAA;MAFA;IAAA;MAAA;QAAA,eAGAJ,+DAHA;QAAA,SAIAA,aAJA;QAAA,YAIAA;MAJA;IAAA;MAAA,OAKAA,iBALA;MAAA;QAAA,QAKAA;MALA;MAAA;QAAA,SAKA;UACA;QACA;MAPA;IAAA,MASAS,0CATA;EAYA,CAjBA;EAkBAC,WAlBA,uBAkBAX,CAlBA,EAkBAC,OAlBA,EAkBAC,KAlBA,EAkBAC,MAlBA,EAkBA;IACA;IACA;IACA;;IACA;MACAS;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,IACAA,KADA;IAGA;;IACA;MAAA;QAAA,QACAX;MADA;IAAA;MAAA;QAAA,UAEAA;MAFA;MAAA,SAEAO,SAFA;MAAA;QAAA,SAGA;UAAAC;UAAAJ;QAAA;MAHA;IAAA;MAAA,SAIA;IAJA,IAIAJ,qBAJA;MAAA;QAAA,QAKAA,gBALA;QAAA,aAKA,GALA;QAAA,SAKA;MALA;MAAA,SAKA;IALA,IAMAW,KANA,IAQAF,0CARA;EAYA;AAvCA;;AA0CA;EAAA;;EACA;EACA;IACA;;IACA;MACA;IACA;;IACA;EACA,CANA;AAOA;;AAEA;EACA;AACA;;AAEA;EACAA;IACAG,cADA;IAEAC;EAFA,CADA;EAKAC,QACA,SADA,EAEA,OAFA,EAGA,aAHA,EAIA,UAJA,EAKA,UALA,CALA;EAYAF,MAZA,kBAYAb,CAZA,EAYA;IACA;;IAEA;MACA;IACA;;IACA;EACA;AAnBA","names":["itemBtns","h","element","index","parent","copyItem","event","deleteItem","colFormItem","className","activeItem","components","rowFormItem","child","render","draggable","props"],"sourceRoot":"src/views/tool/build","sources":["DraggableItem.vue"],"sourcesContent":["<script>\nimport draggable from 'vuedraggable'\nimport render from '@/utils/generator/render'\n\nconst components = {\n  itemBtns(h, element, index, parent) {\n    const { copyItem, deleteItem } = this.$listeners\n    return [\n      <span class=\"drawing-item-copy\" title=\"复制\" onClick={event => {\n        copyItem(element, parent); event.stopPropagation()\n      }}>\n        <i class=\"el-icon-copy-document\" />\n      </span>,\n      <span class=\"drawing-item-delete\" title=\"删除\" onClick={event => {\n        deleteItem(index, parent); event.stopPropagation()\n      }}>\n        <i class=\"el-icon-delete\" />\n      </span>\n    ]\n  }\n}\nconst layouts = {\n  colFormItem(h, element, index, parent) {\n    const { activeItem } = this.$listeners\n    let className = this.activeId === element.formId ? 'drawing-item active-from-item' : 'drawing-item'\n    if (this.formConf.unFocusedComponentBorder) className += ' unfocus-bordered'\n    return (\n      <el-col span={element.span} class={className}\n        nativeOnClick={event => { activeItem(element); event.stopPropagation() }}>\n        <el-form-item label-width={element.labelWidth ? `${element.labelWidth}px` : null}\n          label={element.label} required={element.required}>\n          <render key={element.renderKey} conf={element} onInput={ event => {\n            this.$set(element, 'defaultValue', event)\n          }} />\n        </el-form-item>\n        {components.itemBtns.apply(this, arguments)}\n      </el-col>\n    )\n  },\n  rowFormItem(h, element, index, parent) {\n    const { activeItem } = this.$listeners\n    const className = this.activeId === element.formId ? 'drawing-row-item active-from-item' : 'drawing-row-item'\n    let child = renderChildren.apply(this, arguments)\n    if (element.type === 'flex') {\n      child = <el-row type={element.type} justify={element.justify} align={element.align}>\n              {child}\n            </el-row>\n    }\n    return (\n      <el-col span={element.span}>\n        <el-row gutter={element.gutter} class={className}\n          nativeOnClick={event => { activeItem(element); event.stopPropagation() }}>\n          <span class=\"component-name\">{element.componentName}</span>\n          <draggable list={element.children} animation={340} group=\"componentsGroup\" class=\"drag-wrapper\">\n            {child}\n          </draggable>\n          {components.itemBtns.apply(this, arguments)}\n        </el-row>\n      </el-col>\n    )\n  }\n}\n\nfunction renderChildren(h, element, index, parent) {\n  if (!Array.isArray(element.children)) return null\n  return element.children.map((el, i) => {\n    const layout = layouts[el.layout]\n    if (layout) {\n      return layout.call(this, h, el, i, element.children)\n    }\n    return layoutIsNotFound()\n  })\n}\n\nfunction layoutIsNotFound() {\n  throw new Error(`没有与${this.element.layout}匹配的layout`)\n}\n\nexport default {\n  components: {\n    render,\n    draggable\n  },\n  props: [\n    'element',\n    'index',\n    'drawingList',\n    'activeId',\n    'formConf'\n  ],\n  render(h) {\n    const layout = layouts[this.element.layout]\n\n    if (layout) {\n      return layout.call(this, h, this.element, this.index, this.drawingList)\n    }\n    return layoutIsNotFound()\n  }\n}\n</script>\n"]}]}