{"remainingRequest":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\cal\\calendar\\team.vue?vue&type=style&index=0&id=81b0dea2&lang=css&","dependencies":[{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\cal\\calendar\\team.vue","mtime":1662109326000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":1662432869776},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1662432875697},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\postcss-loader\\src\\index.js","mtime":1662432871503},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1662432874590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmdyaWQtY29udGVudHsKICAgICAgcGFkZGluZzogNXB4IDA7Cn0KCi5lbC1ncm91cC1saXN0LmVsLXJhZGlvLWdyb3VwewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBhbGlnbi1pdGVtczpzdHJldGNoOwp9CgouZWwtZ3JvdXAtbGlzdC5lbC1yYWRpby1ncm91cCAuZWwtcmFkaW8tYnV0dG9uOmZpcnN0LWNoaWxkIC5lbC1yYWRpby1idXR0b25fX2lubmVyLAouZWwtZ3JvdXAtbGlzdC5lbC1yYWRpby1ncm91cCAuZWwtcmFkaW8tYnV0dG9uOmxhc3QtY2hpbGQgLmVsLXJhZGlvLWJ1dHRvbl9faW5uZXIsCi5lbC1ncm91cC1saXN0LmVsLXJhZGlvLWdyb3VwICAuZWwtcmFkaW8tYnV0dG9uOmZpcnN0LWNoaWxkIC5lbC1yYWRpby1idXR0b25fX2lubmVyLAouZWwtZ3JvdXAtbGlzdC5lbC1yYWRpby1ncm91cCAuZWwtcmFkaW8tYnV0dG9uX19pbm5lcgp7CiAgICAgIGJvcmRlci1yYWRpdXM6IDBweCAhaW1wb3J0YW50OwogICAgICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKfQoKLmVsLWdyb3VwLWxpc3QuZWwtcmFkaW8tZ3JvdXAgLmVsLXJhZGlvLWJ1dHRvbnsKICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNGN0Y3RjcgIWltcG9ydGFudDsKfQoKLmVsLWdyb3VwLWxpc3QuZWwtcmFkaW8tZ3JvdXB7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkY2RmZTY7Cn0KCi5lbC1ncm91cC1saXN0LmVsLXJhZGlvLWdyb3VwID4gbGFiZWwgPiBzcGFuewogICAgICB3aWR0aDogMTAwJTsKICAgICAgdGV4dC1hbGlnbjogbGVmdDsKICAgICAgcGFkZGluZy1sZWZ0OiAyMHB4Owp9Ci8qKuacrOaciOWRqOacq+iuvue9ruS4uue6ouiJsiovCi5lbC1jYWxlbmRhci10YWJsZSAuY3VycmVudDpudGgtbGFzdC1jaGlsZCgtbisyKSAuc29sYXIgewogICAgICBjb2xvcjogcmVkOwogICAgICBmb250LXNpemU6IHNtYWxsOwp9Ci8qKuacrOaciOWGnOWOhuiuvue9ruS4uueBsOiJsiovCi5lbC1jYWxlbmRhci10YWJsZSAuY3VycmVudCAubHVuYXIgewogICAgICBjb2xvcjogIzYwNjI2NjsKICAgICAgZm9udC1zaXplOiBzbWFsbDsKfQovKirmnKzmnIjlhpzljoboioLml6Xorr7nva7kuLrnuqLoibIqLwouZWwtY2FsZW5kYXItdGFibGUgLmN1cnJlbnQgLmx1bmFyLmZlc3RpdmFsIHsKICAgICAgY29sb3I6IGdyZWVuOwogICAgICBmb250LXNpemU6IHNtYWxsOwp9Ci8qKuiKguWBh+aXpeiDjOaZr+iuvue9ruS4uue7v+iJsiAqLwouZWwtY2FsZW5kYXItdGFibGUgLmhvbGlkYXkgewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjODhFMzI1Owp9Cg=="},{"version":3,"sources":["team.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"team.vue","sourceRoot":"src/views/mes/cal/calendar","sourcesContent":["<template>\n      <div class=\"app-container\">\n          <el-container>\n                  <el-aside width=\"150px\">\n                        <el-radio-group v-model=\"selectedType\" class=\"x-fillitem el-group-list\" @change=\"onSelected\">        \n                              <el-radio-button\n                                    v-for=\"item in teamList\"\n                                    :key=\"item.teamId\"\n                                    :label=\"item.teamId\"\n                              >{{item.teamName}}</el-radio-button>                                              \n                        </el-radio-group>\n                  </el-aside>\n                  <el-main>\n                        <el-calendar v-loading=\"loading\" v-model=\"date\">\n                              <template slot=\"dateCell\" slot-scope=\"{date, data }\">\n                              <div>\n                                    <el-row>\n                                          <el-col :span=\"6\">\n                                                <div class=\"solar\">                    \n                                                      {{ data.day.split('-')[2] }}\n                                                </div>\n                                          </el-col>\n                                          <el-col :span=\"12\">\n                                                <div class=\"lunar\" :class=\"{ festival : isFestival(date, data) }\">{{ solarDate2lunar(data.day) }}</div>\n                                          </el-col>\n                                          <el-col :span=\"6\">\n                                                <el-tag v-if=\"holidayList.indexOf(data.day) ==-1\" effect=\"dark\">班</el-tag>\n                                                <el-tag v-else effect=\"dark\" type=\"success\">休</el-tag>\n                                          </el-col>\n                                    </el-row>\n                                    <el-row v-for=\"calendarDay in calendarDayList \" :key=\"calendarDay.theDay\">\n                                          <el-col :span=\"24\" v-if=\"calendarDay.theDay == data.day && holidayList.indexOf(data.day) ==-1\">\n                                                <div v-for=\"teamShift in calendarDay.teamShifts\" :key=\"teamShift.orderNum\" class=\"grid-content\">\n                                                      <el-button v-if=\"teamShift.orderNum == 1\" type=\"success\" icon=\"el-icon-sunrise\">{{ teamShift.teamName }}</el-button>\n                                                      <el-button v-if=\"teamShift.orderNum ==2 && calendarDay.shiftType=='SHIFT_THREE'\" type=\"warning\" icon=\"el-icon-sunny\">{{ teamShift.teamName }}</el-button>\n                                                      <el-button v-if=\"teamShift.orderNum ==2 && calendarDay.shiftType=='SHIFT_TWO'\"   type=\"info\"    icon=\"el-icon-moon\">{{ teamShift.teamName }}</el-button>\n                                                      <el-button v-if=\"teamShift.orderNum ==3 && calendarDay.shiftType=='SHIFT_THREE'\" type=\"info\"    icon=\"el-icon-moon\">{{ teamShift.teamName }}</el-button>\n                                                </div>                                               \n                                          </el-col>\n                                    </el-row>\n                              </div>                \n                              </template>\n                        </el-calendar>\n                  </el-main>\n          </el-container>\n      </div>\n</template>\n\n<script>\nimport { listAllTeam  } from \"@/api/mes/cal/team\";\nimport { listCalholiday } from \"@/api/mes/cal/calholiday\";\nimport { listCalendars } from \"@/api/mes/cal/calendar\";\nimport calendar from '@/utils/calendar';\nexport default {\n      name: 'TeamView',     \n      dicts:['mes_calendar_type'], \n      data(){\n            return {\n                  // 遮罩层\n                  loading: true,\n                  date: new Date(),\n                  teamList: [], //所有的班组\n                  holidayList:[],//假日\n                  workdayList:[],//工作日\n                  selectedType:null,\n                  calendarDayList:[\n                  ],\n                  teamShiftQueryParams: {\n                        queryType:'TEAM'\n                  },\n                  queryParams: {\n                        theDay: null,\n                        holidayType: null,\n                        startTime: null,\n                        endTime: null,\n                  },                        \n            }\n      },\n      watch:{\n            date:{\n                  handler(newVal,oldVal){\n                        console.log(newVal.getFullYear()+'-'+(newVal.getMonth()+1)+'-'+newVal.getDate());\n                        this.teamShiftQueryParams.date = newVal.getFullYear()+'-'+(newVal.getMonth()+1)+'-'+newVal.getDate();         \n                        this.loading = true;         \n                        listCalendars(this.teamShiftQueryParams).then(response =>{\n                              this.calendarDayList = response.data;\n                              this.loading = false;\n                        });\n                  }\n            }\n      },\n      created() {\n            this.getList();\n            this.getTeams();\n      },\n      methods:{\n            getTeams(){\n                  listAllTeam().then(response =>{\n                        this.teamList = response.data;\n                  });\n            },\n            /** 查询节假日设置列表 */\n            getList() {\n                  this.loading = true;   \n                  this.holidayList =[];\n                  this.workdayList =[];\n                  let that = this;         \n                  listCalholiday(this.queryParams).then(response => {\n                  if(response.data !=null){\n                        response.data.forEach(theDay => {\n                              if(theDay.holidayType =='HOLIDAY'){\n                              that.holidayList.push(theDay.theDay);\n                              }else{\n                              that.workdayList.push(theDay.theDay);\n                              }\n                        });                    \n                        this.loading = false;\n                  }\n                  });\n            },\n            //点击班组类型\n            onSelected(teamId){\n                  this.loading = true;   \n                  this.teamShiftQueryParams.teamId = teamId;\n                  this.teamShiftQueryParams.date = this.date;\n                  listCalendars(this.teamShiftQueryParams).then(response =>{\n                        this.calendarDayList = response.data;\n                        this.loading = false;\n                  });\n            },\n            isFestival(slotDate, slotData) {\n                  let solarDayArr = slotData.day.split('-');\n                  let lunarDay = calendar.solar2lunar(solarDayArr[0], solarDayArr[1], solarDayArr[2])\n      \n                  // 公历节日\\农历节日\\农历节气\n                  let festAndTerm = [];\n                  festAndTerm.push(lunarDay.festival == null ? '' : ' ' + lunarDay.festival)\n                  festAndTerm.push(lunarDay.lunarFestival == null ? '' : '' + lunarDay.lunarFestival)\n                  festAndTerm.push(lunarDay.Term == null ? '' : '' + lunarDay.Term)\n                  festAndTerm = festAndTerm.join('')\n      \n                  return festAndTerm != ''\n            },\n            solarDate2lunar(solarDate) {\n                  var solar = solarDate.split('-')\n                  var lunar = calendar.solar2lunar(solar[0], solar[1], solar[2])       \n                  \n                  let lunarMD = lunar.IMonthCn + lunar.IDayCn;\n                  // 公历节日\\农历节日\\农历节气\n                  let festAndTerm = [];\n                  festAndTerm.push(lunar.festival == null ? '' : ' ' + lunar.festival)\n                  festAndTerm.push(lunar.lunarFestival == null ? '' : '' + lunar.lunarFestival)\n                  festAndTerm.push(lunar.Term == null ? '' : '' + lunar.Term)\n                  festAndTerm = festAndTerm.join('')\n      \n                  return festAndTerm == '' ? lunarMD : festAndTerm\n                  \n            }\n      }\n}\n</script>\n<style>\n      .grid-content{\n            padding: 5px 0;\n      }\n\n      .el-group-list.el-radio-group{\n            display: flex;\n            flex-direction: column;\n            align-items:stretch;\n      }\n\n      .el-group-list.el-radio-group .el-radio-button:first-child .el-radio-button__inner,\n      .el-group-list.el-radio-group .el-radio-button:last-child .el-radio-button__inner,\n      .el-group-list.el-radio-group  .el-radio-button:first-child .el-radio-button__inner,\n      .el-group-list.el-radio-group .el-radio-button__inner\n      {\n            border-radius: 0px !important;\n            border: none !important;\n      }\n\n      .el-group-list.el-radio-group .el-radio-button{\n            border-bottom: 1px solid #F7F7F7 !important;\n      }\n\n      .el-group-list.el-radio-group{\n            border: 1px solid #dcdfe6;\n      }\n\n      .el-group-list.el-radio-group > label > span{\n            width: 100%;\n            text-align: left;\n            padding-left: 20px;\n      }\n      /**本月周末设置为红色*/\n      .el-calendar-table .current:nth-last-child(-n+2) .solar {\n            color: red;\n            font-size: small;\n      }\n      /**本月农历设置为灰色*/\n      .el-calendar-table .current .lunar {\n            color: #606266;\n            font-size: small;\n      }\n      /**本月农历节日设置为红色*/\n      .el-calendar-table .current .lunar.festival {\n            color: green;\n            font-size: small;\n      }\n      /**节假日背景设置为绿色 */\n      .el-calendar-table .holiday {\n            background-color: #88E325;\n      }\n</style>"]}]}