{"remainingRequest":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\components\\machinerySelect\\single.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\components\\machinerySelect\\single.vue","mtime":1662109326000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\babel.config.js","mtime":1662109326000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1662432871518},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1662432874590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGxpc3RNYWNoaW5lcnksIGdldE1hY2hpbmVyeSwgZGVsTWFjaGluZXJ5LCBhZGRNYWNoaW5lcnksIHVwZGF0ZU1hY2hpbmVyeSB9IGZyb20gIkAvYXBpL21lcy9kdi9tYWNoaW5lcnkiOwppbXBvcnQgeyBsaXN0TWFjaGluZXJ5dHlwZSB9IGZyb20gIkAvYXBpL21lcy9kdi9tYWNoaW5lcnl0eXBlIjsKaW1wb3J0IHsgbGlzdEFsbFdvcmtzaG9wIH0gZnJvbSAiQC9hcGkvbWVzL21kL3dvcmtzaG9wIjsKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICJAL3V0aWxzL2F1dGgiOwppbXBvcnQgVHJlZXNlbGVjdCBmcm9tICJAcmlvcGhhZS92dWUtdHJlZXNlbGVjdCI7CmltcG9ydCAiQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QvZGlzdC92dWUtdHJlZXNlbGVjdC5jc3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk1hY2hpbmVyeVNlbGVjdFNpbmdsZSIsCiAgZGljdHM6IFsnc3lzX3llc19ubycsICdtZXNfbWFjaGluZXJ5X3N0YXR1cyddLAogIGNvbXBvbmVudHM6IHsKICAgIFRyZWVzZWxlY3Q6IFRyZWVzZWxlY3QKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93RmxhZzogZmFsc2UsCiAgICAgIC8vIOmBrue9qeWxggogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAvLyDpgInkuK3mlbDnu4QKICAgICAgc2VsZWN0ZWRNYWNoaW5lcnlJZDogdW5kZWZpbmVkLAogICAgICBzZWxlY3RlZFJvd3M6IFtdLAogICAgICAvLyDpnZ7ljZXkuKrnpoHnlKgKICAgICAgc2luZ2xlOiB0cnVlLAogICAgICAvLyDpnZ7lpJrkuKrnpoHnlKgKICAgICAgbXVsdGlwbGU6IHRydWUsCiAgICAgIC8vIOaYvuekuuaQnOe0ouadoeS7tgogICAgICBzaG93U2VhcmNoOiB0cnVlLAogICAgICAvLyDmgLvmnaHmlbAKICAgICAgdG90YWw6IDAsCiAgICAgIC8vIOeJqeaWmeS6p+WTgeihqOagvOaVsOaNrgogICAgICBtYWNoaW5lcnlMaXN0OiBbXSwKICAgICAgLy8g5by55Ye65bGC5qCH6aKYCiAgICAgIHRpdGxlOiAiIiwKICAgICAgLy8g6K6+5aSH57G75Z6L5qCR6YCJ6aG5CiAgICAgIG1hY2hpbmVyeVR5cGVPcHRpb25zOiBbXSwKICAgICAgLy/ovabpl7TpgInpobkKICAgICAgd29ya3Nob3BPcHRpb25zOiBbXSwKICAgICAgLy8g5piv5ZCm5pi+56S65by55Ye65bGCCiAgICAgIG9wZW46IGZhbHNlLAogICAgICAvLyDorr7lpIfnsbvlnovlkI3np7AKICAgICAgbWFjaGluZXJ5VHlwZU5hbWU6IHVuZGVmaW5lZCwKICAgICAgLy/oh6rliqjnlJ/miJDnianmlpnnvJbnoIHmoIfor4YKICAgICAgYXV0b0dlbkZsYWc6IGZhbHNlLAogICAgICAvLyDooajljZXlj4LmlbAKICAgICAgZm9ybToge30sCiAgICAgIGRlZmF1bHRQcm9wczogewogICAgICAgIGNoaWxkcmVuOiAiY2hpbGRyZW4iLAogICAgICAgIGxhYmVsOiAibWFjaGluZXJ5VHlwZU5hbWUiCiAgICAgIH0sCiAgICAgIC8vIOafpeivouWPguaVsAogICAgICBxdWVyeVBhcmFtczogewogICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIG1hY2hpbmVyeUNvZGU6IG51bGwsCiAgICAgICAgbWFjaGluZXJ5TmFtZTogbnVsbCwKICAgICAgICBtYWNoaW5lcnlCcmFuZDogbnVsbCwKICAgICAgICBtYWNoaW5lcnlTcGVjOiBudWxsLAogICAgICAgIG1hY2hpbmVyeVR5cGVJZDogbnVsbCwKICAgICAgICBtYWNoaW5lcnlUeXBlQ29kZTogbnVsbCwKICAgICAgICBtYWNoaW5lcnlUeXBlTmFtZTogbnVsbCwKICAgICAgICB3b3Jrc2hvcElkOiBudWxsLAogICAgICAgIHdvcmtzaG9wQ29kZTogbnVsbCwKICAgICAgICB3b3Jrc2hvcE5hbWU6IG51bGwsCiAgICAgICAgc3RhdHVzOiBudWxsCiAgICAgIH0KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgLy8g5qC55o2u6K6+5aSH5YiG57G75ZCN56ew562b6YCJ5YiG57G75qCRCiAgICBtYWNoaW5lcnlUeXBlTmFtZTogZnVuY3Rpb24gbWFjaGluZXJ5VHlwZU5hbWUodmFsKSB7CiAgICAgIHRoaXMuJHJlZnMudHJlZS5maWx0ZXIodmFsKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICAgIHRoaXMuZ2V0VHJlZXNlbGVjdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLyoqIOafpeivoueJqeaWmee8lueggeWIl+ihqCAqLwogICAgZ2V0TGlzdDogZnVuY3Rpb24gZ2V0TGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGxpc3RNYWNoaW5lcnkodGhpcy5xdWVyeVBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5tYWNoaW5lcnlMaXN0ID0gcmVzcG9uc2Uucm93czsKICAgICAgICBfdGhpcy50b3RhbCA9IHJlc3BvbnNlLnRvdGFsOwogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0V29ya3Nob3BzOiBmdW5jdGlvbiBnZXRXb3Jrc2hvcHMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgbGlzdEFsbFdvcmtzaG9wKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBkZWJ1Z2dlcjsKICAgICAgICBfdGhpczIud29ya3Nob3BPcHRpb25zID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKiDovazmjaLorr7lpIfnsbvlnovmlbDmja7nu5PmnoQgKi8KICAgIG5vcm1hbGl6ZXI6IGZ1bmN0aW9uIG5vcm1hbGl6ZXIobm9kZSkgewogICAgICBpZiAobm9kZS5jaGlsZHJlbiAmJiAhbm9kZS5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICBkZWxldGUgbm9kZS5jaGlsZHJlbjsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogbm9kZS5tYWNoaW5lcnlUeXBlSWQsCiAgICAgICAgbGFiZWw6IG5vZGUubWFjaGluZXJ5VHlwZU5hbWUsCiAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4KICAgICAgfTsKICAgIH0sCgogICAgLyoqIOafpeivouiuvuWkh+exu+Wei+S4i+aLieagkee7k+aehCAqLwogICAgZ2V0VHJlZXNlbGVjdDogZnVuY3Rpb24gZ2V0VHJlZXNlbGVjdCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBsaXN0TWFjaGluZXJ5dHlwZSgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgZGVidWdnZXI7CiAgICAgICAgX3RoaXMzLm1hY2hpbmVyeVR5cGVPcHRpb25zID0gW107CgogICAgICAgIHZhciBkYXRhID0gX3RoaXMzLmhhbmRsZVRyZWUocmVzcG9uc2UuZGF0YSwgIm1hY2hpbmVyeVR5cGVJZCIsICJwYXJlbnRUeXBlSWQiKVswXTsKCiAgICAgICAgX3RoaXMzLm1hY2hpbmVyeVR5cGVPcHRpb25zLnB1c2goZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOetm+mAieiKgueCuQogICAgZmlsdGVyTm9kZTogZnVuY3Rpb24gZmlsdGVyTm9kZSh2YWx1ZSwgZGF0YSkgewogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gdHJ1ZTsKICAgICAgcmV0dXJuIGRhdGEubWFjaGluZXJ5VHlwZU5hbWUuaW5kZXhPZih2YWx1ZSkgIT09IC0xOwogICAgfSwKICAgIC8vIOiKgueCueWNleWHu+S6i+S7tgogICAgaGFuZGxlTm9kZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVOb2RlQ2xpY2soZGF0YSkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLm1hY2hpbmVyeVR5cGVJZCA9IGRhdGEubWFjaGluZXJ5VHlwZUlkOwogICAgICB0aGlzLmhhbmRsZVF1ZXJ5KCk7CiAgICB9LAoKICAgIC8qKiDmkJzntKLmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZVF1ZXJ5OiBmdW5jdGlvbiBoYW5kbGVRdWVyeSgpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlTnVtID0gMTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAoKICAgIC8qKiDph43nva7mjInpkq7mk43kvZwgKi8KICAgIHJlc2V0UXVlcnk6IGZ1bmN0aW9uIHJlc2V0UXVlcnkoKSB7CiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsKICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnQ6IGZ1bmN0aW9uIGhhbmRsZUN1cnJlbnQocm93KSB7CiAgICAgIGlmIChyb3cpIHsKICAgICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IHJvdzsKICAgICAgfQogICAgfSwKICAgIC8v5Y+M5Ye76YCJ5LitCiAgICBoYW5kbGVSb3dEYkNsaWNrOiBmdW5jdGlvbiBoYW5kbGVSb3dEYkNsaWNrKHJvdykgewogICAgICBpZiAocm93KSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSByb3c7CiAgICAgICAgdGhpcy4kZW1pdCgnb25TZWxlY3RlZCcsIHRoaXMuc2VsZWN0ZWRSb3dzKTsKICAgICAgICB0aGlzLnNob3dGbGFnID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICAvLyDljZXpgInpgInkuK3mlbDmja4KICAgIGhhbmRsZVJvd0NoYW5nZTogZnVuY3Rpb24gaGFuZGxlUm93Q2hhbmdlKHJvdykgewogICAgICBpZiAocm93KSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSByb3c7CiAgICAgIH0KICAgIH0sCiAgICAvL+ehruWumumAieS4rQogICAgY29uZmlybVNlbGVjdDogZnVuY3Rpb24gY29uZmlybVNlbGVjdCgpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRNYWNoaW5lcnlJZCA9PSBudWxsIHx8IHRoaXMuc2VsZWN0ZWRNYWNoaW5lcnlJZCA9PSAwKSB7CiAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIHRpdGxlOiAn5o+Q56S6JywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgIG1lc3NhZ2U6ICfor7foh7PlsJHpgInmi6nkuIDmnaHmlbDmja4hJwogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy4kZW1pdCgnb25TZWxlY3RlZCcsIHRoaXMuc2VsZWN0ZWRSb3dzKTsKICAgICAgdGhpcy5zaG93RmxhZyA9IGZhbHNlOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;AACA;AAEA;AACA;AACA;AAEA;EACAA,6BADA;EAEAC,6CAFA;EAGAC;IAAAC;EAAA,CAHA;EAIAC,IAJA,kBAIA;IACA;MACAC,eADA;MAEA;MACAC,aAHA;MAIA;MACAC,8BALA;MAMAC,gBANA;MAOA;MACAC,YARA;MASA;MACAC,cAVA;MAWA;MACAC,gBAZA;MAaA;MACAC,QAdA;MAeA;MACAC,iBAhBA;MAiBA;MACAC,SAlBA;MAmBA;MACAC,wBApBA;MAqBA;MACAC,mBAtBA;MAuBA;MACAC,WAxBA;MAyBA;MACAC,4BA1BA;MA2BA;MACAC,kBA5BA;MA6BA;MACAC,QA9BA;MA+BAC;QACAC,oBADA;QAEAC;MAFA,CA/BA;MAmCA;MACAC;QACAC,UADA;QAEAC,YAFA;QAGAC,mBAHA;QAIAC,mBAJA;QAKAC,oBALA;QAMAC,mBANA;QAOAC,qBAPA;QAQAC,uBARA;QASAd,uBATA;QAUAe,gBAVA;QAWAC,kBAXA;QAYAC,kBAZA;QAaAC;MAbA;IApCA;EAoDA,CAzDA;EA0DAC;IACA;IACAnB,iBAFA,6BAEAoB,GAFA,EAEA;MACA;IACA;EAJA,CA1DA;EAgEAC,OAhEA,qBAgEA;IACA;IACA;EACA,CAnEA;EAoEAC;IACA;IACAC,OAFA,qBAEA;MAAA;;MACA;MACAC;QACA;QACA;QACA;MACA,CAJA;IAMA,CAVA;IAWAC,YAXA,0BAWA;MAAA;;MACAC;QACA;QACA;MACA,CAHA;IAIA,CAhBA;;IAiBA;IACAC,UAlBA,sBAkBAC,IAlBA,EAkBA;MACA;QACA;MACA;;MACA;QACAC,wBADA;QAEAxB,6BAFA;QAGAD;MAHA;IAKA,CA3BA;;IA4BA;IACA0B,aA7BA,2BA6BA;MAAA;;MACAC;QACA;QACA;;QACA;;QACA;MACA,CALA;IAMA,CApCA;IAqCA;IACAC,UAtCA,sBAsCAC,KAtCA,EAsCA/C,IAtCA,EAsCA;MACA;MACA;IACA,CAzCA;IA0CA;IACAgD,eA3CA,2BA2CAhD,IA3CA,EA2CA;MACA;MACA;IACA,CA9CA;;IA+CA;IACAiD,WAhDA,yBAgDA;MACA;MACA;IACA,CAnDA;;IAoDA;IACAC,UArDA,wBAqDA;MACA;MACA;IACA,CAxDA;IAyDAC,aAzDA,yBAyDAC,GAzDA,EAyDA;MACA;QACA;MACA;IACA,CA7DA;IA8DA;IACAC,gBA/DA,4BA+DAD,GA/DA,EA+DA;MACA;QACA;QACA;QACA;MACA;IACA,CArEA;IAsEA;IACAE,eAvEA,2BAuEAF,GAvEA,EAuEA;MACA;QACA;MACA;IACA,CA3EA;IA4EA;IACAG,aA7EA,2BA6EA;MACA;QACA;UACA7C,WADA;UAEA8C,eAFA;UAGAC;QAHA;QAKA;MACA;;MACA;MACA;IACA;EAxFA;AApEA","names":["name","dicts","components","Treeselect","data","showFlag","loading","selectedMachineryId","selectedRows","single","multiple","showSearch","total","machineryList","title","machineryTypeOptions","workshopOptions","open","machineryTypeName","autoGenFlag","form","defaultProps","children","label","queryParams","pageNum","pageSize","machineryCode","machineryName","machineryBrand","machinerySpec","machineryTypeId","machineryTypeCode","workshopId","workshopCode","workshopName","status","watch","val","created","methods","getList","listMachinery","getWorkshops","listAllWorkshop","normalizer","node","id","getTreeselect","listMachinerytype","filterNode","value","handleNodeClick","handleQuery","resetQuery","handleCurrent","row","handleRowDbClick","handleRowChange","confirmSelect","type","message"],"sourceRoot":"src/components/machinerySelect","sources":["single.vue"],"sourcesContent":["<template>\n  <el-dialog title=\"设备选择\"\n    v-if=\"showFlag\"\n    :visible.sync=\"showFlag\"\n    :modal= false\n    width=\"80%\"\n    center\n  >\n    <el-row :gutter=\"20\">\n      <!--分类数据-->\n      <el-col :span=\"4\" :xs=\"24\">\n        <div class=\"head-container\">\n          <el-input\n            v-model=\"machineryTypeName\"\n            placeholder=\"请输入分类名称\"\n            clearable\n            size=\"small\"\n            prefix-icon=\"el-icon-search\"\n            style=\"margin-bottom: 20px\"\n          />\n        </div>\n        <div class=\"head-container\">\n          <el-tree\n            :data=\"machineryTypeOptions\"\n            :props=\"defaultProps\"\n            :expand-on-click-node=\"false\"\n            :filter-node-method=\"filterNode\"\n            ref=\"tree\"\n            default-expand-all\n            @node-click=\"handleNodeClick\"\n          />\n        </div>\n      </el-col>\n      <!--设备数据-->\n      <el-col :span=\"20\" :xs=\"24\">\n        <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\n          <el-form-item label=\"设备编码\" prop=\"machineryCode\">\n            <el-input\n              v-model=\"queryParams.machineryCode\"\n              placeholder=\"请输入设备编码\"\n              clearable\n              style=\"width: 240px\"\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item label=\"设备名称\" prop=\"machineryName\">\n            <el-input\n              v-model=\"queryParams.machineryName\"\n              placeholder=\"请输入设备名称\"\n              clearable\n              style=\"width: 240px\"\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n            <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n          </el-form-item>\n        </el-form>\n        <el-table v-loading=\"loading\" :data=\"machineryList\" @current-change=\"handleCurrent\" @row-dblclick=\"handleRowDbClick\">\n          <el-table-column width=\"50\" align=\"center\" >\n            <template v-slot=\"scope\">\n                <el-radio v-model=\"selectedMachineryId\" :label=\"scope.row.machineryId\" @change=\"handleRowChange(scope.row)\">{{\"\"}}</el-radio>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"设备编码\" width = \"120\" align=\"center\" key=\"machineryCode\" prop=\"machineryCode\">\n          </el-table-column>\n          <el-table-column label=\"设备名称\" min-width=\"120\" align=\"left\" key=\"machineryName\" prop=\"machineryName\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"品牌\" align=\"left\" key=\"machineryBrand\" prop=\"machineryBrand\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"规格型号\" align=\"left\" key=\"machinerySpec\" prop=\"machinerySpec\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"所属车间\" align=\"center\" key=\"machineryTypeName\" prop=\"machineryTypeName\"  :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"设备状态\" align=\"center\" key=\"status\" prop=\"status\" >\n            <template slot-scope=\"scope\">\n              <dict-tag :options=\"dict.type.mes_machinery_status\" :value=\"scope.row.status\"/>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"160\">\n            <template slot-scope=\"scope\">\n              <span>{{ parseTime(scope.row.createTime) }}</span>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <pagination\n          v-show=\"total>0\"\n          :total=\"total\"\n          :page.sync=\"queryParams.pageNum\"\n          :limit.sync=\"queryParams.pageSize\"\n          @pagination=\"getList\"\n        />\n      </el-col>\n    </el-row>\n    <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"confirmSelect\">确 定</el-button>\n        <el-button @click=\"showFlag=false\">取 消</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { listMachinery, getMachinery, delMachinery, addMachinery, updateMachinery } from \"@/api/mes/dv/machinery\";\nimport { listMachinerytype } from \"@/api/mes/dv/machinerytype\";\nimport { listAllWorkshop } from \"@/api/mes/md/workshop\";\n\nimport { getToken } from \"@/utils/auth\";\nimport Treeselect from \"@riophae/vue-treeselect\";\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\n\nexport default {\n  name: \"MachinerySelectSingle\",\n  dicts: ['sys_yes_no','mes_machinery_status'],\n  components: { Treeselect },\n  data() {\n    return {\n      showFlag: false,\n      // 遮罩层\n      loading: true,\n      // 选中数组\n      selectedMachineryId: undefined,\n      selectedRows: [],\n      // 非单个禁用\n      single: true,\n      // 非多个禁用\n      multiple: true,\n      // 显示搜索条件\n      showSearch: true,\n      // 总条数\n      total: 0,\n      // 物料产品表格数据\n      machineryList: [],\n      // 弹出层标题\n      title: \"\",\n      // 设备类型树选项\n      machineryTypeOptions: [],\n      //车间选项\n      workshopOptions:[],\n      // 是否显示弹出层\n      open: false,\n      // 设备类型名称\n      machineryTypeName: undefined,\n      //自动生成物料编码标识\n      autoGenFlag: false,\n      // 表单参数\n      form: {},\n      defaultProps: {\n        children: \"children\",\n        label: \"machineryTypeName\"\n      },\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        machineryCode: null,\n        machineryName: null,\n        machineryBrand: null,\n        machinerySpec: null,\n        machineryTypeId: null,\n        machineryTypeCode: null,\n        machineryTypeName: null,\n        workshopId: null,\n        workshopCode: null,\n        workshopName: null,\n        status: null\n      }\n    };\n  },\n  watch: {\n    // 根据设备分类名称筛选分类树\n    machineryTypeName(val) {\n      this.$refs.tree.filter(val);\n    }\n  },\n  created() {\n    this.getList();\n    this.getTreeselect();\n  },\n  methods: {\n    /** 查询物料编码列表 */\n    getList() {\n      this.loading = true;\n      listMachinery(this.queryParams).then(response => {\n          this.machineryList = response.rows;\n          this.total = response.total;\n          this.loading = false;\n        }\n      );\n    },\n    getWorkshops(){\n      listAllWorkshop().then( response => {\n        debugger;\n        this.workshopOptions =response.data;\n      });\n    },\n    /** 转换设备类型数据结构 */\n    normalizer(node) {\n      if (node.children && !node.children.length) {\n        delete node.children;\n      }\n      return {\n        id: node.machineryTypeId,\n        label: node.machineryTypeName,\n        children: node.children\n      };\n    },\n\t/** 查询设备类型下拉树结构 */\n    getTreeselect() {\n      listMachinerytype().then(response => {\n        debugger;\n        this.machineryTypeOptions = [];\n        const data = this.handleTree(response.data, \"machineryTypeId\", \"parentTypeId\")[0];\n        this.machineryTypeOptions.push(data);\n      });\n    },\n    // 筛选节点\n    filterNode(value, data) {\n      if (!value) return true;\n      return data.machineryTypeName.indexOf(value) !== -1;\n    },\n    // 节点单击事件\n    handleNodeClick(data) {\n      this.queryParams.machineryTypeId = data.machineryTypeId;\n      this.handleQuery();\n    },\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.resetForm(\"queryForm\");\n      this.handleQuery();\n    },\n    handleCurrent(row){\n        if(row){\n            this.selectedRows = row;\n        }\n    },\n    //双击选中\n    handleRowDbClick(row){\n      if(row){\n        this.selectedRows = row;\n        this.$emit('onSelected',this.selectedRows);\n        this.showFlag = false;\n      }\n    },\n    // 单选选中数据\n    handleRowChange(row) {\n      if(row){\n        this.selectedRows = row;\n      }\n    },\n    //确定选中\n    confirmSelect(){\n        if(this.selectedMachineryId == null || this.selectedMachineryId == 0){\n            this.$notify({\n                title:'提示',\n                type:'warning',\n                message: '请至少选择一条数据!'\n            });\n            return;\n        }\n        this.$emit('onSelected',this.selectedRows);\n        this.showFlag = false;\n    }\n  }\n};\n</script>"]}]}