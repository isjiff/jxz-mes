{"remainingRequest":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\cal\\plan\\team.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\cal\\plan\\team.vue","mtime":1665505269000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\babel.config.js","mtime":1665505269000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1662432871518},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1662432874590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9yZXNvdXJjZS9lY2xpcHNlLXdvcmtzcGFjZS9rdGctbWVzLW1hc3Rlci9rdGctbWVzLXVpLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiKTsKCnZhciBfcGxhbnRlYW0gPSByZXF1aXJlKCJAL2FwaS9tZXMvY2FsL3BsYW50ZWFtIik7Cgp2YXIgX3RlYW1tZW1iZXIgPSByZXF1aXJlKCJAL2FwaS9tZXMvY2FsL3RlYW1tZW1iZXIiKTsKCnZhciBfbXVsdGkgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvY29tcG9uZW50cy9jYWxUZWFtU2VsZWN0L211bHRpLnZ1ZSIpKTsKCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfZGVmYXVsdCA9IHsKICBuYW1lOiAiUGxhblRlYW0iLAogIGNvbXBvbmVudHM6IHsKICAgIFRlYW1TZWxlY3Q6IF9tdWx0aS5kZWZhdWx0CiAgfSwKICBwcm9wczogewogICAgcGxhbklkOiBudWxsLAogICAgb3B0VHlwZTogbnVsbCwKICAgIGNhbGVuZGFyVHlwZTogbnVsbAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOmBrue9qeWxggogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAvL+ePree7hOihqOagvOaVsOaNrgogICAgICB0ZWFtTGlzdDogW10sCiAgICAgIC8vIOePree7hOaIkOWRmOihqOagvOaVsOaNrgogICAgICB0ZWFtbWVtYmVyTGlzdDogW10sCiAgICAgIGZvcm06IHt9LAogICAgICBxdWVyeVBhcmFtczogewogICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIHBsYW5JZDogdGhpcy5wbGFuSWQsCiAgICAgICAgdGVhbUlkOiBudWxsLAogICAgICAgIHRlYW1Db2RlOiBudWxsLAogICAgICAgIHRlYW1OYW1lOiBudWxsLAogICAgICAgIGNhbGVuZGFyVHlwZTogdGhpcy5jYWxlbmRhclR5cGUKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFRlYW1MaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRUZWFtTGlzdDogZnVuY3Rpb24gZ2V0VGVhbUxpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAoMCwgX3BsYW50ZWFtLmxpc3RQbGFudGVhbSkodGhpcy5xdWVyeVBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy50ZWFtTGlzdCA9IHJlc3BvbnNlLnJvd3M7CiAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRNZW1iZXJMaXN0OiBmdW5jdGlvbiBnZXRNZW1iZXJMaXN0KGlkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHBhcmFtID0gewogICAgICAgIHRlYW1JZDogaWQKICAgICAgfTsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgKDAsIF90ZWFtbWVtYmVyLmxpc3RUZWFtbWVtYmVyKShwYXJhbSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIudGVhbW1lbWJlckxpc3QgPSByZXNwb25zZS5yb3dzOwogICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIG9uUm93Q2xpY2s6IGZ1bmN0aW9uIG9uUm93Q2xpY2socm93KSB7CiAgICAgIHRoaXMuZ2V0TWVtYmVyTGlzdChyb3cudGVhbUlkKTsKICAgIH0sCgogICAgLyoqIOaWsOWinuaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlQWRkOiBmdW5jdGlvbiBoYW5kbGVBZGQoKSB7CiAgICAgIHRoaXMuJHJlZnMudGVhbVNlbGVjdC5zaG93RmxhZyA9IHRydWU7CiAgICB9LAogICAgb25UZWFtU2VsZWN0ZWQ6IGZ1bmN0aW9uIG9uVGVhbVNlbGVjdGVkKHJvd3MpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByb3dzLmZvckVhY2goZnVuY3Rpb24gKHRlYW0pIHsKICAgICAgICBfdGhpczMuZm9ybS50ZWFtSWQgPSB0ZWFtLnRlYW1JZDsKICAgICAgICBfdGhpczMuZm9ybS50ZWFtQ29kZSA9IHRlYW0udGVhbUNvZGU7CiAgICAgICAgX3RoaXMzLmZvcm0udGVhbU5hbWUgPSB0ZWFtLnRlYW1OYW1lOwogICAgICAgIF90aGlzMy5mb3JtLnBsYW5JZCA9IF90aGlzMy5wbGFuSWQ7CiAgICAgICAgX3RoaXMzLmZvcm0uY2FsZW5kYXJUeXBlID0gX3RoaXMzLmNhbGVuZGFyVHlwZTsKICAgICAgICAoMCwgX3BsYW50ZWFtLmFkZFBsYW50ZWFtKShfdGhpczMuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzMy5nZXRUZWFtTGlzdCgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqIOWIoOmZpOaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGUocm93KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIHJlY29yZElkcyA9IHJvdy5yZWNvcmRJZDsKICAgICAgdGhpcy4kbW9kYWwuY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk54+t57uE77yfJykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICgwLCBfcGxhbnRlYW0uZGVsUGxhbnRlYW0pKHJlY29yZElkcyk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC5nZXRUZWFtTGlzdCgpOwoKICAgICAgICBfdGhpczQuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9CiAgfQp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"mappings":";;;;;;;;;;;;;AA6CA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAA,gBADA;EAEAC;IAAAC;EAAA,CAFA;EAGAC;IACAC,YADA;IAEAC,aAFA;IAGAC;EAHA,CAHA;EAQAC,IARA,kBAQA;IACA;MACA;MACAC,aAFA;MAGA;MACAC,YAJA;MAKA;MACAC,kBANA;MAOAC,QAPA;MAQAC;QACAC,UADA;QAEAC,YAFA;QAGAV,mBAHA;QAIAW,YAJA;QAKAC,cALA;QAMAC,cANA;QAOAX;MAPA;IARA;EAkBA,CA3BA;EA4BAY,OA5BA,qBA4BA;IACA;EACA,CA9BA;EA+BAC;IACAC,WADA,yBACA;MAAA;;MACA;MACA;QACA;QACA;MACA,CAHA;IAIA,CAPA;IAQAC,aARA,yBAQAC,EARA,EAQA;MAAA;;MACA;QACAP;MADA;MAGA;MACA;QACA;QACA;MACA,CAHA;IAIA,CAjBA;IAkBAQ,UAlBA,sBAkBAC,GAlBA,EAkBA;MACA;IACA,CApBA;;IAqBA;IACAC,SAtBA,uBAsBA;MACA;IACA,CAxBA;IAyBAC,cAzBA,0BAyBAC,IAzBA,EAyBA;MAAA;;MACAA;QACA;QACA;QACA;QACA;QACA;QACA;UACA;QACA,CAFA;MAGA,CATA;IAUA,CApCA;;IAqCA;IACAC,YAtCA,wBAsCAJ,GAtCA,EAsCA;MAAA;;MACA;MACA;QACA;MACA,CAFA,EAEAK,IAFA,CAEA;QACA;;QACA;MACA,CALA,EAKAC,KALA,CAKA,cALA;IAMA;EA9CA;AA/BA,C","names":["name","components","TeamSelect","props","planId","optType","calendarType","data","loading","teamList","teammemberList","form","queryParams","pageNum","pageSize","teamId","teamCode","teamName","created","methods","getTeamList","getMemberList","id","onRowClick","row","handleAdd","onTeamSelected","rows","handleDelete","then","catch"],"sourceRoot":"src/views/mes/cal/plan","sources":["team.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-row>\n        <el-col :span=\"12\">\n            <el-card class=\"box-card\">\n                <div slot=\"header\" class=\"clearfix\">\n                    <span>班组</span>\n                    <el-button style=\"float: right; padding: 3px 0\" v-if=\"optType !='view'\" @click=\"handleAdd\" type=\"text\">添加</el-button>\n                </div>\n                <el-table v-loading=\"loading\" :data=\"teamList\" @row-click=\"onRowClick\">\n                    <el-table-column label=\"班组编号\" align=\"center\" prop=\"teamCode\" >\n                    </el-table-column>\n                    <el-table-column label=\"班组名称\" align=\"center\" prop=\"teamName\" />\n                    <el-table-column label=\"操作\" align=\"center\" v-if=\"optType !='view'\" class-name=\"small-padding fixed-width\">\n                        <template slot-scope=\"scope\">\n                        <el-button\n                            size=\"mini\"\n                            type=\"text\"\n                            icon=\"el-icon-delete\"\n                            @click=\"handleDelete(scope.row)\"\n                            v-hasPermi=\"['mes:cal:plan:edit']\"\n                        >删除</el-button>\n                        </template>\n                    </el-table-column>                    \n                </el-table>           \n                <TeamSelect ref=\"teamSelect\" @onSelected=\"onTeamSelected\"></TeamSelect>    \n            </el-card>\n        </el-col>\n        <el-col :span=\"12\">\n            <el-card class=\"box-card\">\n                <div slot=\"header\" class=\"clearfix\">\n                    <span>成员</span>                    \n                </div>\n                <el-table v-loading=\"loading\" :data=\"teammemberList\">\n                    <el-table-column label=\"用户名\" align=\"center\" prop=\"userName\" />\n                    <el-table-column label=\"用户昵称\" align=\"center\" prop=\"nickName\" />\n                    <el-table-column label=\"电话\" align=\"center\" prop=\"tel\" />                    \n                </el-table>\n            </el-card>\n        </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport { listPlanteam,  delPlanteam, addPlanteam } from \"@/api/mes/cal/planteam\";\nimport { listTeammember } from \"@/api/mes/cal/teammember\";\nimport TeamSelect from \"@/components/calTeamSelect/multi.vue\"\nexport default {\n    name:\"PlanTeam\",\n    components:{TeamSelect},\n    props:{\n        planId:null,\n        optType:null,\n        calendarType:null\n    },\n    data(){\n        return {\n            // 遮罩层\n            loading: true,\n            //班组表格数据\n            teamList:[],\n            // 班组成员表格数据\n            teammemberList: [],\n            form:{},\n            queryParams: {\n                pageNum: 1,\n                pageSize: 10,\n                planId: this.planId,\n                teamId: null,\n                teamCode: null,\n                teamName: null,\n                calendarType:this.calendarType\n            },\n        }\n    },\n    created() {\n        this.getTeamList();     \n    },\n    methods:{\n        getTeamList(){\n            this.loading = true;\n            listPlanteam(this.queryParams).then(response => {\n                this.teamList = response.rows;                \n                this.loading = false;\n            });\n        },\n        getMemberList(id){\n            var param = {\n                teamId:id\n            }\n            this.loading = true;\n            listTeammember(param).then(response => {\n                this.teammemberList = response.rows;\n                this.loading = false;\n            });\n        },\n        onRowClick(row){\n            this.getMemberList(row.teamId);\n        },\n        /** 新增按钮操作 */\n        handleAdd() {\n            this.$refs.teamSelect.showFlag = true;\n        },\n        onTeamSelected(rows){\n            rows.forEach(team => {\n                this.form.teamId = team.teamId;\n                this.form.teamCode = team.teamCode;\n                this.form.teamName = team.teamName;\n                this.form.planId = this.planId;\n                this.form.calendarType = this.calendarType;\n                addPlanteam(this.form).then(response => {\n                    this.getTeamList();                    \n                });\n            });\n        },\n        /** 删除按钮操作 */\n        handleDelete(row) {\n            const recordIds = row.recordId\n            this.$modal.confirm('是否确认删除班组？').then(function() {\n                return delPlanteam(recordIds);\n            }).then(() => {\n                this.getTeamList();\n                this.$modal.msgSuccess(\"删除成功\");\n            }).catch(() => {});\n        },\n    }\n}\n</script>\n\n<style>\n\n</style>"]}]}