{"remainingRequest":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\cal\\plan\\team.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\cal\\plan\\team.vue","mtime":1662109326000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\babel.config.js","mtime":1662109326000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1662432871518},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1662432874590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBsaXN0UGxhbnRlYW0sIGRlbFBsYW50ZWFtLCBhZGRQbGFudGVhbSB9IGZyb20gIkAvYXBpL21lcy9jYWwvcGxhbnRlYW0iOwppbXBvcnQgeyBsaXN0VGVhbW1lbWJlciB9IGZyb20gIkAvYXBpL21lcy9jYWwvdGVhbW1lbWJlciI7CmltcG9ydCBUZWFtU2VsZWN0IGZyb20gIkAvY29tcG9uZW50cy9jYWxUZWFtU2VsZWN0L211bHRpLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUGxhblRlYW0iLAogIGNvbXBvbmVudHM6IHsKICAgIFRlYW1TZWxlY3Q6IFRlYW1TZWxlY3QKICB9LAogIHByb3BzOiB7CiAgICBwbGFuSWQ6IG51bGwsCiAgICBvcHRUeXBlOiBudWxsLAogICAgY2FsZW5kYXJUeXBlOiBudWxsCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g6YGu572p5bGCCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIC8v54+t57uE6KGo5qC85pWw5o2uCiAgICAgIHRlYW1MaXN0OiBbXSwKICAgICAgLy8g54+t57uE5oiQ5ZGY6KGo5qC85pWw5o2uCiAgICAgIHRlYW1tZW1iZXJMaXN0OiBbXSwKICAgICAgZm9ybToge30sCiAgICAgIHF1ZXJ5UGFyYW1zOiB7CiAgICAgICAgcGFnZU51bTogMSwKICAgICAgICBwYWdlU2l6ZTogMTAsCiAgICAgICAgcGxhbklkOiB0aGlzLnBsYW5JZCwKICAgICAgICB0ZWFtSWQ6IG51bGwsCiAgICAgICAgdGVhbUNvZGU6IG51bGwsCiAgICAgICAgdGVhbU5hbWU6IG51bGwsCiAgICAgICAgY2FsZW5kYXJUeXBlOiB0aGlzLmNhbGVuZGFyVHlwZQogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0VGVhbUxpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFRlYW1MaXN0OiBmdW5jdGlvbiBnZXRUZWFtTGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGxpc3RQbGFudGVhbSh0aGlzLnF1ZXJ5UGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLnRlYW1MaXN0ID0gcmVzcG9uc2Uucm93czsKICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGdldE1lbWJlckxpc3Q6IGZ1bmN0aW9uIGdldE1lbWJlckxpc3QoaWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgcGFyYW0gPSB7CiAgICAgICAgdGVhbUlkOiBpZAogICAgICB9OwogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBsaXN0VGVhbW1lbWJlcihwYXJhbSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIudGVhbW1lbWJlckxpc3QgPSByZXNwb25zZS5yb3dzOwogICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIG9uUm93Q2xpY2s6IGZ1bmN0aW9uIG9uUm93Q2xpY2socm93KSB7CiAgICAgIHRoaXMuZ2V0TWVtYmVyTGlzdChyb3cudGVhbUlkKTsKICAgIH0sCgogICAgLyoqIOaWsOWinuaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlQWRkOiBmdW5jdGlvbiBoYW5kbGVBZGQoKSB7CiAgICAgIHRoaXMuJHJlZnMudGVhbVNlbGVjdC5zaG93RmxhZyA9IHRydWU7CiAgICB9LAogICAgb25UZWFtU2VsZWN0ZWQ6IGZ1bmN0aW9uIG9uVGVhbVNlbGVjdGVkKHJvd3MpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByb3dzLmZvckVhY2goZnVuY3Rpb24gKHRlYW0pIHsKICAgICAgICBfdGhpczMuZm9ybS50ZWFtSWQgPSB0ZWFtLnRlYW1JZDsKICAgICAgICBfdGhpczMuZm9ybS50ZWFtQ29kZSA9IHRlYW0udGVhbUNvZGU7CiAgICAgICAgX3RoaXMzLmZvcm0udGVhbU5hbWUgPSB0ZWFtLnRlYW1OYW1lOwogICAgICAgIF90aGlzMy5mb3JtLnBsYW5JZCA9IF90aGlzMy5wbGFuSWQ7CiAgICAgICAgX3RoaXMzLmZvcm0uY2FsZW5kYXJUeXBlID0gX3RoaXMzLmNhbGVuZGFyVHlwZTsKICAgICAgICBhZGRQbGFudGVhbShfdGhpczMuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzMy5nZXRUZWFtTGlzdCgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqIOWIoOmZpOaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGUocm93KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIHJlY29yZElkcyA9IHJvdy5yZWNvcmRJZDsKICAgICAgdGhpcy4kbW9kYWwuY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk54+t57uE77yfJykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGRlbFBsYW50ZWFtKHJlY29yZElkcyk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC5nZXRUZWFtTGlzdCgpOwoKICAgICAgICBfdGhpczQuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;EACAA,gBADA;EAEAC;IAAAC;EAAA,CAFA;EAGAC;IACAC,YADA;IAEAC,aAFA;IAGAC;EAHA,CAHA;EAQAC,IARA,kBAQA;IACA;MACA;MACAC,aAFA;MAGA;MACAC,YAJA;MAKA;MACAC,kBANA;MAOAC,QAPA;MAQAC;QACAC,UADA;QAEAC,YAFA;QAGAV,mBAHA;QAIAW,YAJA;QAKAC,cALA;QAMAC,cANA;QAOAX;MAPA;IARA;EAkBA,CA3BA;EA4BAY,OA5BA,qBA4BA;IACA;EACA,CA9BA;EA+BAC;IACAC,WADA,yBACA;MAAA;;MACA;MACAC;QACA;QACA;MACA,CAHA;IAIA,CAPA;IAQAC,aARA,yBAQAC,EARA,EAQA;MAAA;;MACA;QACAR;MADA;MAGA;MACAS;QACA;QACA;MACA,CAHA;IAIA,CAjBA;IAkBAC,UAlBA,sBAkBAC,GAlBA,EAkBA;MACA;IACA,CApBA;;IAqBA;IACAC,SAtBA,uBAsBA;MACA;IACA,CAxBA;IAyBAC,cAzBA,0BAyBAC,IAzBA,EAyBA;MAAA;;MACAA;QACA;QACA;QACA;QACA;QACA;QACAC;UACA;QACA,CAFA;MAGA,CATA;IAUA,CApCA;;IAqCA;IACAC,YAtCA,wBAsCAL,GAtCA,EAsCA;MAAA;;MACA;MACA;QACA;MACA,CAFA,EAEAM,IAFA,CAEA;QACA;;QACA;MACA,CALA,EAKAC,KALA,CAKA,cALA;IAMA;EA9CA;AA/BA","names":["name","components","TeamSelect","props","planId","optType","calendarType","data","loading","teamList","teammemberList","form","queryParams","pageNum","pageSize","teamId","teamCode","teamName","created","methods","getTeamList","listPlanteam","getMemberList","id","listTeammember","onRowClick","row","handleAdd","onTeamSelected","rows","addPlanteam","handleDelete","then","catch"],"sourceRoot":"src/views/mes/cal/plan","sources":["team.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-row>\n        <el-col :span=\"12\">\n            <el-card class=\"box-card\">\n                <div slot=\"header\" class=\"clearfix\">\n                    <span>班组</span>\n                    <el-button style=\"float: right; padding: 3px 0\" v-if=\"optType !='view'\" @click=\"handleAdd\" type=\"text\">添加</el-button>\n                </div>\n                <el-table v-loading=\"loading\" :data=\"teamList\" @row-click=\"onRowClick\">\n                    <el-table-column label=\"班组编号\" align=\"center\" prop=\"teamCode\" >\n                    </el-table-column>\n                    <el-table-column label=\"班组名称\" align=\"center\" prop=\"teamName\" />\n                    <el-table-column label=\"操作\" align=\"center\" v-if=\"optType !='view'\" class-name=\"small-padding fixed-width\">\n                        <template slot-scope=\"scope\">\n                        <el-button\n                            size=\"mini\"\n                            type=\"text\"\n                            icon=\"el-icon-delete\"\n                            @click=\"handleDelete(scope.row)\"\n                            v-hasPermi=\"['mes:cal:plan:edit']\"\n                        >删除</el-button>\n                        </template>\n                    </el-table-column>                    \n                </el-table>           \n                <TeamSelect ref=\"teamSelect\" @onSelected=\"onTeamSelected\"></TeamSelect>    \n            </el-card>\n        </el-col>\n        <el-col :span=\"12\">\n            <el-card class=\"box-card\">\n                <div slot=\"header\" class=\"clearfix\">\n                    <span>成员</span>                    \n                </div>\n                <el-table v-loading=\"loading\" :data=\"teammemberList\">\n                    <el-table-column label=\"用户名\" align=\"center\" prop=\"userName\" />\n                    <el-table-column label=\"用户昵称\" align=\"center\" prop=\"nickName\" />\n                    <el-table-column label=\"电话\" align=\"center\" prop=\"tel\" />                    \n                </el-table>\n            </el-card>\n        </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport { listPlanteam,  delPlanteam, addPlanteam } from \"@/api/mes/cal/planteam\";\nimport { listTeammember } from \"@/api/mes/cal/teammember\";\nimport TeamSelect from \"@/components/calTeamSelect/multi.vue\"\nexport default {\n    name:\"PlanTeam\",\n    components:{TeamSelect},\n    props:{\n        planId:null,\n        optType:null,\n        calendarType:null\n    },\n    data(){\n        return {\n            // 遮罩层\n            loading: true,\n            //班组表格数据\n            teamList:[],\n            // 班组成员表格数据\n            teammemberList: [],\n            form:{},\n            queryParams: {\n                pageNum: 1,\n                pageSize: 10,\n                planId: this.planId,\n                teamId: null,\n                teamCode: null,\n                teamName: null,\n                calendarType:this.calendarType\n            },\n        }\n    },\n    created() {\n        this.getTeamList();     \n    },\n    methods:{\n        getTeamList(){\n            this.loading = true;\n            listPlanteam(this.queryParams).then(response => {\n                this.teamList = response.rows;                \n                this.loading = false;\n            });\n        },\n        getMemberList(id){\n            var param = {\n                teamId:id\n            }\n            this.loading = true;\n            listTeammember(param).then(response => {\n                this.teammemberList = response.rows;\n                this.loading = false;\n            });\n        },\n        onRowClick(row){\n            this.getMemberList(row.teamId);\n        },\n        /** 新增按钮操作 */\n        handleAdd() {\n            this.$refs.teamSelect.showFlag = true;\n        },\n        onTeamSelected(rows){\n            rows.forEach(team => {\n                this.form.teamId = team.teamId;\n                this.form.teamCode = team.teamCode;\n                this.form.teamName = team.teamName;\n                this.form.planId = this.planId;\n                this.form.calendarType = this.calendarType;\n                addPlanteam(this.form).then(response => {\n                    this.getTeamList();                    \n                });\n            });\n        },\n        /** 删除按钮操作 */\n        handleDelete(row) {\n            const recordIds = row.recordId\n            this.$modal.confirm('是否确认删除班组？').then(function() {\n                return delPlanteam(recordIds);\n            }).then(() => {\n                this.getTeamList();\n                this.$modal.msgSuccess(\"删除成功\");\n            }).catch(() => {});\n        },\n    }\n}\n</script>\n\n<style>\n\n</style>"]}]}