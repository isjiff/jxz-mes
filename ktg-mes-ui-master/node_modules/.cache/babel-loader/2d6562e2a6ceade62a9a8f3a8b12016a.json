{"remainingRequest":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\components\\machinerySelect\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\components\\machinerySelect\\index.vue","mtime":1665505269000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\babel.config.js","mtime":1665505269000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1662432871518},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1662432874590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9yZXNvdXJjZS9lY2xpcHNlLXdvcmtzcGFjZS9rdGctbWVzLW1hc3Rlci9rdGctbWVzLXVpLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyIpOwoKdmFyIF9tYWNoaW5lcnkgPSByZXF1aXJlKCJAL2FwaS9tZXMvZHYvbWFjaGluZXJ5Iik7Cgp2YXIgX21hY2hpbmVyeXR5cGUgPSByZXF1aXJlKCJAL2FwaS9tZXMvZHYvbWFjaGluZXJ5dHlwZSIpOwoKdmFyIF93b3Jrc2hvcCA9IHJlcXVpcmUoIkAvYXBpL21lcy9tZC93b3Jrc2hvcCIpOwoKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7Cgp2YXIgX3Z1ZVRyZWVzZWxlY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0IikpOwoKcmVxdWlyZSgiQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QvZGlzdC92dWUtdHJlZXNlbGVjdC5jc3MiKTsKCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfZGVmYXVsdCA9IHsKICBuYW1lOiAiTWFjaGluZXJ5U2VsZWN0IiwKICBkaWN0czogWydzeXNfeWVzX25vJywgJ21lc19tYWNoaW5lcnlfc3RhdHVzJ10sCiAgY29tcG9uZW50czogewogICAgVHJlZXNlbGVjdDogX3Z1ZVRyZWVzZWxlY3QuZGVmYXVsdAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dGbGFnOiBmYWxzZSwKICAgICAgLy8g6YGu572p5bGCCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIC8vIOmAieS4reaVsOe7hAogICAgICBpZHM6IFtdLAogICAgICBzZWxlY3RlZFJvd3M6IFtdLAogICAgICAvLyDpnZ7ljZXkuKrnpoHnlKgKICAgICAgc2luZ2xlOiB0cnVlLAogICAgICAvLyDpnZ7lpJrkuKrnpoHnlKgKICAgICAgbXVsdGlwbGU6IHRydWUsCiAgICAgIC8vIOaYvuekuuaQnOe0ouadoeS7tgogICAgICBzaG93U2VhcmNoOiB0cnVlLAogICAgICAvLyDmgLvmnaHmlbAKICAgICAgdG90YWw6IDAsCiAgICAgIC8vIOeJqeaWmeS6p+WTgeihqOagvOaVsOaNrgogICAgICBtYWNoaW5lcnlMaXN0OiBbXSwKICAgICAgLy8g5by55Ye65bGC5qCH6aKYCiAgICAgIHRpdGxlOiAiIiwKICAgICAgLy8g6K6+5aSH57G75Z6L5qCR6YCJ6aG5CiAgICAgIG1hY2hpbmVyeVR5cGVPcHRpb25zOiBbXSwKICAgICAgLy/ovabpl7TpgInpobkKICAgICAgd29ya3Nob3BPcHRpb25zOiBbXSwKICAgICAgLy8g5piv5ZCm5pi+56S65by55Ye65bGCCiAgICAgIG9wZW46IGZhbHNlLAogICAgICAvLyDorr7lpIfnsbvlnovlkI3np7AKICAgICAgbWFjaGluZXJ5VHlwZU5hbWU6IHVuZGVmaW5lZCwKICAgICAgLy/oh6rliqjnlJ/miJDnianmlpnnvJbnoIHmoIfor4YKICAgICAgYXV0b0dlbkZsYWc6IGZhbHNlLAogICAgICAvLyDooajljZXlj4LmlbAKICAgICAgZm9ybToge30sCiAgICAgIGRlZmF1bHRQcm9wczogewogICAgICAgIGNoaWxkcmVuOiAiY2hpbGRyZW4iLAogICAgICAgIGxhYmVsOiAibWFjaGluZXJ5VHlwZU5hbWUiCiAgICAgIH0sCiAgICAgIC8vIOafpeivouWPguaVsAogICAgICBxdWVyeVBhcmFtczogewogICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIG1hY2hpbmVyeUNvZGU6IG51bGwsCiAgICAgICAgbWFjaGluZXJ5TmFtZTogbnVsbCwKICAgICAgICBtYWNoaW5lcnlCcmFuZDogbnVsbCwKICAgICAgICBtYWNoaW5lcnlTcGVjOiBudWxsLAogICAgICAgIG1hY2hpbmVyeVR5cGVJZDogbnVsbCwKICAgICAgICBtYWNoaW5lcnlUeXBlQ29kZTogbnVsbCwKICAgICAgICBtYWNoaW5lcnlUeXBlTmFtZTogbnVsbCwKICAgICAgICB3b3Jrc2hvcElkOiBudWxsLAogICAgICAgIHdvcmtzaG9wQ29kZTogbnVsbCwKICAgICAgICB3b3Jrc2hvcE5hbWU6IG51bGwsCiAgICAgICAgc3RhdHVzOiBudWxsCiAgICAgIH0KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgLy8g5qC55o2u6K6+5aSH5YiG57G75ZCN56ew562b6YCJ5YiG57G75qCRCiAgICBtYWNoaW5lcnlUeXBlTmFtZTogZnVuY3Rpb24gbWFjaGluZXJ5VHlwZU5hbWUodmFsKSB7CiAgICAgIHRoaXMuJHJlZnMudHJlZS5maWx0ZXIodmFsKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICAgIHRoaXMuZ2V0VHJlZXNlbGVjdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLyoqIOafpeivoueJqeaWmee8lueggeWIl+ihqCAqLwogICAgZ2V0TGlzdDogZnVuY3Rpb24gZ2V0TGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICgwLCBfbWFjaGluZXJ5Lmxpc3RNYWNoaW5lcnkpKHRoaXMucXVlcnlQYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMubWFjaGluZXJ5TGlzdCA9IHJlc3BvbnNlLnJvd3M7CiAgICAgICAgX3RoaXMudG90YWwgPSByZXNwb25zZS50b3RhbDsKICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGdldFdvcmtzaG9wczogZnVuY3Rpb24gZ2V0V29ya3Nob3BzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgICgwLCBfd29ya3Nob3AubGlzdEFsbFdvcmtzaG9wKSgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgZGVidWdnZXI7CiAgICAgICAgX3RoaXMyLndvcmtzaG9wT3B0aW9ucyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKiog6L2s5o2i6K6+5aSH57G75Z6L5pWw5o2u57uT5p6EICovCiAgICBub3JtYWxpemVyOiBmdW5jdGlvbiBub3JtYWxpemVyKG5vZGUpIHsKICAgICAgaWYgKG5vZGUuY2hpbGRyZW4gJiYgIW5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgZGVsZXRlIG5vZGUuY2hpbGRyZW47CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IG5vZGUubWFjaGluZXJ5VHlwZUlkLAogICAgICAgIGxhYmVsOiBub2RlLm1hY2hpbmVyeVR5cGVOYW1lLAogICAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuCiAgICAgIH07CiAgICB9LAoKICAgIC8qKiDmn6Xor6Lorr7lpIfnsbvlnovkuIvmi4nmoJHnu5PmnoQgKi8KICAgIGdldFRyZWVzZWxlY3Q6IGZ1bmN0aW9uIGdldFRyZWVzZWxlY3QoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgKDAsIF9tYWNoaW5lcnl0eXBlLmxpc3RNYWNoaW5lcnl0eXBlKSgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgZGVidWdnZXI7CiAgICAgICAgX3RoaXMzLm1hY2hpbmVyeVR5cGVPcHRpb25zID0gW107CgogICAgICAgIHZhciBkYXRhID0gX3RoaXMzLmhhbmRsZVRyZWUocmVzcG9uc2UuZGF0YSwgIm1hY2hpbmVyeVR5cGVJZCIsICJwYXJlbnRUeXBlSWQiKVswXTsKCiAgICAgICAgX3RoaXMzLm1hY2hpbmVyeVR5cGVPcHRpb25zLnB1c2goZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOetm+mAieiKgueCuQogICAgZmlsdGVyTm9kZTogZnVuY3Rpb24gZmlsdGVyTm9kZSh2YWx1ZSwgZGF0YSkgewogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gdHJ1ZTsKICAgICAgcmV0dXJuIGRhdGEubWFjaGluZXJ5VHlwZU5hbWUuaW5kZXhPZih2YWx1ZSkgIT09IC0xOwogICAgfSwKICAgIC8vIOiKgueCueWNleWHu+S6i+S7tgogICAgaGFuZGxlTm9kZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVOb2RlQ2xpY2soZGF0YSkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLm1hY2hpbmVyeVR5cGVJZCA9IGRhdGEubWFjaGluZXJ5VHlwZUlkOwogICAgICB0aGlzLmhhbmRsZVF1ZXJ5KCk7CiAgICB9LAoKICAgIC8qKiDmkJzntKLmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZVF1ZXJ5OiBmdW5jdGlvbiBoYW5kbGVRdWVyeSgpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlTnVtID0gMTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAoKICAgIC8qKiDph43nva7mjInpkq7mk43kvZwgKi8KICAgIHJlc2V0UXVlcnk6IGZ1bmN0aW9uIHJlc2V0UXVlcnkoKSB7CiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsKICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOwogICAgfSwKICAgIC8vIOWkmumAieahhumAieS4reaVsOaNrgogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3Rpb25DaGFuZ2Uoc2VsZWN0aW9uKSB7CiAgICAgIHRoaXMuaWRzID0gc2VsZWN0aW9uLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLm1hY2hpbmVyeUlkOwogICAgICB9KTsKICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSBzZWxlY3Rpb247CiAgICAgIHRoaXMuc2luZ2xlID0gc2VsZWN0aW9uLmxlbmd0aCAhPSAxOwogICAgICB0aGlzLm11bHRpcGxlID0gIXNlbGVjdGlvbi5sZW5ndGg7CiAgICB9LAogICAgLy/noa7lrprpgInkuK0KICAgIGNvbmZpcm1TZWxlY3Q6IGZ1bmN0aW9uIGNvbmZpcm1TZWxlY3QoKSB7CiAgICAgIGlmICh0aGlzLmlkcyA9PSBbXSB8fCB0aGlzLmlkcy5sZW5ndGggPT0gMCkgewogICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICB0aXRsZTogJ+aPkOekuicsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36Iez5bCR6YCJ5oup5LiA5p2h5pWw5o2uIScKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoJ29uU2VsZWN0ZWQnLCB0aGlzLnNlbGVjdGVkUm93cyk7CiAgICAgIHRoaXMuc2hvd0ZsYWcgPSBmYWxzZTsKICAgIH0KICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;AAgGA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAA,uBADA;EAEAC,6CAFA;EAGAC;IAAAC;EAAA,CAHA;EAIAC,IAJA,kBAIA;IACA;MACAC,eADA;MAEA;MACAC,aAHA;MAIA;MACAC,OALA;MAMAC,gBANA;MAOA;MACAC,YARA;MASA;MACAC,cAVA;MAWA;MACAC,gBAZA;MAaA;MACAC,QAdA;MAeA;MACAC,iBAhBA;MAiBA;MACAC,SAlBA;MAmBA;MACAC,wBApBA;MAqBA;MACAC,mBAtBA;MAuBA;MACAC,WAxBA;MAyBA;MACAC,4BA1BA;MA2BA;MACAC,kBA5BA;MA6BA;MACAC,QA9BA;MA+BAC;QACAC,oBADA;QAEAC;MAFA,CA/BA;MAmCA;MACAC;QACAC,UADA;QAEAC,YAFA;QAGAC,mBAHA;QAIAC,mBAJA;QAKAC,oBALA;QAMAC,mBANA;QAOAC,qBAPA;QAQAC,uBARA;QASAd,uBATA;QAUAe,gBAVA;QAWAC,kBAXA;QAYAC,kBAZA;QAaAC;MAbA;IApCA;EAoDA,CAzDA;EA0DAC;IACA;IACAnB,iBAFA,6BAEAoB,GAFA,EAEA;MACA;IACA;EAJA,CA1DA;EAgEAC,OAhEA,qBAgEA;IACA;IACA;EACA,CAnEA;EAoEAC;IACA;IACAC,OAFA,qBAEA;MAAA;;MACA;MACA;QACA;QACA;QACA;MACA,CAJA;IAMA,CAVA;IAWAC,YAXA,0BAWA;MAAA;;MACA;QACA;QACA;MACA,CAHA;IAIA,CAhBA;;IAiBA;IACAC,UAlBA,sBAkBAC,IAlBA,EAkBA;MACA;QACA;MACA;;MACA;QACAC,wBADA;QAEAtB,6BAFA;QAGAD;MAHA;IAKA,CA3BA;;IA4BA;IACAwB,aA7BA,2BA6BA;MAAA;;MACA;QACA;QACA;;QACA;;QACA;MACA,CALA;IAMA,CApCA;IAqCA;IACAC,UAtCA,sBAsCAC,KAtCA,EAsCA5C,IAtCA,EAsCA;MACA;MACA;IACA,CAzCA;IA0CA;IACA6C,eA3CA,2BA2CA7C,IA3CA,EA2CA;MACA;MACA;IACA,CA9CA;;IA+CA;IACA8C,WAhDA,yBAgDA;MACA;MACA;IACA,CAnDA;;IAoDA;IACAC,UArDA,wBAqDA;MACA;MACA;IACA,CAxDA;IAyDA;IACAC,qBA1DA,iCA0DAC,SA1DA,EA0DA;MACA;QAAA;MAAA;MACA;MACA;MACA;IACA,CA/DA;IAgEA;IACAC,aAjEA,2BAiEA;MACA;QACA;UACAxC,WADA;UAEAyC,eAFA;UAGAC;QAHA;QAKA;MACA;;MACA;MACA;IACA;EA5EA;AApEA,C","names":["name","dicts","components","Treeselect","data","showFlag","loading","ids","selectedRows","single","multiple","showSearch","total","machineryList","title","machineryTypeOptions","workshopOptions","open","machineryTypeName","autoGenFlag","form","defaultProps","children","label","queryParams","pageNum","pageSize","machineryCode","machineryName","machineryBrand","machinerySpec","machineryTypeId","machineryTypeCode","workshopId","workshopCode","workshopName","status","watch","val","created","methods","getList","getWorkshops","normalizer","node","id","getTreeselect","filterNode","value","handleNodeClick","handleQuery","resetQuery","handleSelectionChange","selection","confirmSelect","type","message"],"sourceRoot":"src/components/machinerySelect","sources":["index.vue"],"sourcesContent":["<template>\n  <el-dialog title=\"设备选择\"\n    v-if=\"showFlag\"\n    :visible.sync=\"showFlag\"\n    :modal= false\n    width=\"80%\"\n    center\n  >\n    <el-row :gutter=\"20\">\n      <!--分类数据-->\n      <el-col :span=\"4\" :xs=\"24\">\n        <div class=\"head-container\">\n          <el-input\n            v-model=\"machineryTypeName\"\n            placeholder=\"请输入分类名称\"\n            clearable\n            size=\"small\"\n            prefix-icon=\"el-icon-search\"\n            style=\"margin-bottom: 20px\"\n          />\n        </div>\n        <div class=\"head-container\">\n          <el-tree\n            :data=\"machineryTypeOptions\"\n            :props=\"defaultProps\"\n            :expand-on-click-node=\"false\"\n            :filter-node-method=\"filterNode\"\n            ref=\"tree\"\n            default-expand-all\n            @node-click=\"handleNodeClick\"\n          />\n        </div>\n      </el-col>\n      <!--设备数据-->\n      <el-col :span=\"20\" :xs=\"24\">\n        <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\n          <el-form-item label=\"设备编码\" prop=\"machineryCode\">\n            <el-input\n              v-model=\"queryParams.machineryCode\"\n              placeholder=\"请输入设备编码\"\n              clearable\n              style=\"width: 240px\"\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item label=\"设备名称\" prop=\"machineryName\">\n            <el-input\n              v-model=\"queryParams.machineryName\"\n              placeholder=\"请输入设备名称\"\n              clearable\n              style=\"width: 240px\"\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n            <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n          </el-form-item>\n        </el-form>\n        <el-table v-loading=\"loading\" :data=\"machineryList\" @selection-change=\"handleSelectionChange\">\n          <el-table-column type=\"selection\" width=\"50\" align=\"center\" />\n          <el-table-column label=\"设备编码\" width = \"120\" align=\"center\" key=\"machineryCode\" prop=\"machineryCode\">\n          </el-table-column>\n          <el-table-column label=\"设备名称\" min-width=\"120\" align=\"left\" key=\"machineryName\" prop=\"machineryName\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"品牌\" align=\"left\" key=\"machineryBrand\" prop=\"machineryBrand\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"规格型号\" align=\"left\" key=\"machinerySpec\" prop=\"machinerySpec\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"所属车间\" align=\"center\" key=\"machineryTypeName\" prop=\"machineryTypeName\"  :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"设备状态\" align=\"center\" key=\"status\" prop=\"status\" >\n            <template slot-scope=\"scope\">\n              <dict-tag :options=\"dict.type.mes_machinery_status\" :value=\"scope.row.status\"/>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"160\">\n            <template slot-scope=\"scope\">\n              <span>{{ parseTime(scope.row.createTime) }}</span>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <pagination\n          v-show=\"total>0\"\n          :total=\"total\"\n          :page.sync=\"queryParams.pageNum\"\n          :limit.sync=\"queryParams.pageSize\"\n          @pagination=\"getList\"\n        />\n      </el-col>\n    </el-row>\n    <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"confirmSelect\">确 定</el-button>\n        <el-button @click=\"showFlag=false\">取 消</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { listMachinery, getMachinery, delMachinery, addMachinery, updateMachinery } from \"@/api/mes/dv/machinery\";\nimport { listMachinerytype } from \"@/api/mes/dv/machinerytype\";\nimport { listAllWorkshop } from \"@/api/mes/md/workshop\";\n\nimport { getToken } from \"@/utils/auth\";\nimport Treeselect from \"@riophae/vue-treeselect\";\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\n\nexport default {\n  name: \"MachinerySelect\",\n  dicts: ['sys_yes_no','mes_machinery_status'],\n  components: { Treeselect },\n  data() {\n    return {\n      showFlag: false,\n      // 遮罩层\n      loading: true,\n      // 选中数组\n      ids: [],\n      selectedRows: [],\n      // 非单个禁用\n      single: true,\n      // 非多个禁用\n      multiple: true,\n      // 显示搜索条件\n      showSearch: true,\n      // 总条数\n      total: 0,\n      // 物料产品表格数据\n      machineryList: [],\n      // 弹出层标题\n      title: \"\",\n      // 设备类型树选项\n      machineryTypeOptions: [],\n      //车间选项\n      workshopOptions:[],\n      // 是否显示弹出层\n      open: false,\n      // 设备类型名称\n      machineryTypeName: undefined,\n      //自动生成物料编码标识\n      autoGenFlag: false,\n      // 表单参数\n      form: {},\n      defaultProps: {\n        children: \"children\",\n        label: \"machineryTypeName\"\n      },\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        machineryCode: null,\n        machineryName: null,\n        machineryBrand: null,\n        machinerySpec: null,\n        machineryTypeId: null,\n        machineryTypeCode: null,\n        machineryTypeName: null,\n        workshopId: null,\n        workshopCode: null,\n        workshopName: null,\n        status: null\n      }\n    };\n  },\n  watch: {\n    // 根据设备分类名称筛选分类树\n    machineryTypeName(val) {\n      this.$refs.tree.filter(val);\n    }\n  },\n  created() {\n    this.getList();\n    this.getTreeselect();\n  },\n  methods: {\n    /** 查询物料编码列表 */\n    getList() {\n      this.loading = true;\n      listMachinery(this.queryParams).then(response => {\n          this.machineryList = response.rows;\n          this.total = response.total;\n          this.loading = false;\n        }\n      );\n    },\n    getWorkshops(){\n      listAllWorkshop().then( response => {\n        debugger;\n        this.workshopOptions =response.data;\n      });\n    },\n    /** 转换设备类型数据结构 */\n    normalizer(node) {\n      if (node.children && !node.children.length) {\n        delete node.children;\n      }\n      return {\n        id: node.machineryTypeId,\n        label: node.machineryTypeName,\n        children: node.children\n      };\n    },\n\t/** 查询设备类型下拉树结构 */\n    getTreeselect() {\n      listMachinerytype().then(response => {\n        debugger;\n        this.machineryTypeOptions = [];\n        const data = this.handleTree(response.data, \"machineryTypeId\", \"parentTypeId\")[0];\n        this.machineryTypeOptions.push(data);\n      });\n    },\n    // 筛选节点\n    filterNode(value, data) {\n      if (!value) return true;\n      return data.machineryTypeName.indexOf(value) !== -1;\n    },\n    // 节点单击事件\n    handleNodeClick(data) {\n      this.queryParams.machineryTypeId = data.machineryTypeId;\n      this.handleQuery();\n    },\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.resetForm(\"queryForm\");\n      this.handleQuery();\n    },\n    // 多选框选中数据\n    handleSelectionChange(selection) {\n      this.ids = selection.map(item => item.machineryId);\n      this.selectedRows = selection;\n      this.single = selection.length != 1;\n      this.multiple = !selection.length;\n    },\n    //确定选中\n    confirmSelect(){\n        if(this.ids ==[] || this.ids.length==0){\n            this.$notify({\n                title:'提示',\n                type:'warning',\n                message: '请至少选择一条数据!'\n            });\n            return;\n        }\n        this.$emit('onSelected',this.selectedRows);\n        this.showFlag = false;\n    }\n  }\n};\n</script>"]}]}