{"remainingRequest":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\pro\\schedule\\ganttx.vue?vue&type=style&index=0&id=5dfb935c&lang=css&","dependencies":[{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\pro\\schedule\\ganttx.vue","mtime":1665505269000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":1662432869776},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1662432875697},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\postcss-loader\\src\\index.js","mtime":1662432871503},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1662432874590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKQGltcG9ydCAifmRodG1seC1nYW50dC9jb2RlYmFzZS9kaHRtbHhnYW50dC5jc3MiOwovKiDku7vliqHlkI3liY3nmoRsb2dvICovCi5nYW50dF90cmVlX2ljb24uZ2FudHRfZmlsZSwgLmdhbnR0X3RyZWVfaWNvbi5nYW50dF9mb2xkZXJfb3BlbiwgLmdhbnR0X3RyZWVfaWNvbi5nYW50dF9mb2xkZXJfY2xvc2Vke3dpZHRoOiAxMHB4OyBiYWNrZ3JvdW5kLWltYWdlOiBub25lO30KLyog5Lu75Yqh57q/ICovCi5nYW50dF90YXNrX2xpbmV7CiAgaGVpZ2h0OiAxNnB4ICFpbXBvcnRhbnQ7CiAgbGluZS1oZWlnaHQ6IDE2cHggIWltcG9ydGFudDsKICBtYXJnaW4tdG9wOiA4cHg7CiAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7CiAgYm9yZGVyLXJhZGl1czogOHB4Owp9Ci5nYW50dF90YXNrX2xpbmUuZ2FudHRfbWlsZXN0b25le2JvcmRlci1yYWRpdXM6IDA7fQovKiDph4znqIvnopEgKi8KLmdhbnR0X3Rhc2tfbGluZS5nYW50dF9taWxlc3RvbmV7CiAgd2lkdGg6IDEycHggIWltcG9ydGFudDsKICBoZWlnaHQ6IDE2cHggIWltcG9ydGFudDsKICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKICBiYWNrZ3JvdW5kLWNvbG9yOiBpbmhlcml0ICFpbXBvcnRhbnQ7CiAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsKfQovKiDph4znqIvnopFpY29uICovCi5nYW50dF90YXNrX2xpbmUuZ2FudHRfbWlsZXN0b25lIC5nYW50dF90YXNrX2NvbnRlbnR7CiAgd2lkdGg6IDEycHg7CiAgaGVpZ2h0OiAxNnB4OwogIG1hcmdpbi1sZWZ0OiA0MHB4OwogIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpICFpbXBvcnRhbnQ7CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi8uLi8uLi8uLi9hc3NldHMvbG9nby9sb2dvLnBuZycpICFpbXBvcnRhbnQ7Cn0KLyog5bem5L6n5oKs5rWu5Y2V5YWD5qC86IOM5pmv6ImyICovCi5nYW50dF9ncmlkX2RhdGEgLmdhbnR0X3Jvdy5vZGQ6aG92ZXIsIC5nYW50dF9ncmlkX2RhdGEgLmdhbnR0X3Jvdzpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiAjZjNmMWZlICFpbXBvcnRhbnQ7fQovKiDpgInkuK3kuIDooYzog4zmma/oibIgKi8KLmdhbnR0X2dyaWRfZGF0YSAuZ2FudHRfcm93LmdhbnR0X3NlbGVjdGVkLCAuZ2FudHRfZ3JpZF9kYXRhIC5nYW50dF9yb3cub2RkLmdhbnR0X3NlbGVjdGVkLCAuZ2FudHRfdGFza19yb3cuZ2FudHRfc2VsZWN0ZWR7YmFja2dyb3VuZC1jb2xvcjogI2YzZjFmZSAhaW1wb3J0YW50O30KLyog6YCJ5Lit5LiA6KGM5q+P5Liq5Y2V5YWD5qC85Y+zYm9yZGVy6aKc6ImyICovCi5nYW50dF90YXNrX3Jvdy5nYW50dF9zZWxlY3RlZCAuZ2FudHRfdGFza19jZWxse2JvcmRlci1yaWdodC1jb2xvcjogI2YzZjFmZSAhaW1wb3J0YW50O30KCi8qIOagh+iusOe6vyAqLwouZ2FudHRfbWFya2Vye2JhY2tncm91bmQtY29sb3I6ICNmNGFlMDU7b3BhY2l0eTogLjg7fQoKCi8q5rua5Yqo5p2h5pW05L2T5qC35byPKi8KLmdhbnR0LXdyYXBwZXIgOjotd2Via2l0LXNjcm9sbGJhciB7CiAgd2lkdGg6IDE0cHg7ICAvKuWuveWIhuWIq+WvueW6lOerlua7muWKqOadoeeahOWwuuWvuCovCiAgaGVpZ2h0OiA2cHg7ICAvKumrmOWIhuWIq+WvueW6lOaoqua7muWKqOadoeeahOWwuuWvuCovCn0KCi8q5rua5Yqo5p2h6YeM6Z2i6L2o6YGTKi8KLmdhbnR0LXdyYXBwZXIgOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwuMik7CiAgYm9yZGVyLXJhZGl1czogNXB4Owp9Ci8q5rua5Yqo5p2h6YeM6Z2i5ouW5Yqo5p2hKi8KLmdhbnR0LXdyYXBwZXIgOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwuMyk7CiAgYm9yZGVyLXJhZGl1czogNXB4Owp9Ci5nYW50dC13cmFwcGVyIDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIgewogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsLjUpOwogIGJvcmRlci1yYWRpdXM6IDVweDsKfQoKLyog5bGV5byA5pS26LW36IOM5pmv5Zu+54mHICovCi5nYW50dF90cmVlX2ljb24uZ2FudHRfY2xvc2UsIC5nYW50dF90cmVlX2ljb24uZ2FudHRfb3BlbnsKICBiYWNrZ3JvdW5kLWltYWdlOiBub25lICFpbXBvcnRhbnQ7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9Ci8qIOaUtui1t+Wwj+S4ieinkiAqLwouZ2FudHRfdHJlZV9pY29uLmdhbnR0X2Nsb3NlOjphZnRlcnsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgY29udGVudDogJyc7CiAgdG9wOiAxNHB4OwogIGxlZnQ6IDEwcHg7CiAgYm9yZGVyLXJpZ2h0OiA2cHggc29saWQgdHJhbnNwYXJlbnQ7CiAgYm9yZGVyLWxlZnQ6IDZweCBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItdG9wOiA2cHggc29saWQgIzk5OTk5OTsKCn0KLyog5bGV5byA5bCP5LiJ6KeSICovCi5nYW50dF90cmVlX2ljb24uZ2FudHRfb3Blbjo6YWZ0ZXJ7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGNvbnRlbnQ6ICcnOwogIHRvcDogMTJweDsKICBsZWZ0OiAxMnB4OwogIGJvcmRlci1ib3R0b206IDZweCBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItdG9wOiA2cHggc29saWQgdHJhbnNwYXJlbnQ7CiAgYm9yZGVyLWxlZnQ6IDZweCBzb2xpZCAjOTk5OTk5Owp9Ci8qIOS4i+aWuea7muWKqOadoeWuveW6piAqLwouZ2FudHRfbGF5b3V0X2NlbGwgLmdhbnR0X2hvcl9zY3JvbGx7CiAgd2lkdGg6IGNhbGMoMTAwJSAtIDE5OXB4KSAhaW1wb3J0YW50OwogIGxlZnQ6IDE5OXB4Owp9Cgouc2NhbGVTdHlsZXsKICBoZWlnaHQ6IDIwcHg7Cn0KLyog5ZGo5pyr6IOM5pmv6aKc6ImyICovCi53ZWVrZW5kewogIGJhY2tncm91bmQ6IHJnYigxODksIDE4NSwgMTg2KSAhaW1wb3J0YW50OwogIHdpZHRoOiAzMHMKfSAgCg=="},{"version":3,"sources":["ganttx.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ganttx.vue","sourceRoot":"src/views/mes/pro/schedule","sourcesContent":["<template>\n  <div ref=\"gantt\"></div>\n</template>\n\n<script>\nimport { gantt } from 'dhtmlx-gantt';\nexport default {\n  name: 'GanttChar',\n  data() {\n    return {\n      newObj: {}\n    }\n  },\n  props: {\n    tasks: {\n      type: Object,\n      default () {\n        return {data: [], links: []}\n      }\n    },\n    optType: {\n      type: String,\n      default (){\n        return 'view'\n      }\n    },\n    ids: {\n      type: Array,\n      default (){\n        return []\n      }\n    }\n  },\n\n  created() {\n  },\n\n  mounted: function () {\n    // 初始化甘特图配置\n    this.initConfig();\n    gantt.plugins({\n      marker: true\n    });\n    // 甘特图初始化和导入数据\n    gantt.init(this.$refs.gantt);\n    gantt.parse(this.tasks);\n  },\n\n  methods: {\n    // 初始化甘特图数据\n    initData() {\n\n    },\n    reload() {\n      gantt.clearAll();\n      this.addTodayLine();\n      gantt.parse(this.$props.tasks);\n      gantt.render();\n    },\n    addTodayLine() {\n      // 时间线\n      var date_to_str = gantt.date.date_to_str(gantt.config.task_date);\n      var today = new Date();\n      gantt.addMarker({\n        start_date: today,\n        css: \"today\",\n        text: \"今天\",\n        title: \"今天: \" + date_to_str(today)\n      });\n    },\n    // 初始化甘特图配置\n    initConfig() {\n      // 1 基础配置\n      // 1.1 甘特图是否只读\n      if(this.optType =='view'){\n        gantt.config.readonly = true;\n      }else{\n        gantt.config.readonly = false;\n      }\n      \n      // 1.2 表格列设置\n      gantt.config.duration_unit=\"hour\";\n      gantt.config.duration_step=8;\n      gantt.config.grid_width=520;\n      gantt.config.columns = [\n        {name:\"text\", label:\"任务名\", tree:true, width:'200' },\n        {name:\"workstation\",label:\"工作站\",align:\"center\",width:'*'},\n        {name:\"process\",label:\"工序\",align:\"center\",width:'*'},        \n        {name:\"start_date\", label:\"开始时间\", align:\"center\", width:'*' },\n        {name:\"end_date\", label:\"结束时间\", align:\"center\" , width:'*'},\n      ];\n      // 1.3 设置中文\n      gantt.i18n.setLocale(\"cn\");\n      // 1.4 鼠标悬浮框\n      gantt.plugins({tooltip: true});// 启用tooltip悬浮框\n      gantt.templates.tooltip_text = function(start, end, task) {\n        if(task.type=='project'){\n          return \"<b style='text-align:left;'>生产工单:</b> \" + task.text +\"    <span style='text-align:left;'>\" +\" 完成比例：\"+ Math.round(task.progress * 100) + \"% </span>\";\n        }else{\n          return \"<b style='text-align:left;'>生产任务:</b> \"+task.process+\" \"+ task.text +\"    <span style='text-align:left;'>\" +\" 完成比例：\"+ Math.round(task.progress * 100) + \"% </span>\";\n        }\n      };\n\n\n      // 1.5 初始化的时候就展开树结构\n      gantt.config.open_tree_initially = true;\n      // 1.6 显示到任务上的文本\n      gantt.templates.task_text = function (start, end, task) {\n        if(task.type=='project'){\n          return \"<b style='text-align:left;'>生产工单:</b> \" + task.text +\"    <span style='text-align:left;'>\" +\" 完成比例：\"+ Math.round(task.progress * 100) + \"% </span>\";\n        }else{\n          return \"<b style='text-align:left;'>生产任务:</b> \"+task.process+\" \"+ task.text +\"    <span style='text-align:left;'>\" +\" 完成比例：\"+ Math.round(task.progress * 100) + \"% </span>\";\n        }\n        \n      };\n      // 1.7 显示单元格\n      gantt.config.show_task_cells = true;\n\n      // 2 时间配置\n      // 2.1 时间坐标轴单位 minute/hour/day/week/quarter/month/year\n     // gantt.config.scale_unit = \"hour\";\n      // 2.2 日期格式\n     // gantt.config.date_scale = \"%H\";\n      // 2.3 时间坐标为月份的时候  先显示年份再月份\n     // gantt.config.subscales = [{unit: \"month\", step: 1, date: \"%Y,%F\"}];\n      \n      var weekScaleTemplate = function (date) {\n        var dateToStr = gantt.date.date_to_str(\"%M %d\");\n        var endDate = gantt.date.add(gantt.date.add(date, 1, \"week\"), -1, \"day\");\n        return dateToStr(date) + \" - \" + dateToStr(endDate);\n      };\n\n      var dayTemplate = function(date){\n        var dateToStr = gantt.date.date_to_str(\"%M %d\");\n        var weekDay = gantt.date.date_to_str(\"%D\");\n        return dateToStr(date); + \"(\" + weekDay(date) + \")\";\n      };\n\n      var daysStyle = function(date){\n          // you can use gantt.isWorkTime(date)\n          // when gantt.config.work_time config is enabled\n          // In this sample it's not so we just check week days\n\n          if(date.getDay() === 0 || date.getDay() === 6){\n            return \"weekend\";\n          }\n          return \"\";\n        };\n\n      gantt.config.scales =[\n        {unit:\"week\", step:1,format: weekScaleTemplate},\n        {unit:\"day\", step:1,format: dayTemplate,css: daysStyle},\n        {unit:\"hour\", step:8,format: \"%H:%i\"}, //这里的step要根据当前的班次设置来。如果是三班倒则是8，如果是两班倒则是12。\n      ]\n      \n      gantt.config.scale_height = 50;\n\n      // 2.4 定义从后端获取或发送到后端的日期数据解析格式\n      gantt.config.xml_date = \"%Y-%m-%d %H:%i:%s\";\n\n      // 3 拖动配置\n      // 3.1 自动调整类型,当存在子节点时自动升级为project\n      gantt.config.auto_types = false;\n      // 3.2 设置不可以拖动进度\n      gantt.config.drag_progress = true;\n      // 3.3 设置Task不可以拖动\n      gantt.config.drag_move = true;\n      // 3.4 设置不可以拖动关系\n      gantt.config.drag_links = true;\n      // 3.5 设置不可拖动Task 大小\n      gantt.config.drag_resize = true;\n      // 3.6 单击显示添加详情\n      gantt.config.details_on_create = true;\n      // 3.7 双击显示明细\n      gantt.config.details_on_dblclick = true;\n\n      let t = this.$props.tasks;\n      let c = this.$props.ids;\n      gantt.attachEvent(\"onAfterTaskUpdate\",function(id,obj){\n        debugger;\n        let tt = t.data.filter( item=> item.id == id);\n        tt=obj;  \n        c.push(id);              \n      });\n\n\n    }\n  }\n}\n</script>\n\n<style>\n  @import \"~dhtmlx-gantt/codebase/dhtmlxgantt.css\";\n  /* 任务名前的logo */\n  .gantt_tree_icon.gantt_file, .gantt_tree_icon.gantt_folder_open, .gantt_tree_icon.gantt_folder_closed{width: 10px; background-image: none;}\n  /* 任务线 */\n  .gantt_task_line{\n    height: 16px !important;\n    line-height: 16px !important;\n    margin-top: 8px;\n    border: none !important;\n    border-radius: 8px;\n  }\n  .gantt_task_line.gantt_milestone{border-radius: 0;}\n  /* 里程碑 */\n  .gantt_task_line.gantt_milestone{\n    width: 12px !important;\n    height: 16px !important;\n    border: none !important;\n    background-color: inherit !important;\n    background-size: cover;\n  }\n  /* 里程碑icon */\n  .gantt_task_line.gantt_milestone .gantt_task_content{\n    width: 12px;\n    height: 16px;\n    margin-left: 40px;\n    transform: rotate(0deg) !important;\n    background-image: url('../../../../assets/logo/logo.png') !important;\n  }\n  /* 左侧悬浮单元格背景色 */\n  .gantt_grid_data .gantt_row.odd:hover, .gantt_grid_data .gantt_row:hover{background-color: #f3f1fe !important;}\n  /* 选中一行背景色 */\n  .gantt_grid_data .gantt_row.gantt_selected, .gantt_grid_data .gantt_row.odd.gantt_selected, .gantt_task_row.gantt_selected{background-color: #f3f1fe !important;}\n  /* 选中一行每个单元格右border颜色 */\n  .gantt_task_row.gantt_selected .gantt_task_cell{border-right-color: #f3f1fe !important;}\n\n  /* 标记线 */\n  .gantt_marker{background-color: #f4ae05;opacity: .8;}\n\n\n  /*滚动条整体样式*/\n  .gantt-wrapper ::-webkit-scrollbar {\n    width: 14px;  /*宽分别对应竖滚动条的尺寸*/\n    height: 6px;  /*高分别对应横滚动条的尺寸*/\n  }\n\n  /*滚动条里面轨道*/\n  .gantt-wrapper ::-webkit-scrollbar-track {\n    background-color: rgba(0,0,0,.2);\n    border-radius: 5px;\n  }\n  /*滚动条里面拖动条*/\n  .gantt-wrapper ::-webkit-scrollbar-thumb {\n    background-color: rgba(0,0,0,.3);\n    border-radius: 5px;\n  }\n  .gantt-wrapper ::-webkit-scrollbar-thumb:hover {\n    background-color: rgba(0,0,0,.5);\n    border-radius: 5px;\n  }\n\n  /* 展开收起背景图片 */\n  .gantt_tree_icon.gantt_close, .gantt_tree_icon.gantt_open{\n    background-image: none !important;\n    position: relative;\n  }\n  /* 收起小三角 */\n  .gantt_tree_icon.gantt_close::after{\n    position: absolute;\n    content: '';\n    top: 14px;\n    left: 10px;\n    border-right: 6px solid transparent;\n    border-left: 6px solid transparent;\n    border-top: 6px solid #999999;\n\n  }\n  /* 展开小三角 */\n  .gantt_tree_icon.gantt_open::after{\n    position: absolute;\n    content: '';\n    top: 12px;\n    left: 12px;\n    border-bottom: 6px solid transparent;\n    border-top: 6px solid transparent;\n    border-left: 6px solid #999999;\n  }\n  /* 下方滚动条宽度 */\n  .gantt_layout_cell .gantt_hor_scroll{\n    width: calc(100% - 199px) !important;\n    left: 199px;\n  }\n\n  .scaleStyle{\n    height: 20px;\n  }\n  /* 周末背景颜色 */\n  .weekend{\n    background: rgb(189, 185, 186) !important;\n    width: 30s\n  }  \n</style>"]}]}