{"remainingRequest":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\components\\machinerySelect\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\components\\machinerySelect\\index.vue","mtime":1662109326000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\babel.config.js","mtime":1662109326000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1662432871518},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1662432874590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGxpc3RNYWNoaW5lcnksIGdldE1hY2hpbmVyeSwgZGVsTWFjaGluZXJ5LCBhZGRNYWNoaW5lcnksIHVwZGF0ZU1hY2hpbmVyeSB9IGZyb20gIkAvYXBpL21lcy9kdi9tYWNoaW5lcnkiOwppbXBvcnQgeyBsaXN0TWFjaGluZXJ5dHlwZSB9IGZyb20gIkAvYXBpL21lcy9kdi9tYWNoaW5lcnl0eXBlIjsKaW1wb3J0IHsgbGlzdEFsbFdvcmtzaG9wIH0gZnJvbSAiQC9hcGkvbWVzL21kL3dvcmtzaG9wIjsKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICJAL3V0aWxzL2F1dGgiOwppbXBvcnQgVHJlZXNlbGVjdCBmcm9tICJAcmlvcGhhZS92dWUtdHJlZXNlbGVjdCI7CmltcG9ydCAiQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QvZGlzdC92dWUtdHJlZXNlbGVjdC5jc3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk1hY2hpbmVyeVNlbGVjdCIsCiAgZGljdHM6IFsnc3lzX3llc19ubycsICdtZXNfbWFjaGluZXJ5X3N0YXR1cyddLAogIGNvbXBvbmVudHM6IHsKICAgIFRyZWVzZWxlY3Q6IFRyZWVzZWxlY3QKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93RmxhZzogZmFsc2UsCiAgICAgIC8vIOmBrue9qeWxggogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAvLyDpgInkuK3mlbDnu4QKICAgICAgaWRzOiBbXSwKICAgICAgc2VsZWN0ZWRSb3dzOiBbXSwKICAgICAgLy8g6Z2e5Y2V5Liq56aB55SoCiAgICAgIHNpbmdsZTogdHJ1ZSwKICAgICAgLy8g6Z2e5aSa5Liq56aB55SoCiAgICAgIG11bHRpcGxlOiB0cnVlLAogICAgICAvLyDmmL7npLrmkJzntKLmnaHku7YKICAgICAgc2hvd1NlYXJjaDogdHJ1ZSwKICAgICAgLy8g5oC75p2h5pWwCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDnianmlpnkuqflk4HooajmoLzmlbDmja4KICAgICAgbWFjaGluZXJ5TGlzdDogW10sCiAgICAgIC8vIOW8ueWHuuWxguagh+mimAogICAgICB0aXRsZTogIiIsCiAgICAgIC8vIOiuvuWkh+exu+Wei+agkemAiemhuQogICAgICBtYWNoaW5lcnlUeXBlT3B0aW9uczogW10sCiAgICAgIC8v6L2m6Ze06YCJ6aG5CiAgICAgIHdvcmtzaG9wT3B0aW9uczogW10sCiAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxggogICAgICBvcGVuOiBmYWxzZSwKICAgICAgLy8g6K6+5aSH57G75Z6L5ZCN56ewCiAgICAgIG1hY2hpbmVyeVR5cGVOYW1lOiB1bmRlZmluZWQsCiAgICAgIC8v6Ieq5Yqo55Sf5oiQ54mp5paZ57yW56CB5qCH6K+GCiAgICAgIGF1dG9HZW5GbGFnOiBmYWxzZSwKICAgICAgLy8g6KGo5Y2V5Y+C5pWwCiAgICAgIGZvcm06IHt9LAogICAgICBkZWZhdWx0UHJvcHM6IHsKICAgICAgICBjaGlsZHJlbjogImNoaWxkcmVuIiwKICAgICAgICBsYWJlbDogIm1hY2hpbmVyeVR5cGVOYW1lIgogICAgICB9LAogICAgICAvLyDmn6Xor6Llj4LmlbAKICAgICAgcXVlcnlQYXJhbXM6IHsKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICBtYWNoaW5lcnlDb2RlOiBudWxsLAogICAgICAgIG1hY2hpbmVyeU5hbWU6IG51bGwsCiAgICAgICAgbWFjaGluZXJ5QnJhbmQ6IG51bGwsCiAgICAgICAgbWFjaGluZXJ5U3BlYzogbnVsbCwKICAgICAgICBtYWNoaW5lcnlUeXBlSWQ6IG51bGwsCiAgICAgICAgbWFjaGluZXJ5VHlwZUNvZGU6IG51bGwsCiAgICAgICAgbWFjaGluZXJ5VHlwZU5hbWU6IG51bGwsCiAgICAgICAgd29ya3Nob3BJZDogbnVsbCwKICAgICAgICB3b3Jrc2hvcENvZGU6IG51bGwsCiAgICAgICAgd29ya3Nob3BOYW1lOiBudWxsLAogICAgICAgIHN0YXR1czogbnVsbAogICAgICB9CiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIC8vIOagueaNruiuvuWkh+WIhuexu+WQjeensOetm+mAieWIhuexu+agkQogICAgbWFjaGluZXJ5VHlwZU5hbWU6IGZ1bmN0aW9uIG1hY2hpbmVyeVR5cGVOYW1lKHZhbCkgewogICAgICB0aGlzLiRyZWZzLnRyZWUuZmlsdGVyKHZhbCk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCk7CiAgICB0aGlzLmdldFRyZWVzZWxlY3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKiDmn6Xor6LnianmlpnnvJbnoIHliJfooaggKi8KICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBsaXN0TWFjaGluZXJ5KHRoaXMucXVlcnlQYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMubWFjaGluZXJ5TGlzdCA9IHJlc3BvbnNlLnJvd3M7CiAgICAgICAgX3RoaXMudG90YWwgPSByZXNwb25zZS50b3RhbDsKICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGdldFdvcmtzaG9wczogZnVuY3Rpb24gZ2V0V29ya3Nob3BzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGxpc3RBbGxXb3Jrc2hvcCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgZGVidWdnZXI7CiAgICAgICAgX3RoaXMyLndvcmtzaG9wT3B0aW9ucyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKiog6L2s5o2i6K6+5aSH57G75Z6L5pWw5o2u57uT5p6EICovCiAgICBub3JtYWxpemVyOiBmdW5jdGlvbiBub3JtYWxpemVyKG5vZGUpIHsKICAgICAgaWYgKG5vZGUuY2hpbGRyZW4gJiYgIW5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgZGVsZXRlIG5vZGUuY2hpbGRyZW47CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IG5vZGUubWFjaGluZXJ5VHlwZUlkLAogICAgICAgIGxhYmVsOiBub2RlLm1hY2hpbmVyeVR5cGVOYW1lLAogICAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuCiAgICAgIH07CiAgICB9LAoKICAgIC8qKiDmn6Xor6Lorr7lpIfnsbvlnovkuIvmi4nmoJHnu5PmnoQgKi8KICAgIGdldFRyZWVzZWxlY3Q6IGZ1bmN0aW9uIGdldFRyZWVzZWxlY3QoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgbGlzdE1hY2hpbmVyeXR5cGUoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGRlYnVnZ2VyOwogICAgICAgIF90aGlzMy5tYWNoaW5lcnlUeXBlT3B0aW9ucyA9IFtdOwoKICAgICAgICB2YXIgZGF0YSA9IF90aGlzMy5oYW5kbGVUcmVlKHJlc3BvbnNlLmRhdGEsICJtYWNoaW5lcnlUeXBlSWQiLCAicGFyZW50VHlwZUlkIilbMF07CgogICAgICAgIF90aGlzMy5tYWNoaW5lcnlUeXBlT3B0aW9ucy5wdXNoKGRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDnrZvpgInoioLngrkKICAgIGZpbHRlck5vZGU6IGZ1bmN0aW9uIGZpbHRlck5vZGUodmFsdWUsIGRhdGEpIHsKICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIHRydWU7CiAgICAgIHJldHVybiBkYXRhLm1hY2hpbmVyeVR5cGVOYW1lLmluZGV4T2YodmFsdWUpICE9PSAtMTsKICAgIH0sCiAgICAvLyDoioLngrnljZXlh7vkuovku7YKICAgIGhhbmRsZU5vZGVDbGljazogZnVuY3Rpb24gaGFuZGxlTm9kZUNsaWNrKGRhdGEpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtcy5tYWNoaW5lcnlUeXBlSWQgPSBkYXRhLm1hY2hpbmVyeVR5cGVJZDsKICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOwogICAgfSwKCiAgICAvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVRdWVyeTogZnVuY3Rpb24gaGFuZGxlUXVlcnkoKSB7CiAgICAgIHRoaXMucXVlcnlQYXJhbXMucGFnZU51bSA9IDE7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKCiAgICAvKiog6YeN572u5oyJ6ZKu5pON5L2cICovCiAgICByZXNldFF1ZXJ5OiBmdW5jdGlvbiByZXNldFF1ZXJ5KCkgewogICAgICB0aGlzLnJlc2V0Rm9ybSgicXVlcnlGb3JtIik7CiAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKTsKICAgIH0sCiAgICAvLyDlpJrpgInmoYbpgInkuK3mlbDmja4KICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZTogZnVuY3Rpb24gaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHNlbGVjdGlvbikgewogICAgICB0aGlzLmlkcyA9IHNlbGVjdGlvbi5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5tYWNoaW5lcnlJZDsKICAgICAgfSk7CiAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gc2VsZWN0aW9uOwogICAgICB0aGlzLnNpbmdsZSA9IHNlbGVjdGlvbi5sZW5ndGggIT0gMTsKICAgICAgdGhpcy5tdWx0aXBsZSA9ICFzZWxlY3Rpb24ubGVuZ3RoOwogICAgfSwKICAgIC8v56Gu5a6a6YCJ5LitCiAgICBjb25maXJtU2VsZWN0OiBmdW5jdGlvbiBjb25maXJtU2VsZWN0KCkgewogICAgICBpZiAodGhpcy5pZHMgPT0gW10gfHwgdGhpcy5pZHMubGVuZ3RoID09IDApIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgdGl0bGU6ICfmj5DnpLonLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+iHs+WwkemAieaLqeS4gOadoeaVsOaNriEnCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiRlbWl0KCdvblNlbGVjdGVkJywgdGhpcy5zZWxlY3RlZFJvd3MpOwogICAgICB0aGlzLnNob3dGbGFnID0gZmFsc2U7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AAEA;AACA;AACA;AAEA;EACAA,uBADA;EAEAC,6CAFA;EAGAC;IAAAC;EAAA,CAHA;EAIAC,IAJA,kBAIA;IACA;MACAC,eADA;MAEA;MACAC,aAHA;MAIA;MACAC,OALA;MAMAC,gBANA;MAOA;MACAC,YARA;MASA;MACAC,cAVA;MAWA;MACAC,gBAZA;MAaA;MACAC,QAdA;MAeA;MACAC,iBAhBA;MAiBA;MACAC,SAlBA;MAmBA;MACAC,wBApBA;MAqBA;MACAC,mBAtBA;MAuBA;MACAC,WAxBA;MAyBA;MACAC,4BA1BA;MA2BA;MACAC,kBA5BA;MA6BA;MACAC,QA9BA;MA+BAC;QACAC,oBADA;QAEAC;MAFA,CA/BA;MAmCA;MACAC;QACAC,UADA;QAEAC,YAFA;QAGAC,mBAHA;QAIAC,mBAJA;QAKAC,oBALA;QAMAC,mBANA;QAOAC,qBAPA;QAQAC,uBARA;QASAd,uBATA;QAUAe,gBAVA;QAWAC,kBAXA;QAYAC,kBAZA;QAaAC;MAbA;IApCA;EAoDA,CAzDA;EA0DAC;IACA;IACAnB,iBAFA,6BAEAoB,GAFA,EAEA;MACA;IACA;EAJA,CA1DA;EAgEAC,OAhEA,qBAgEA;IACA;IACA;EACA,CAnEA;EAoEAC;IACA;IACAC,OAFA,qBAEA;MAAA;;MACA;MACAC;QACA;QACA;QACA;MACA,CAJA;IAMA,CAVA;IAWAC,YAXA,0BAWA;MAAA;;MACAC;QACA;QACA;MACA,CAHA;IAIA,CAhBA;;IAiBA;IACAC,UAlBA,sBAkBAC,IAlBA,EAkBA;MACA;QACA;MACA;;MACA;QACAC,wBADA;QAEAxB,6BAFA;QAGAD;MAHA;IAKA,CA3BA;;IA4BA;IACA0B,aA7BA,2BA6BA;MAAA;;MACAC;QACA;QACA;;QACA;;QACA;MACA,CALA;IAMA,CApCA;IAqCA;IACAC,UAtCA,sBAsCAC,KAtCA,EAsCA/C,IAtCA,EAsCA;MACA;MACA;IACA,CAzCA;IA0CA;IACAgD,eA3CA,2BA2CAhD,IA3CA,EA2CA;MACA;MACA;IACA,CA9CA;;IA+CA;IACAiD,WAhDA,yBAgDA;MACA;MACA;IACA,CAnDA;;IAoDA;IACAC,UArDA,wBAqDA;MACA;MACA;IACA,CAxDA;IAyDA;IACAC,qBA1DA,iCA0DAC,SA1DA,EA0DA;MACA;QAAA;MAAA;MACA;MACA;MACA;IACA,CA/DA;IAgEA;IACAC,aAjEA,2BAiEA;MACA;QACA;UACA3C,WADA;UAEA4C,eAFA;UAGAC;QAHA;QAKA;MACA;;MACA;MACA;IACA;EA5EA;AApEA","names":["name","dicts","components","Treeselect","data","showFlag","loading","ids","selectedRows","single","multiple","showSearch","total","machineryList","title","machineryTypeOptions","workshopOptions","open","machineryTypeName","autoGenFlag","form","defaultProps","children","label","queryParams","pageNum","pageSize","machineryCode","machineryName","machineryBrand","machinerySpec","machineryTypeId","machineryTypeCode","workshopId","workshopCode","workshopName","status","watch","val","created","methods","getList","listMachinery","getWorkshops","listAllWorkshop","normalizer","node","id","getTreeselect","listMachinerytype","filterNode","value","handleNodeClick","handleQuery","resetQuery","handleSelectionChange","selection","confirmSelect","type","message"],"sourceRoot":"src/components/machinerySelect","sources":["index.vue"],"sourcesContent":["<template>\n  <el-dialog title=\"设备选择\"\n    v-if=\"showFlag\"\n    :visible.sync=\"showFlag\"\n    :modal= false\n    width=\"80%\"\n    center\n  >\n    <el-row :gutter=\"20\">\n      <!--分类数据-->\n      <el-col :span=\"4\" :xs=\"24\">\n        <div class=\"head-container\">\n          <el-input\n            v-model=\"machineryTypeName\"\n            placeholder=\"请输入分类名称\"\n            clearable\n            size=\"small\"\n            prefix-icon=\"el-icon-search\"\n            style=\"margin-bottom: 20px\"\n          />\n        </div>\n        <div class=\"head-container\">\n          <el-tree\n            :data=\"machineryTypeOptions\"\n            :props=\"defaultProps\"\n            :expand-on-click-node=\"false\"\n            :filter-node-method=\"filterNode\"\n            ref=\"tree\"\n            default-expand-all\n            @node-click=\"handleNodeClick\"\n          />\n        </div>\n      </el-col>\n      <!--设备数据-->\n      <el-col :span=\"20\" :xs=\"24\">\n        <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\n          <el-form-item label=\"设备编码\" prop=\"machineryCode\">\n            <el-input\n              v-model=\"queryParams.machineryCode\"\n              placeholder=\"请输入设备编码\"\n              clearable\n              style=\"width: 240px\"\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item label=\"设备名称\" prop=\"machineryName\">\n            <el-input\n              v-model=\"queryParams.machineryName\"\n              placeholder=\"请输入设备名称\"\n              clearable\n              style=\"width: 240px\"\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n            <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n          </el-form-item>\n        </el-form>\n        <el-table v-loading=\"loading\" :data=\"machineryList\" @selection-change=\"handleSelectionChange\">\n          <el-table-column type=\"selection\" width=\"50\" align=\"center\" />\n          <el-table-column label=\"设备编码\" width = \"120\" align=\"center\" key=\"machineryCode\" prop=\"machineryCode\">\n          </el-table-column>\n          <el-table-column label=\"设备名称\" min-width=\"120\" align=\"left\" key=\"machineryName\" prop=\"machineryName\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"品牌\" align=\"left\" key=\"machineryBrand\" prop=\"machineryBrand\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"规格型号\" align=\"left\" key=\"machinerySpec\" prop=\"machinerySpec\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"所属车间\" align=\"center\" key=\"machineryTypeName\" prop=\"machineryTypeName\"  :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"设备状态\" align=\"center\" key=\"status\" prop=\"status\" >\n            <template slot-scope=\"scope\">\n              <dict-tag :options=\"dict.type.mes_machinery_status\" :value=\"scope.row.status\"/>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"160\">\n            <template slot-scope=\"scope\">\n              <span>{{ parseTime(scope.row.createTime) }}</span>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <pagination\n          v-show=\"total>0\"\n          :total=\"total\"\n          :page.sync=\"queryParams.pageNum\"\n          :limit.sync=\"queryParams.pageSize\"\n          @pagination=\"getList\"\n        />\n      </el-col>\n    </el-row>\n    <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"confirmSelect\">确 定</el-button>\n        <el-button @click=\"showFlag=false\">取 消</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { listMachinery, getMachinery, delMachinery, addMachinery, updateMachinery } from \"@/api/mes/dv/machinery\";\nimport { listMachinerytype } from \"@/api/mes/dv/machinerytype\";\nimport { listAllWorkshop } from \"@/api/mes/md/workshop\";\n\nimport { getToken } from \"@/utils/auth\";\nimport Treeselect from \"@riophae/vue-treeselect\";\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\n\nexport default {\n  name: \"MachinerySelect\",\n  dicts: ['sys_yes_no','mes_machinery_status'],\n  components: { Treeselect },\n  data() {\n    return {\n      showFlag: false,\n      // 遮罩层\n      loading: true,\n      // 选中数组\n      ids: [],\n      selectedRows: [],\n      // 非单个禁用\n      single: true,\n      // 非多个禁用\n      multiple: true,\n      // 显示搜索条件\n      showSearch: true,\n      // 总条数\n      total: 0,\n      // 物料产品表格数据\n      machineryList: [],\n      // 弹出层标题\n      title: \"\",\n      // 设备类型树选项\n      machineryTypeOptions: [],\n      //车间选项\n      workshopOptions:[],\n      // 是否显示弹出层\n      open: false,\n      // 设备类型名称\n      machineryTypeName: undefined,\n      //自动生成物料编码标识\n      autoGenFlag: false,\n      // 表单参数\n      form: {},\n      defaultProps: {\n        children: \"children\",\n        label: \"machineryTypeName\"\n      },\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        machineryCode: null,\n        machineryName: null,\n        machineryBrand: null,\n        machinerySpec: null,\n        machineryTypeId: null,\n        machineryTypeCode: null,\n        machineryTypeName: null,\n        workshopId: null,\n        workshopCode: null,\n        workshopName: null,\n        status: null\n      }\n    };\n  },\n  watch: {\n    // 根据设备分类名称筛选分类树\n    machineryTypeName(val) {\n      this.$refs.tree.filter(val);\n    }\n  },\n  created() {\n    this.getList();\n    this.getTreeselect();\n  },\n  methods: {\n    /** 查询物料编码列表 */\n    getList() {\n      this.loading = true;\n      listMachinery(this.queryParams).then(response => {\n          this.machineryList = response.rows;\n          this.total = response.total;\n          this.loading = false;\n        }\n      );\n    },\n    getWorkshops(){\n      listAllWorkshop().then( response => {\n        debugger;\n        this.workshopOptions =response.data;\n      });\n    },\n    /** 转换设备类型数据结构 */\n    normalizer(node) {\n      if (node.children && !node.children.length) {\n        delete node.children;\n      }\n      return {\n        id: node.machineryTypeId,\n        label: node.machineryTypeName,\n        children: node.children\n      };\n    },\n\t/** 查询设备类型下拉树结构 */\n    getTreeselect() {\n      listMachinerytype().then(response => {\n        debugger;\n        this.machineryTypeOptions = [];\n        const data = this.handleTree(response.data, \"machineryTypeId\", \"parentTypeId\")[0];\n        this.machineryTypeOptions.push(data);\n      });\n    },\n    // 筛选节点\n    filterNode(value, data) {\n      if (!value) return true;\n      return data.machineryTypeName.indexOf(value) !== -1;\n    },\n    // 节点单击事件\n    handleNodeClick(data) {\n      this.queryParams.machineryTypeId = data.machineryTypeId;\n      this.handleQuery();\n    },\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.resetForm(\"queryForm\");\n      this.handleQuery();\n    },\n    // 多选框选中数据\n    handleSelectionChange(selection) {\n      this.ids = selection.map(item => item.machineryId);\n      this.selectedRows = selection;\n      this.single = selection.length != 1;\n      this.multiple = !selection.length;\n    },\n    //确定选中\n    confirmSelect(){\n        if(this.ids ==[] || this.ids.length==0){\n            this.$notify({\n                title:'提示',\n                type:'warning',\n                message: '请至少选择一条数据!'\n            });\n            return;\n        }\n        this.$emit('onSelected',this.selectedRows);\n        this.showFlag = false;\n    }\n  }\n};\n</script>"]}]}