{"remainingRequest":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\dv\\machinery\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\dv\\machinery\\index.vue","mtime":1662109326000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\babel.config.js","mtime":1662109326000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1662432871518},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1662432874590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovcmVzb3VyY2UvZWNsaXBzZS13b3Jrc3BhY2Uva3RnLW1lcy1tYXN0ZXIva3RnLW1lcy11aS1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkQ6L3Jlc291cmNlL2VjbGlwc2Utd29ya3NwYWNlL2t0Zy1tZXMtbWFzdGVyL2t0Zy1tZXMtdWktbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBsaXN0TWFjaGluZXJ5LCBnZXRNYWNoaW5lcnksIGRlbE1hY2hpbmVyeSwgYWRkTWFjaGluZXJ5LCB1cGRhdGVNYWNoaW5lcnkgfSBmcm9tICJAL2FwaS9tZXMvZHYvbWFjaGluZXJ5IjsKaW1wb3J0IHsgbGlzdE1hY2hpbmVyeXR5cGUgfSBmcm9tICJAL2FwaS9tZXMvZHYvbWFjaGluZXJ5dHlwZSI7CmltcG9ydCB7IGxpc3RBbGxXb3Jrc2hvcCB9IGZyb20gIkAvYXBpL21lcy9tZC93b3Jrc2hvcCI7CmltcG9ydCB7IGdlbkNvZGUgfSBmcm9tICJAL2FwaS9zeXN0ZW0vYXV0b2NvZGUvcnVsZSI7CmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAiQC91dGlscy9hdXRoIjsKaW1wb3J0IFRyZWVzZWxlY3QgZnJvbSAiQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QiOwppbXBvcnQgIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNYWNoaW5lcnkiLAogIGRpY3RzOiBbJ3N5c195ZXNfbm8nLCAnbWVzX21hY2hpbmVyeV9zdGF0dXMnXSwKICBjb21wb25lbnRzOiB7CiAgICBUcmVlc2VsZWN0OiBUcmVlc2VsZWN0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF9yZWY7CgogICAgcmV0dXJuIF9yZWYgPSB7CiAgICAgIC8v6Ieq5Yqo55Sf5oiQ57yW56CBCiAgICAgIGF1dG9HZW5GbGFnOiBmYWxzZSwKICAgICAgb3B0VHlwZTogdW5kZWZpbmVkLAogICAgICAvLyDpga7nvanlsYIKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgLy8g6YCJ5Lit5pWw57uECiAgICAgIGlkczogW10sCiAgICAgIC8vIOmdnuWNleS4quemgeeUqAogICAgICBzaW5nbGU6IHRydWUsCiAgICAgIC8vIOmdnuWkmuS4quemgeeUqAogICAgICBtdWx0aXBsZTogdHJ1ZSwKICAgICAgLy8g5pi+56S65pCc57Si5p2h5Lu2CiAgICAgIHNob3dTZWFyY2g6IHRydWUsCiAgICAgIC8vIOaAu+adoeaVsAogICAgICB0b3RhbDogMCwKICAgICAgLy8g54mp5paZ5Lqn5ZOB6KGo5qC85pWw5o2uCiAgICAgIG1hY2hpbmVyeUxpc3Q6IFtdLAogICAgICAvLyDlvLnlh7rlsYLmoIfpopgKICAgICAgdGl0bGU6ICIiLAogICAgICAvLyDorr7lpIfnsbvlnovmoJHpgInpobkKICAgICAgbWFjaGluZXJ5VHlwZU9wdGlvbnM6IFtdLAogICAgICAvL+i9pumXtOmAiemhuQogICAgICB3b3Jrc2hvcE9wdGlvbnM6IFtdLAogICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYIKICAgICAgb3BlbjogZmFsc2UsCiAgICAgIC8vIOiuvuWkh+exu+Wei+WQjeensAogICAgICBtYWNoaW5lcnlUeXBlTmFtZTogdW5kZWZpbmVkCiAgICB9LCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgImF1dG9HZW5GbGFnIiwgZmFsc2UpLCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgImZvcm0iLCB7fSksIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCAiZGVmYXVsdFByb3BzIiwgewogICAgICBjaGlsZHJlbjogImNoaWxkcmVuIiwKICAgICAgbGFiZWw6ICJtYWNoaW5lcnlUeXBlTmFtZSIKICAgIH0pLCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgInVwbG9hZCIsIHsKICAgICAgLy8g5piv5ZCm5pi+56S65by55Ye65bGC77yI55So5oi35a+85YWl77yJCiAgICAgIG9wZW46IGZhbHNlLAogICAgICAvLyDlvLnlh7rlsYLmoIfpopjvvIjnlKjmiLflr7zlhaXvvIkKICAgICAgdGl0bGU6ICIiLAogICAgICAvLyDmmK/lkKbnpoHnlKjkuIrkvKAKICAgICAgaXNVcGxvYWRpbmc6IGZhbHNlLAogICAgICAvLyDmmK/lkKbmm7TmlrDlt7Lnu4/lrZjlnKjnmoTnlKjmiLfmlbDmja4KICAgICAgdXBkYXRlU3VwcG9ydDogMCwKICAgICAgLy8g6K6+572u5LiK5Lyg55qE6K+35rGC5aS06YOoCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyBnZXRUb2tlbigpCiAgICAgIH0sCiAgICAgIC8vIOS4iuS8oOeahOWcsOWdgAogICAgICB1cmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEkgKyAiL21lcy9kdi9tYWNoaW5lcnkvaW1wb3J0RGF0YSIKICAgIH0pLCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgInF1ZXJ5UGFyYW1zIiwgewogICAgICBwYWdlTnVtOiAxLAogICAgICBwYWdlU2l6ZTogMTAsCiAgICAgIG1hY2hpbmVyeUNvZGU6IG51bGwsCiAgICAgIG1hY2hpbmVyeU5hbWU6IG51bGwsCiAgICAgIG1hY2hpbmVyeUJyYW5kOiBudWxsLAogICAgICBtYWNoaW5lcnlTcGVjOiBudWxsLAogICAgICBtYWNoaW5lcnlUeXBlSWQ6IG51bGwsCiAgICAgIG1hY2hpbmVyeVR5cGVDb2RlOiBudWxsLAogICAgICBtYWNoaW5lcnlUeXBlTmFtZTogbnVsbCwKICAgICAgd29ya3Nob3BJZDogbnVsbCwKICAgICAgd29ya3Nob3BDb2RlOiBudWxsLAogICAgICB3b3Jrc2hvcE5hbWU6IG51bGwsCiAgICAgIHN0YXR1czogbnVsbAogICAgfSksIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCAicnVsZXMiLCB7CiAgICAgIG1hY2hpbmVyeUNvZGU6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogIuiuvuWkh+e8lueggeS4jeiDveS4uuepuiIsCiAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgIH0sIHsKICAgICAgICBtYXg6IDY0LAogICAgICAgIG1lc3NhZ2U6ICforr7lpIfnvJbnoIHplb/luqblv4XpobvlsI/kuo42NOS4quWtl+espicsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dLAogICAgICBtYWNoaW5lcnlOYW1lOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICLorr7lpIflkI3np7DkuI3og73kuLrnqboiLAogICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICB9XSwKICAgICAgd29ya3Nob3BJZDogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAi6L2m6Ze05LiN6IO95Li656m6IiwKICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgfV0sCiAgICAgIG1hY2hpbmVyeVR5cGVJZDogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAi6K6+5aSH5YiG57G75LiN6IO95Li656m6IiwKICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgfV0KICAgIH0pLCBfcmVmOwogIH0sCiAgd2F0Y2g6IHsKICAgIC8vIOagueaNruiuvuWkh+WIhuexu+WQjeensOetm+mAieWIhuexu+agkQogICAgbWFjaGluZXJ5VHlwZU5hbWU6IGZ1bmN0aW9uIG1hY2hpbmVyeVR5cGVOYW1lKHZhbCkgewogICAgICB0aGlzLiRyZWZzLnRyZWUuZmlsdGVyKHZhbCk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCk7CiAgICB0aGlzLmdldFRyZWVzZWxlY3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKiDmn6Xor6LnianmlpnnvJbnoIHliJfooaggKi8KICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBsaXN0TWFjaGluZXJ5KHRoaXMucXVlcnlQYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMubWFjaGluZXJ5TGlzdCA9IHJlc3BvbnNlLnJvd3M7CiAgICAgICAgX3RoaXMudG90YWwgPSByZXNwb25zZS50b3RhbDsKICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGdldFdvcmtzaG9wczogZnVuY3Rpb24gZ2V0V29ya3Nob3BzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGxpc3RBbGxXb3Jrc2hvcCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgZGVidWdnZXI7CiAgICAgICAgX3RoaXMyLndvcmtzaG9wT3B0aW9ucyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKiog6L2s5o2i6K6+5aSH57G75Z6L5pWw5o2u57uT5p6EICovCiAgICBub3JtYWxpemVyOiBmdW5jdGlvbiBub3JtYWxpemVyKG5vZGUpIHsKICAgICAgaWYgKG5vZGUuY2hpbGRyZW4gJiYgIW5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgZGVsZXRlIG5vZGUuY2hpbGRyZW47CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IG5vZGUubWFjaGluZXJ5VHlwZUlkLAogICAgICAgIGxhYmVsOiBub2RlLm1hY2hpbmVyeVR5cGVOYW1lLAogICAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuCiAgICAgIH07CiAgICB9LAoKICAgIC8qKiDmn6Xor6Lorr7lpIfnsbvlnovkuIvmi4nmoJHnu5PmnoQgKi8KICAgIGdldFRyZWVzZWxlY3Q6IGZ1bmN0aW9uIGdldFRyZWVzZWxlY3QoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgbGlzdE1hY2hpbmVyeXR5cGUoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGRlYnVnZ2VyOwogICAgICAgIF90aGlzMy5tYWNoaW5lcnlUeXBlT3B0aW9ucyA9IFtdOwoKICAgICAgICB2YXIgZGF0YSA9IF90aGlzMy5oYW5kbGVUcmVlKHJlc3BvbnNlLmRhdGEsICJtYWNoaW5lcnlUeXBlSWQiLCAicGFyZW50VHlwZUlkIilbMF07CgogICAgICAgIF90aGlzMy5tYWNoaW5lcnlUeXBlT3B0aW9ucy5wdXNoKGRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDnrZvpgInoioLngrkKICAgIGZpbHRlck5vZGU6IGZ1bmN0aW9uIGZpbHRlck5vZGUodmFsdWUsIGRhdGEpIHsKICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIHRydWU7CiAgICAgIHJldHVybiBkYXRhLm1hY2hpbmVyeVR5cGVOYW1lLmluZGV4T2YodmFsdWUpICE9PSAtMTsKICAgIH0sCiAgICAvLyDoioLngrnljZXlh7vkuovku7YKICAgIGhhbmRsZU5vZGVDbGljazogZnVuY3Rpb24gaGFuZGxlTm9kZUNsaWNrKGRhdGEpIHsKICAgICAgZGVidWdnZXI7CiAgICAgIHRoaXMucXVlcnlQYXJhbXMubWFjaGluZXJ5VHlwZUlkID0gZGF0YS5tYWNoaW5lcnlUeXBlSWQ7CiAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKTsKICAgIH0sCiAgICAvLyDlj5bmtojmjInpkq4KICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgdGhpcy5yZXNldCgpOwogICAgfSwKICAgIC8vIOihqOWNlemHjee9rgogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgbWFjaGluZXJ5SWQ6IG51bGwsCiAgICAgICAgbWFjaGluZXJ5Q29kZTogbnVsbCwKICAgICAgICBtYWNoaW5lcnlOYW1lOiBudWxsLAogICAgICAgIG1hY2hpbmVyeUJyYW5kOiBudWxsLAogICAgICAgIG1hY2hpbmVyeVNwZWM6IG51bGwsCiAgICAgICAgbWFjaGluZXJ5VHlwZUlkOiBudWxsLAogICAgICAgIG1hY2hpbmVyeVR5cGVDb2RlOiBudWxsLAogICAgICAgIG1hY2hpbmVyeVR5cGVOYW1lOiBudWxsLAogICAgICAgIHdvcmtzaG9wSWQ6IG51bGwsCiAgICAgICAgd29ya3Nob3BDb2RlOiBudWxsLAogICAgICAgIHdvcmtzaG9wTmFtZTogbnVsbCwKICAgICAgICBzdGF0dXM6ICJTVE9QIiwKICAgICAgICByZW1hcms6IG51bGwsCiAgICAgICAgY3JlYXRlQnk6IG51bGwsCiAgICAgICAgY3JlYXRlVGltZTogbnVsbCwKICAgICAgICB1cGRhdGVCeTogbnVsbCwKICAgICAgICB1cGRhdGVUaW1lOiBudWxsCiAgICAgIH07CiAgICAgIHRoaXMuYXV0b0dlbkZsYWcgPSBmYWxzZTsKICAgICAgdGhpcy5yZXNldEZvcm0oImZvcm0iKTsKICAgIH0sCgogICAgLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlUXVlcnk6IGZ1bmN0aW9uIGhhbmRsZVF1ZXJ5KCkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnBhZ2VOdW0gPSAxOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCgogICAgLyoqIOmHjee9ruaMiemSruaTjeS9nCAqLwogICAgcmVzZXRRdWVyeTogZnVuY3Rpb24gcmVzZXRRdWVyeSgpIHsKICAgICAgdGhpcy5yZXNldEZvcm0oInF1ZXJ5Rm9ybSIpOwogICAgICB0aGlzLmhhbmRsZVF1ZXJ5KCk7CiAgICB9LAogICAgLy8g5aSa6YCJ5qGG6YCJ5Lit5pWw5o2uCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdGlvbkNoYW5nZShzZWxlY3Rpb24pIHsKICAgICAgdGhpcy5pZHMgPSBzZWxlY3Rpb24ubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ubWFjaGluZXJ5SWQ7CiAgICAgIH0pOwogICAgICB0aGlzLnNpbmdsZSA9IHNlbGVjdGlvbi5sZW5ndGggIT0gMTsKICAgICAgdGhpcy5tdWx0aXBsZSA9ICFzZWxlY3Rpb24ubGVuZ3RoOwogICAgfSwKICAgIC8vIOafpeivouaYjue7huaMiemSruaTjeS9nAogICAgaGFuZGxlVmlldzogZnVuY3Rpb24gaGFuZGxlVmlldyhyb3cpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIHRoaXMuZ2V0VHJlZXNlbGVjdCgpOwogICAgICB0aGlzLmdldFdvcmtzaG9wcygpOwogICAgICB2YXIgbWFjaGluZXJ5SWQgPSByb3cubWFjaGluZXJ5SWQgfHwgdGhpcy5pZHM7CiAgICAgIGdldE1hY2hpbmVyeShtYWNoaW5lcnlJZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczQuZm9ybSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgX3RoaXM0Lm9wZW4gPSB0cnVlOwogICAgICAgIF90aGlzNC50aXRsZSA9ICLmn6XnnIvorr7lpIfkv6Hmga8iOwogICAgICAgIF90aGlzNC5vcHRUeXBlID0gInZpZXciOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqIOaWsOWinuaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlQWRkOiBmdW5jdGlvbiBoYW5kbGVBZGQoKSB7CiAgICAgIGRlYnVnZ2VyOwogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIHRoaXMuZ2V0VHJlZXNlbGVjdCgpOwogICAgICB0aGlzLmdldFdvcmtzaG9wcygpOwoKICAgICAgaWYgKHRoaXMucXVlcnlQYXJhbXMubWFjaGluZXJ5VHlwZUlkICE9IDApIHsKICAgICAgICB0aGlzLmZvcm0ubWFjaGluZXJ5VHlwZUlkID0gdGhpcy5xdWVyeVBhcmFtcy5tYWNoaW5lcnlUeXBlSWQ7CiAgICAgIH0KCiAgICAgIHRoaXMub3B0VHlwZSA9ICJhZGQiOwogICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgICB0aGlzLnRpdGxlID0gIuaWsOWinuiuvuWkhyI7CiAgICB9LAoKICAgIC8qKiDkv67mlLnmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZVVwZGF0ZTogZnVuY3Rpb24gaGFuZGxlVXBkYXRlKHJvdykgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgdGhpcy5nZXRUcmVlc2VsZWN0KCk7CiAgICAgIHRoaXMuZ2V0V29ya3Nob3BzKCk7CiAgICAgIHZhciBtYWNoaW5lcnlJZCA9IHJvdy5tYWNoaW5lcnlJZCB8fCB0aGlzLmlkczsKICAgICAgZ2V0TWFjaGluZXJ5KG1hY2hpbmVyeUlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzNS5mb3JtID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBfdGhpczUub3BlbiA9IHRydWU7CiAgICAgICAgX3RoaXM1LnRpdGxlID0gIuS/ruaUueiuvuWkhyI7CiAgICAgICAgX3RoaXM1Lm9wdFR5cGUgPSAiZWRpdCI7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKiog5o+Q5Lqk5oyJ6ZKuICovCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbImZvcm0iXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmIChfdGhpczYuZm9ybS5tYWNoaW5lcnlJZCAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgdXBkYXRlTWFjaGluZXJ5KF90aGlzNi5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIF90aGlzNi4kbW9kYWwubXNnU3VjY2Vzcygi5L+u5pS55oiQ5YqfIik7CgogICAgICAgICAgICAgIF90aGlzNi5vcGVuID0gZmFsc2U7CgogICAgICAgICAgICAgIF90aGlzNi5nZXRMaXN0KCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGVidWdnZXI7CiAgICAgICAgICAgIGFkZE1hY2hpbmVyeShfdGhpczYuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBfdGhpczYuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuaWsOWinuaIkOWKnyIpOwoKICAgICAgICAgICAgICBfdGhpczYub3BlbiA9IGZhbHNlOwoKICAgICAgICAgICAgICBfdGhpczYuZ2V0TGlzdCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvKiog5Yig6Zmk5oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVEZWxldGU6IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZShyb3cpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICB2YXIgbWFjaGluZXJ5SWRzID0gcm93Lm1hY2hpbmVyeUlkIHx8IHRoaXMuaWRzOwogICAgICB0aGlzLiRtb2RhbC5jb25maXJtKCfnoa7orqTliKDpmaTmlbDmja7pobnvvJ8nKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gZGVsTWFjaGluZXJ5KG1hY2hpbmVyeUlkcyk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNy5nZXRMaXN0KCk7CgogICAgICAgIF90aGlzNy4kbW9kYWwubXNnU3VjY2Vzcygi5Yig6Zmk5oiQ5YqfIik7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTsKICAgIH0sCgogICAgLyoqIOWvvOWHuuaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlRXhwb3J0OiBmdW5jdGlvbiBoYW5kbGVFeHBvcnQoKSB7CiAgICAgIHRoaXMuZG93bmxvYWQoJ21lcy9kdi9tYWNoaW5lcnkvZXhwb3J0JywgX29iamVjdFNwcmVhZCh7fSwgdGhpcy5xdWVyeVBhcmFtcyksICJ1c2VyXyIuY29uY2F0KG5ldyBEYXRlKCkuZ2V0VGltZSgpLCAiLnhsc3giKSk7CiAgICB9LAoKICAgIC8qKiDlr7zlhaXmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZUltcG9ydDogZnVuY3Rpb24gaGFuZGxlSW1wb3J0KCkgewogICAgICB0aGlzLnVwbG9hZC50aXRsZSA9ICLorr7lpIflr7zlhaUiOwogICAgICB0aGlzLnVwbG9hZC5vcGVuID0gdHJ1ZTsKICAgIH0sCgogICAgLyoqIOS4i+i9veaooeadv+aTjeS9nCAqLwogICAgaW1wb3J0VGVtcGxhdGU6IGZ1bmN0aW9uIGltcG9ydFRlbXBsYXRlKCkgewogICAgICB0aGlzLmRvd25sb2FkKCdtZXMvZHYvbWFjaGluZXJ5L2ltcG9ydFRlbXBsYXRlJywge30sICJtZF9pdGVtXyIuY29uY2F0KG5ldyBEYXRlKCkuZ2V0VGltZSgpLCAiLnhsc3giKSk7CiAgICB9LAogICAgLy8g5paH5Lu25LiK5Lyg5Lit5aSE55CGCiAgICBoYW5kbGVGaWxlVXBsb2FkUHJvZ3Jlc3M6IGZ1bmN0aW9uIGhhbmRsZUZpbGVVcGxvYWRQcm9ncmVzcyhldmVudCwgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgdGhpcy51cGxvYWQuaXNVcGxvYWRpbmcgPSB0cnVlOwogICAgfSwKICAgIC8vIOaWh+S7tuS4iuS8oOaIkOWKn+WkhOeQhgogICAgaGFuZGxlRmlsZVN1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZUZpbGVTdWNjZXNzKHJlc3BvbnNlLCBmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLnVwbG9hZC5vcGVuID0gZmFsc2U7CiAgICAgIHRoaXMudXBsb2FkLmlzVXBsb2FkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuJHJlZnMudXBsb2FkLmNsZWFyRmlsZXMoKTsKICAgICAgdGhpcy4kYWxlcnQoIjxkaXYgc3R5bGU9J292ZXJmbG93OiBhdXRvO292ZXJmbG93LXg6IGhpZGRlbjttYXgtaGVpZ2h0OiA3MHZoO3BhZGRpbmc6IDEwcHggMjBweCAwOyc+IiArIHJlc3BvbnNlLm1zZyArICI8L2Rpdj4iLCAi5a+85YWl57uT5p6cIiwgewogICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZQogICAgICB9KTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgLy8g5o+Q5Lqk5LiK5Lyg5paH5Lu2CiAgICBzdWJtaXRGaWxlRm9ybTogZnVuY3Rpb24gc3VibWl0RmlsZUZvcm0oKSB7CiAgICAgIHRoaXMuJHJlZnMudXBsb2FkLnN1Ym1pdCgpOwogICAgfSwKICAgIC8v6Ieq5Yqo55Sf5oiQ57yW56CBCiAgICBoYW5kbGVBdXRvR2VuQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVBdXRvR2VuQ2hhbmdlKGF1dG9HZW5GbGFnKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgZGVidWdnZXI7CgogICAgICBpZiAoYXV0b0dlbkZsYWcpIHsKICAgICAgICBnZW5Db2RlKCdNQUNISU5FUllfQ09ERScpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpczguZm9ybS5tYWNoaW5lcnlDb2RlID0gcmVzcG9uc2U7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mb3JtLm1hY2hpbmVyeUNvZGUgPSBudWxsOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":"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A,uBA2GA;MACA;MACA;MACA;MACA;;MACA;QACA;MACA;;MACA;MACA;MACA;IACA,CAtHA;;IAuHA;IACAC,YAxHA,wBAwHAH,GAxHA,EAwHA;MAAA;;MACA;MACA;MACA;MACA;MACAC;QACA;QACA;QACA;QACA;MACA,CALA;IAMA,CAnIA;;IAoIA;IACAG;MAAA;;MACA;QACA;UACA;YACAC;cACA;;cACA;;cACA;YACA,CAJA;UAKA,CANA,MAMA;YACA;YACAC;cACA;;cACA;;cACA;YACA,CAJA;UAKA;QACA;MACA,CAjBA;IAkBA,CAxJA;;IAyJA;IACAC,YA1JA,wBA0JAP,GA1JA,EA0JA;MAAA;;MACA;MACA;QACA;MACA,CAFA,EAEAQ,IAFA,CAEA;QACA;;QACA;MACA,CALA,EAKAC,KALA,CAKA,cALA;IAMA,CAlKA;;IAmKA;IACAC,YApKA,0BAoKA;MACA,2DACA,gBADA,kBAEA,oBAFA;IAGA,CAxKA;;IAyKA;IACAC,YA1KA,0BA0KA;MACA;MACA;IACA,CA7KA;;IA8KA;IACAC,cA/KA,4BA+KA;MACA,uEACA,oBADA;IAEA,CAlLA;IAmLA;IACAC,wBApLA,oCAoLAC,KApLA,EAoLAC,IApLA,EAoLAC,QApLA,EAoLA;MACA;IACA,CAtLA;IAuLA;IACAC,iBAxLA,6BAwLAC,QAxLA,EAwLAH,IAxLA,EAwLAC,QAxLA,EAwLA;MACA;MACA;MACA;MACA;QAAAG;MAAA;MACA;IACA,CA9LA;IA+LA;IACAC,cAhMA,4BAgMA;MACA;IACA,CAlMA;IAmMA;IACAC,mBApMA,+BAoMAvF,WApMA,EAoMA;MAAA;;MACA;;MACA;QACAwF;UACA;QACA,CAFA;MAGA,CAJA,MAIA;QACA;MACA;IACA;EA7MA;AArGA","names":["name","dicts","components","Treeselect","data","autoGenFlag","optType","loading","ids","single","multiple","showSearch","total","machineryList","title","machineryTypeOptions","workshopOptions","open","machineryTypeName","children","label","isUploading","updateSupport","headers","Authorization","url","pageNum","pageSize","machineryCode","machineryName","machineryBrand","machinerySpec","machineryTypeId","machineryTypeCode","workshopId","workshopCode","workshopName","status","required","message","trigger","max","watch","val","created","methods","getList","listMachinery","getWorkshops","listAllWorkshop","normalizer","node","id","getTreeselect","listMachinerytype","filterNode","value","handleNodeClick","cancel","reset","machineryId","remark","createBy","createTime","updateBy","updateTime","handleQuery","resetQuery","handleSelectionChange","selection","handleView","row","getMachinery","handleAdd","handleUpdate","submitForm","updateMachinery","addMachinery","handleDelete","then","catch","handleExport","handleImport","importTemplate","handleFileUploadProgress","event","file","fileList","handleFileSuccess","response","dangerouslyUseHTMLString","submitFileForm","handleAutoGenChange","genCode"],"sourceRoot":"src/views/mes/dv/machinery","sources":["index.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-row :gutter=\"20\">\n      <!--分类数据-->\n      <el-col :span=\"4\" :xs=\"24\">\n        <div class=\"head-container\">\n          <el-input\n            v-model=\"machineryTypeName\"\n            placeholder=\"请输入分类名称\"\n            clearable\n            size=\"small\"\n            prefix-icon=\"el-icon-search\"\n            style=\"margin-bottom: 20px\"\n          />\n        </div>\n        <div class=\"head-container\">\n          <el-tree\n            :data=\"machineryTypeOptions\"\n            :props=\"defaultProps\"\n            :expand-on-click-node=\"false\"\n            :filter-node-method=\"filterNode\"\n            ref=\"tree\"\n            default-expand-all\n            @node-click=\"handleNodeClick\"\n          />\n        </div>\n      </el-col>\n      <!--设备数据-->\n      <el-col :span=\"20\" :xs=\"24\">\n        <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\n          <el-form-item label=\"设备编码\" prop=\"machineryCode\">\n            <el-input\n              v-model=\"queryParams.machineryCode\"\n              placeholder=\"请输入设备编码\"\n              clearable\n              style=\"width: 240px\"\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item label=\"设备名称\" prop=\"machineryName\">\n            <el-input\n              v-model=\"queryParams.machineryName\"\n              placeholder=\"请输入设备名称\"\n              clearable\n              style=\"width: 240px\"\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n            <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n          </el-form-item>\n        </el-form>\n\n        <el-row :gutter=\"10\" class=\"mb8\">\n          <el-col :span=\"1.5\">\n            <el-button\n              type=\"primary\"\n              plain\n              icon=\"el-icon-plus\"\n              size=\"mini\"\n              @click=\"handleAdd\"\n              v-hasPermi=\"['mes:dv:machinery:add']\"\n            >新增</el-button>\n          </el-col>\n          <el-col :span=\"1.5\">\n            <el-button\n              type=\"success\"\n              plain\n              icon=\"el-icon-edit\"\n              size=\"mini\"\n              :disabled=\"single\"\n              @click=\"handleUpdate\"\n              v-hasPermi=\"['mes:dv:machinery:edit']\"\n            >修改</el-button>\n          </el-col>\n          <el-col :span=\"1.5\">\n            <el-button\n              type=\"danger\"\n              plain\n              icon=\"el-icon-delete\"\n              size=\"mini\"\n              :disabled=\"multiple\"\n              @click=\"handleDelete\"\n              v-hasPermi=\"['mes:dv:machinery:remove']\"\n            >删除</el-button>\n          </el-col>\n          <el-col :span=\"1.5\">\n            <el-button\n              type=\"info\"\n              plain\n              icon=\"el-icon-upload2\"\n              size=\"mini\"\n              @click=\"handleImport\"\n              v-hasPermi=\"['mes:dv:machinery:import']\"\n            >导入</el-button>\n          </el-col>\n          <el-col :span=\"1.5\">\n            <el-button\n              type=\"warning\"\n              plain\n              icon=\"el-icon-download\"\n              size=\"mini\"\n              @click=\"handleExport\"\n              v-hasPermi=\"['mes:dv:machinery:export']\"\n            >导出</el-button>\n          </el-col>\n          <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\n        </el-row>\n\n        <el-table v-loading=\"loading\" :data=\"machineryList\" @selection-change=\"handleSelectionChange\">\n          <el-table-column type=\"selection\" width=\"50\" align=\"center\" />\n          <el-table-column label=\"设备编码\" width = \"120\" align=\"center\" key=\"machineryCode\" prop=\"machineryCode\">\n              <template slot-scope=\"scope\">\n                <el-button\n                  size=\"mini\"\n                  type=\"text\"\n                  @click=\"handleView(scope.row)\"\n                  v-hasPermi=\"['mes:dv:machinery:query']\"\n                >{{scope.row.machineryCode}}</el-button>\n              </template>\n          </el-table-column>\n          <el-table-column label=\"设备名称\" min-width=\"120\" align=\"left\" key=\"machineryName\" prop=\"machineryName\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"品牌\" align=\"left\" key=\"machineryBrand\" prop=\"machineryBrand\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"规格型号\" align=\"left\" key=\"machinerySpec\" prop=\"machinerySpec\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"所属车间\" align=\"center\" key=\"machineryTypeName\" prop=\"machineryTypeName\"  :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"设备状态\" align=\"center\" key=\"status\" prop=\"status\" >\n            <template slot-scope=\"scope\">\n              <dict-tag :options=\"dict.type.mes_machinery_status\" :value=\"scope.row.status\"/>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"160\">\n            <template slot-scope=\"scope\">\n              <span>{{ parseTime(scope.row.createTime) }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column\n            label=\"操作\"\n            align=\"center\"\n            width=\"160\"\n            class-name=\"small-padding fixed-width\"\n          >\n            <template slot-scope=\"scope\">\n              <el-button\n                size=\"mini\"\n                type=\"text\"\n                icon=\"el-icon-edit\"\n                @click=\"handleUpdate(scope.row)\"\n                v-hasPermi=\"['mes:dv:machinery:edit']\"\n              >修改</el-button>\n              <el-button\n                size=\"mini\"\n                type=\"text\"\n                icon=\"el-icon-delete\"\n                @click=\"handleDelete(scope.row)\"\n                v-hasPermi=\"['mes:dv:machinery:remove']\"\n              >删除</el-button>              \n            </template>\n          </el-table-column>\n        </el-table>\n\n        <pagination\n          v-show=\"total>0\"\n          :total=\"total\"\n          :page.sync=\"queryParams.pageNum\"\n          :limit.sync=\"queryParams.pageSize\"\n          @pagination=\"getList\"\n        />\n      </el-col>\n    </el-row>\n\n    <!-- 添加或修改设备对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"960px\" append-to-body>\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\n        <el-row>\n          <el-col :span=\"8\">\n            <el-form-item label=\"设备编码\" prop=\"itemCode\">\n              <el-input v-model=\"form.machineryCode\" readonly=\"readonly\" maxlength=\"64\" v-if=\"optType == 'view'\"/>\n              <el-input v-model=\"form.machineryCode\" placeholder=\"请输入设备编码\" maxlength=\"64\" v-else/>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"4\">\n            <el-form-item  label-width=\"80\">\n              <el-switch v-model=\"autoGenFlag\"\n                  active-color=\"#13ce66\"\n                  active-text=\"自动生成\"\n                  @change=\"handleAutoGenChange(autoGenFlag)\" v-if=\"optType != 'view'\">               \n              </el-switch>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"设备名称\" prop=\"itemName\">\n              <el-input v-model=\"form.machineryName\"  maxlength=\"255\" readonly=\"readonly\" v-if=\"optType=='view'\" />\n              <el-input v-model=\"form.machineryName\" placeholder=\"请输入设备名称\" maxlength=\"255\" v-else/>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"品牌\" prop=\"machineryBrand\">\n              <el-input v-model=\"form.machineryBrand\"  maxlength=\"255\" readonly=\"readonly\" v-if=\"optType=='view'\" />\n              <el-input v-model=\"form.machineryBrand\"  placeholder=\"请输入品牌\" maxlength=\"255\" v-else/>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item  label=\"设备分类\" prop=\"machineryTypeId\">\n              <treeselect v-model=\"form.machineryTypeId\" :options=\"machineryTypeOptions\" :normalizer=\"normalizer\" disabled v-if=\"optType=='view'\"  />\n              <treeselect v-model=\"form.machineryTypeId\" :options=\"machineryTypeOptions\" :normalizer=\"normalizer\" placeholder=\"请选择所属分类\" v-else />\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"规格型号\" prop=\"machinerySpec\">\n              <el-input v-model=\"form.machinerySpec\" type=\"textarea\" maxlength=\"255\" readonly=\"readonly\" v-if=\"optType=='view'\" />\n              <el-input v-model=\"form.machinerySpec\" type=\"textarea\" placeholder=\"请输入规格型号\" maxlength=\"255\" v-else/>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"所属车间\" prop=\"workshopId\">\n            <el-select v-model=\"form.workshopId\" placeholder=\"请选择车间\">\n              <el-option\n                v-for=\"item in workshopOptions\"\n                :key=\"item.workshopId\"\n                :label=\"item.workshopName\"\n                :value=\"item.workshopId\"\n              ></el-option>\n            </el-select>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\">\n            <el-form-item label=\"备注\">\n              <el-input v-model=\"form.remark\" type=\"textarea\" readonly v-if=\"optType=='view'\"></el-input>\n              <el-input v-model=\"form.remark\" type=\"textarea\" placeholder=\"请输入内容\" v-else></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"cancel\" v-if=\"optType =='view'\">返回</el-button>\n        <el-button type=\"primary\" @click=\"submitForm\" v-else>确 定</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 物料导入对话框 -->\n    <el-dialog :title=\"upload.title\" :visible.sync=\"upload.open\" width=\"400px\" append-to-body>\n      <el-upload\n        ref=\"upload\"\n        :limit=\"1\"\n        accept=\".xlsx, .xls\"\n        :headers=\"upload.headers\"\n        :action=\"upload.url + '?updateSupport=' + upload.updateSupport\"\n        :disabled=\"upload.isUploading\"\n        :on-progress=\"handleFileUploadProgress\"\n        :on-success=\"handleFileSuccess\"\n        :auto-upload=\"false\"\n        drag\n      >\n        <i class=\"el-icon-upload\"></i>\n        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n        <div class=\"el-upload__tip text-center\" slot=\"tip\">\n          <div class=\"el-upload__tip\" slot=\"tip\">\n            <el-checkbox v-model=\"upload.updateSupport\" /> 是否更新已经存在的设备数据\n          </div>\n          <span>仅允许导入xls、xlsx格式文件。</span>\n          <el-link type=\"primary\" :underline=\"false\" style=\"font-size:12px;vertical-align: baseline;\" @click=\"importTemplate\">下载模板</el-link>\n        </div>\n      </el-upload>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitFileForm\">确 定</el-button>\n        <el-button @click=\"upload.open = false\">取 消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { listMachinery, getMachinery, delMachinery, addMachinery, updateMachinery } from \"@/api/mes/dv/machinery\";\nimport { listMachinerytype } from \"@/api/mes/dv/machinerytype\";\nimport { listAllWorkshop } from \"@/api/mes/md/workshop\";\nimport {genCode} from \"@/api/system/autocode/rule\"\nimport { getToken } from \"@/utils/auth\";\nimport Treeselect from \"@riophae/vue-treeselect\";\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\n\nexport default {\n  name: \"Machinery\",\n  dicts: ['sys_yes_no','mes_machinery_status'],\n  components: { Treeselect },\n  data() {\n    return {\n      //自动生成编码\n      autoGenFlag:false,\n      optType: undefined,\n      // 遮罩层\n      loading: true,\n      // 选中数组\n      ids: [],\n      // 非单个禁用\n      single: true,\n      // 非多个禁用\n      multiple: true,\n      // 显示搜索条件\n      showSearch: true,\n      // 总条数\n      total: 0,\n      // 物料产品表格数据\n      machineryList: [],\n      // 弹出层标题\n      title: \"\",\n      // 设备类型树选项\n      machineryTypeOptions: [],\n      //车间选项\n      workshopOptions:[],\n      // 是否显示弹出层\n      open: false,\n      // 设备类型名称\n      machineryTypeName: undefined,\n      //自动生成物料编码标识\n      autoGenFlag: false,\n      // 表单参数\n      form: {},\n      defaultProps: {\n        children: \"children\",\n        label: \"machineryTypeName\"\n      },\n      // 用户导入参数\n      upload: {\n        // 是否显示弹出层（用户导入）\n        open: false,\n        // 弹出层标题（用户导入）\n        title: \"\",\n        // 是否禁用上传\n        isUploading: false,\n        // 是否更新已经存在的用户数据\n        updateSupport: 0,\n        // 设置上传的请求头部\n        headers: { Authorization: \"Bearer \" + getToken() },\n        // 上传的地址\n        url: process.env.VUE_APP_BASE_API + \"/mes/dv/machinery/importData\"\n      },\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        machineryCode: null,\n        machineryName: null,\n        machineryBrand: null,\n        machinerySpec: null,\n        machineryTypeId: null,\n        machineryTypeCode: null,\n        machineryTypeName: null,\n        workshopId: null,\n        workshopCode: null,\n        workshopName: null,\n        status: null\n      },\n\n      // 表单校验\n      rules: {\n        machineryCode: [\n          { required: true, message: \"设备编码不能为空\", trigger: \"blur\" },\n          { max: 64, message: '设备编码长度必须小于64个字符', trigger: 'blur' }\n        ],\n        machineryName: [\n          { required: true, message: \"设备名称不能为空\", trigger: \"blur\" }\n        ],\n        workshopId: [\n          { required: true, message: \"车间不能为空\",trigger: \"blur\"}\n        ],\n        machineryTypeId: [\n          { required: true, message: \"设备分类不能为空\", trigger: \"blur\" },\n        ]\n      }\n    };\n  },\n  watch: {\n    // 根据设备分类名称筛选分类树\n    machineryTypeName(val) {\n      this.$refs.tree.filter(val);\n    }\n  },\n  created() {\n    this.getList();\n    this.getTreeselect();\n  },\n  methods: {\n    /** 查询物料编码列表 */\n    getList() {\n      this.loading = true;\n      listMachinery(this.queryParams).then(response => {\n          this.machineryList = response.rows;\n          this.total = response.total;\n          this.loading = false;\n        }\n      );\n    },\n    getWorkshops(){\n      listAllWorkshop().then( response => {\n        debugger;\n        this.workshopOptions =response.data;\n      });\n    },\n    /** 转换设备类型数据结构 */\n    normalizer(node) {\n      if (node.children && !node.children.length) {\n        delete node.children;\n      }\n      return {\n        id: node.machineryTypeId,\n        label: node.machineryTypeName,\n        children: node.children\n      };\n    },\n\t/** 查询设备类型下拉树结构 */\n    getTreeselect() {\n      listMachinerytype().then(response => {\n        debugger;\n        this.machineryTypeOptions = [];\n        const data = this.handleTree(response.data, \"machineryTypeId\", \"parentTypeId\")[0];\n        this.machineryTypeOptions.push(data);\n      });\n    },\n    // 筛选节点\n    filterNode(value, data) {\n      if (!value) return true;\n      return data.machineryTypeName.indexOf(value) !== -1;\n    },\n    // 节点单击事件\n    handleNodeClick(data) {\n      debugger;\n      this.queryParams.machineryTypeId = data.machineryTypeId;\n      this.handleQuery();\n    },\n    // 取消按钮\n    cancel() {\n      this.open = false;\n      this.reset();\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        machineryId: null,\n        machineryCode: null,\n        machineryName: null,\n        machineryBrand: null,\n        machinerySpec: null,\n        machineryTypeId: null,\n        machineryTypeCode: null,\n        machineryTypeName: null,\n        workshopId: null,\n        workshopCode: null,\n        workshopName: null,\n        status: \"STOP\",\n        remark: null,\n        createBy: null,\n        createTime: null,\n        updateBy: null,\n        updateTime: null       \n      };\n      this.autoGenFlag = false;\n      this.resetForm(\"form\");\n    },\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.resetForm(\"queryForm\");\n      this.handleQuery();\n    },\n    // 多选框选中数据\n    handleSelectionChange(selection) {\n      this.ids = selection.map(item => item.machineryId);\n      this.single = selection.length != 1;\n      this.multiple = !selection.length;\n    },\n    // 查询明细按钮操作\n    handleView(row){\n      this.reset();\n      this.getTreeselect();\n      this.getWorkshops();\n      const machineryId = row.machineryId || this.ids;\n      getMachinery(machineryId).then(response => {\n        this.form = response.data;\n        this.open = true;\n        this.title = \"查看设备信息\";\n        this.optType = \"view\";\n      });\n    },\n    /** 新增按钮操作 */\n    handleAdd() {\n      debugger;\n      this.reset();\n      this.getTreeselect();\n      this.getWorkshops();\n      if(this.queryParams.machineryTypeId != 0){\n        this.form.machineryTypeId = this.queryParams.machineryTypeId;\n      }\n      this.optType = \"add\";\n      this.open = true;\n      this.title = \"新增设备\";\n    },\n    /** 修改按钮操作 */\n    handleUpdate(row) {\n      this.reset();\n      this.getTreeselect();\n      this.getWorkshops();\n      const machineryId = row.machineryId || this.ids\n      getMachinery(machineryId).then(response => {\n        this.form = response.data;\n        this.open = true;\n        this.title = \"修改设备\";\n        this.optType = \"edit\";\n      });\n    },\n    /** 提交按钮 */\n    submitForm: function() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.machineryId != undefined) {\n            updateMachinery(this.form).then(response => {\n              this.$modal.msgSuccess(\"修改成功\");\n              this.open = false;\n              this.getList();\n            });\n          } else {\n            debugger;\n            addMachinery(this.form).then(response => {\n              this.$modal.msgSuccess(\"新增成功\");\n              this.open = false;\n              this.getList();\n            });\n          }\n        }\n      });\n    },\n    /** 删除按钮操作 */\n    handleDelete(row) {\n      const machineryIds = row.machineryId || this.ids;\n      this.$modal.confirm('确认删除数据项？').then(function() {\n        return delMachinery(machineryIds);\n      }).then(() => {\n        this.getList();\n        this.$modal.msgSuccess(\"删除成功\");\n      }).catch(() => {});\n    },\n    /** 导出按钮操作 */\n    handleExport() {\n      this.download('mes/dv/machinery/export', {\n        ...this.queryParams\n      }, `user_${new Date().getTime()}.xlsx`)\n    },\n    /** 导入按钮操作 */\n    handleImport() {\n      this.upload.title = \"设备导入\";\n      this.upload.open = true;\n    },\n    /** 下载模板操作 */\n    importTemplate() {\n      this.download('mes/dv/machinery/importTemplate', {\n      }, `md_item_${new Date().getTime()}.xlsx`)\n    },\n    // 文件上传中处理\n    handleFileUploadProgress(event, file, fileList) {\n      this.upload.isUploading = true;\n    },\n    // 文件上传成功处理\n    handleFileSuccess(response, file, fileList) {\n      this.upload.open = false;\n      this.upload.isUploading = false;\n      this.$refs.upload.clearFiles();\n      this.$alert(\"<div style='overflow: auto;overflow-x: hidden;max-height: 70vh;padding: 10px 20px 0;'>\" + response.msg + \"</div>\", \"导入结果\", { dangerouslyUseHTMLString: true });\n      this.getList();\n    },\n    // 提交上传文件\n    submitFileForm() {\n      this.$refs.upload.submit();\n    },\n    //自动生成编码\n    handleAutoGenChange(autoGenFlag){\n      debugger;\n      if(autoGenFlag){\n        genCode('MACHINERY_CODE').then(response =>{\n          this.form.machineryCode = response;\n        });\n      }else{\n        this.form.machineryCode = null;\n      }\n    }\n  }\n};\n</script>"]}]}