{"remainingRequest":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\dv\\machinery\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\dv\\machinery\\index.vue","mtime":1665505269000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\babel.config.js","mtime":1665505269000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1662432871518},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1662432874590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9yZXNvdXJjZS9lY2xpcHNlLXdvcmtzcGFjZS9rdGctbWVzLW1hc3Rlci9rdGctbWVzLXVpLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyIpOwoKdmFyIF9vYmplY3RTcHJlYWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJEOi9yZXNvdXJjZS9lY2xpcHNlLXdvcmtzcGFjZS9rdGctbWVzLW1hc3Rlci9rdGctbWVzLXVpLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RTcHJlYWQyLmpzIikpOwoKdmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkQ6L3Jlc291cmNlL2VjbGlwc2Utd29ya3NwYWNlL2t0Zy1tZXMtbWFzdGVyL2t0Zy1tZXMtdWktbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5LmpzIikpOwoKdmFyIF9tYWNoaW5lcnkgPSByZXF1aXJlKCJAL2FwaS9tZXMvZHYvbWFjaGluZXJ5Iik7Cgp2YXIgX21hY2hpbmVyeXR5cGUgPSByZXF1aXJlKCJAL2FwaS9tZXMvZHYvbWFjaGluZXJ5dHlwZSIpOwoKdmFyIF93b3Jrc2hvcCA9IHJlcXVpcmUoIkAvYXBpL21lcy9tZC93b3Jrc2hvcCIpOwoKdmFyIF9ydWxlID0gcmVxdWlyZSgiQC9hcGkvc3lzdGVtL2F1dG9jb2RlL3J1bGUiKTsKCnZhciBfYXV0aCA9IHJlcXVpcmUoIkAvdXRpbHMvYXV0aCIpOwoKdmFyIF92dWVUcmVlc2VsZWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAcmlvcGhhZS92dWUtdHJlZXNlbGVjdCIpKTsKCnJlcXVpcmUoIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzIik7CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQgPSB7CiAgbmFtZTogIk1hY2hpbmVyeSIsCiAgZGljdHM6IFsnc3lzX3llc19ubycsICdtZXNfbWFjaGluZXJ5X3N0YXR1cyddLAogIGNvbXBvbmVudHM6IHsKICAgIFRyZWVzZWxlY3Q6IF92dWVUcmVlc2VsZWN0LmRlZmF1bHQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgX3JlZjsKCiAgICByZXR1cm4gX3JlZiA9IHsKICAgICAgLy/oh6rliqjnlJ/miJDnvJbnoIEKICAgICAgYXV0b0dlbkZsYWc6IGZhbHNlLAogICAgICBvcHRUeXBlOiB1bmRlZmluZWQsCiAgICAgIC8vIOmBrue9qeWxggogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAvLyDpgInkuK3mlbDnu4QKICAgICAgaWRzOiBbXSwKICAgICAgLy8g6Z2e5Y2V5Liq56aB55SoCiAgICAgIHNpbmdsZTogdHJ1ZSwKICAgICAgLy8g6Z2e5aSa5Liq56aB55SoCiAgICAgIG11bHRpcGxlOiB0cnVlLAogICAgICAvLyDmmL7npLrmkJzntKLmnaHku7YKICAgICAgc2hvd1NlYXJjaDogdHJ1ZSwKICAgICAgLy8g5oC75p2h5pWwCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDnianmlpnkuqflk4HooajmoLzmlbDmja4KICAgICAgbWFjaGluZXJ5TGlzdDogW10sCiAgICAgIC8vIOW8ueWHuuWxguagh+mimAogICAgICB0aXRsZTogIiIsCiAgICAgIC8vIOiuvuWkh+exu+Wei+agkemAiemhuQogICAgICBtYWNoaW5lcnlUeXBlT3B0aW9uczogW10sCiAgICAgIC8v6L2m6Ze06YCJ6aG5CiAgICAgIHdvcmtzaG9wT3B0aW9uczogW10sCiAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxggogICAgICBvcGVuOiBmYWxzZSwKICAgICAgLy8g6K6+5aSH57G75Z6L5ZCN56ewCiAgICAgIG1hY2hpbmVyeVR5cGVOYW1lOiB1bmRlZmluZWQKICAgIH0sICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKF9yZWYsICJhdXRvR2VuRmxhZyIsIGZhbHNlKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkoX3JlZiwgImZvcm0iLCB7fSksICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKF9yZWYsICJkZWZhdWx0UHJvcHMiLCB7CiAgICAgIGNoaWxkcmVuOiAiY2hpbGRyZW4iLAogICAgICBsYWJlbDogIm1hY2hpbmVyeVR5cGVOYW1lIgogICAgfSksICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKF9yZWYsICJ1cGxvYWQiLCB7CiAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxgu+8iOeUqOaIt+WvvOWFpe+8iQogICAgICBvcGVuOiBmYWxzZSwKICAgICAgLy8g5by55Ye65bGC5qCH6aKY77yI55So5oi35a+85YWl77yJCiAgICAgIHRpdGxlOiAiIiwKICAgICAgLy8g5piv5ZCm56aB55So5LiK5LygCiAgICAgIGlzVXBsb2FkaW5nOiBmYWxzZSwKICAgICAgLy8g5piv5ZCm5pu05paw5bey57uP5a2Y5Zyo55qE55So5oi35pWw5o2uCiAgICAgIHVwZGF0ZVN1cHBvcnQ6IDAsCiAgICAgIC8vIOiuvue9ruS4iuS8oOeahOivt+axguWktOmDqAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgKDAsIF9hdXRoLmdldFRva2VuKSgpCiAgICAgIH0sCiAgICAgIC8vIOS4iuS8oOeahOWcsOWdgAogICAgICB1cmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEkgKyAiL21lcy9kdi9tYWNoaW5lcnkvaW1wb3J0RGF0YSIKICAgIH0pLCAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KShfcmVmLCAicXVlcnlQYXJhbXMiLCB7CiAgICAgIHBhZ2VOdW06IDEsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgbWFjaGluZXJ5Q29kZTogbnVsbCwKICAgICAgbWFjaGluZXJ5TmFtZTogbnVsbCwKICAgICAgbWFjaGluZXJ5QnJhbmQ6IG51bGwsCiAgICAgIG1hY2hpbmVyeVNwZWM6IG51bGwsCiAgICAgIG1hY2hpbmVyeVR5cGVJZDogbnVsbCwKICAgICAgbWFjaGluZXJ5VHlwZUNvZGU6IG51bGwsCiAgICAgIG1hY2hpbmVyeVR5cGVOYW1lOiBudWxsLAogICAgICB3b3Jrc2hvcElkOiBudWxsLAogICAgICB3b3Jrc2hvcENvZGU6IG51bGwsCiAgICAgIHdvcmtzaG9wTmFtZTogbnVsbCwKICAgICAgc3RhdHVzOiBudWxsCiAgICB9KSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkoX3JlZiwgInJ1bGVzIiwgewogICAgICBtYWNoaW5lcnlDb2RlOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICLorr7lpIfnvJbnoIHkuI3og73kuLrnqboiLAogICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICB9LCB7CiAgICAgICAgbWF4OiA2NCwKICAgICAgICBtZXNzYWdlOiAn6K6+5aSH57yW56CB6ZW/5bqm5b+F6aG75bCP5LqONjTkuKrlrZfnrKYnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgbWFjaGluZXJ5TmFtZTogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAi6K6+5aSH5ZCN56ew5LiN6IO95Li656m6IiwKICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgfV0sCiAgICAgIHdvcmtzaG9wSWQ6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogIui9pumXtOS4jeiDveS4uuepuiIsCiAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgIH1dLAogICAgICBtYWNoaW5lcnlUeXBlSWQ6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogIuiuvuWkh+WIhuexu+S4jeiDveS4uuepuiIsCiAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgIH1dCiAgICB9KSwgX3JlZjsKICB9LAogIHdhdGNoOiB7CiAgICAvLyDmoLnmja7orr7lpIfliIbnsbvlkI3np7DnrZvpgInliIbnsbvmoJEKICAgIG1hY2hpbmVyeVR5cGVOYW1lOiBmdW5jdGlvbiBtYWNoaW5lcnlUeXBlTmFtZSh2YWwpIHsKICAgICAgdGhpcy4kcmVmcy50cmVlLmZpbHRlcih2YWwpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgdGhpcy5nZXRUcmVlc2VsZWN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKiog5p+l6K+i54mp5paZ57yW56CB5YiX6KGoICovCiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgKDAsIF9tYWNoaW5lcnkubGlzdE1hY2hpbmVyeSkodGhpcy5xdWVyeVBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5tYWNoaW5lcnlMaXN0ID0gcmVzcG9uc2Uucm93czsKICAgICAgICBfdGhpcy50b3RhbCA9IHJlc3BvbnNlLnRvdGFsOwogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0V29ya3Nob3BzOiBmdW5jdGlvbiBnZXRXb3Jrc2hvcHMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgKDAsIF93b3Jrc2hvcC5saXN0QWxsV29ya3Nob3ApKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBkZWJ1Z2dlcjsKICAgICAgICBfdGhpczIud29ya3Nob3BPcHRpb25zID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKiDovazmjaLorr7lpIfnsbvlnovmlbDmja7nu5PmnoQgKi8KICAgIG5vcm1hbGl6ZXI6IGZ1bmN0aW9uIG5vcm1hbGl6ZXIobm9kZSkgewogICAgICBpZiAobm9kZS5jaGlsZHJlbiAmJiAhbm9kZS5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICBkZWxldGUgbm9kZS5jaGlsZHJlbjsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogbm9kZS5tYWNoaW5lcnlUeXBlSWQsCiAgICAgICAgbGFiZWw6IG5vZGUubWFjaGluZXJ5VHlwZU5hbWUsCiAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4KICAgICAgfTsKICAgIH0sCgogICAgLyoqIOafpeivouiuvuWkh+exu+Wei+S4i+aLieagkee7k+aehCAqLwogICAgZ2V0VHJlZXNlbGVjdDogZnVuY3Rpb24gZ2V0VHJlZXNlbGVjdCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAoMCwgX21hY2hpbmVyeXR5cGUubGlzdE1hY2hpbmVyeXR5cGUpKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBkZWJ1Z2dlcjsKICAgICAgICBfdGhpczMubWFjaGluZXJ5VHlwZU9wdGlvbnMgPSBbXTsKCiAgICAgICAgdmFyIGRhdGEgPSBfdGhpczMuaGFuZGxlVHJlZShyZXNwb25zZS5kYXRhLCAibWFjaGluZXJ5VHlwZUlkIiwgInBhcmVudFR5cGVJZCIpWzBdOwoKICAgICAgICBfdGhpczMubWFjaGluZXJ5VHlwZU9wdGlvbnMucHVzaChkYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g562b6YCJ6IqC54K5CiAgICBmaWx0ZXJOb2RlOiBmdW5jdGlvbiBmaWx0ZXJOb2RlKHZhbHVlLCBkYXRhKSB7CiAgICAgIGlmICghdmFsdWUpIHJldHVybiB0cnVlOwogICAgICByZXR1cm4gZGF0YS5tYWNoaW5lcnlUeXBlTmFtZS5pbmRleE9mKHZhbHVlKSAhPT0gLTE7CiAgICB9LAogICAgLy8g6IqC54K55Y2V5Ye75LqL5Lu2CiAgICBoYW5kbGVOb2RlQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZU5vZGVDbGljayhkYXRhKSB7CiAgICAgIGRlYnVnZ2VyOwogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLm1hY2hpbmVyeVR5cGVJZCA9IGRhdGEubWFjaGluZXJ5VHlwZUlkOwogICAgICB0aGlzLmhhbmRsZVF1ZXJ5KCk7CiAgICB9LAogICAgLy8g5Y+W5raI5oyJ6ZKuCiAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgdGhpcy5vcGVuID0gZmFsc2U7CiAgICAgIHRoaXMucmVzZXQoKTsKICAgIH0sCiAgICAvLyDooajljZXph43nva4KICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy5mb3JtID0gewogICAgICAgIG1hY2hpbmVyeUlkOiBudWxsLAogICAgICAgIG1hY2hpbmVyeUNvZGU6IG51bGwsCiAgICAgICAgbWFjaGluZXJ5TmFtZTogbnVsbCwKICAgICAgICBtYWNoaW5lcnlCcmFuZDogbnVsbCwKICAgICAgICBtYWNoaW5lcnlTcGVjOiBudWxsLAogICAgICAgIG1hY2hpbmVyeVR5cGVJZDogbnVsbCwKICAgICAgICBtYWNoaW5lcnlUeXBlQ29kZTogbnVsbCwKICAgICAgICBtYWNoaW5lcnlUeXBlTmFtZTogbnVsbCwKICAgICAgICB3b3Jrc2hvcElkOiBudWxsLAogICAgICAgIHdvcmtzaG9wQ29kZTogbnVsbCwKICAgICAgICB3b3Jrc2hvcE5hbWU6IG51bGwsCiAgICAgICAgc3RhdHVzOiAiU1RPUCIsCiAgICAgICAgcmVtYXJrOiBudWxsLAogICAgICAgIGNyZWF0ZUJ5OiBudWxsLAogICAgICAgIGNyZWF0ZVRpbWU6IG51bGwsCiAgICAgICAgdXBkYXRlQnk6IG51bGwsCiAgICAgICAgdXBkYXRlVGltZTogbnVsbAogICAgICB9OwogICAgICB0aGlzLmF1dG9HZW5GbGFnID0gZmFsc2U7CiAgICAgIHRoaXMucmVzZXRGb3JtKCJmb3JtIik7CiAgICB9LAoKICAgIC8qKiDmkJzntKLmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZVF1ZXJ5OiBmdW5jdGlvbiBoYW5kbGVRdWVyeSgpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlTnVtID0gMTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAoKICAgIC8qKiDph43nva7mjInpkq7mk43kvZwgKi8KICAgIHJlc2V0UXVlcnk6IGZ1bmN0aW9uIHJlc2V0UXVlcnkoKSB7CiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsKICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOwogICAgfSwKICAgIC8vIOWkmumAieahhumAieS4reaVsOaNrgogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3Rpb25DaGFuZ2Uoc2VsZWN0aW9uKSB7CiAgICAgIHRoaXMuaWRzID0gc2VsZWN0aW9uLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLm1hY2hpbmVyeUlkOwogICAgICB9KTsKICAgICAgdGhpcy5zaW5nbGUgPSBzZWxlY3Rpb24ubGVuZ3RoICE9IDE7CiAgICAgIHRoaXMubXVsdGlwbGUgPSAhc2VsZWN0aW9uLmxlbmd0aDsKICAgIH0sCiAgICAvLyDmn6Xor6LmmI7nu4bmjInpkq7mk43kvZwKICAgIGhhbmRsZVZpZXc6IGZ1bmN0aW9uIGhhbmRsZVZpZXcocm93KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy5yZXNldCgpOwogICAgICB0aGlzLmdldFRyZWVzZWxlY3QoKTsKICAgICAgdGhpcy5nZXRXb3Jrc2hvcHMoKTsKICAgICAgdmFyIG1hY2hpbmVyeUlkID0gcm93Lm1hY2hpbmVyeUlkIHx8IHRoaXMuaWRzOwogICAgICAoMCwgX21hY2hpbmVyeS5nZXRNYWNoaW5lcnkpKG1hY2hpbmVyeUlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzNC5mb3JtID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBfdGhpczQub3BlbiA9IHRydWU7CiAgICAgICAgX3RoaXM0LnRpdGxlID0gIuafpeeci+iuvuWkh+S/oeaBryI7CiAgICAgICAgX3RoaXM0Lm9wdFR5cGUgPSAidmlldyI7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKiog5paw5aKe5oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVBZGQ6IGZ1bmN0aW9uIGhhbmRsZUFkZCgpIHsKICAgICAgZGVidWdnZXI7CiAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgdGhpcy5nZXRUcmVlc2VsZWN0KCk7CiAgICAgIHRoaXMuZ2V0V29ya3Nob3BzKCk7CgogICAgICBpZiAodGhpcy5xdWVyeVBhcmFtcy5tYWNoaW5lcnlUeXBlSWQgIT0gMCkgewogICAgICAgIHRoaXMuZm9ybS5tYWNoaW5lcnlUeXBlSWQgPSB0aGlzLnF1ZXJ5UGFyYW1zLm1hY2hpbmVyeVR5cGVJZDsKICAgICAgfQoKICAgICAgdGhpcy5vcHRUeXBlID0gImFkZCI7CiAgICAgIHRoaXMub3BlbiA9IHRydWU7CiAgICAgIHRoaXMudGl0bGUgPSAi5paw5aKe6K6+5aSHIjsKICAgIH0sCgogICAgLyoqIOS/ruaUueaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlVXBkYXRlOiBmdW5jdGlvbiBoYW5kbGVVcGRhdGUocm93KSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy5yZXNldCgpOwogICAgICB0aGlzLmdldFRyZWVzZWxlY3QoKTsKICAgICAgdGhpcy5nZXRXb3Jrc2hvcHMoKTsKICAgICAgdmFyIG1hY2hpbmVyeUlkID0gcm93Lm1hY2hpbmVyeUlkIHx8IHRoaXMuaWRzOwogICAgICAoMCwgX21hY2hpbmVyeS5nZXRNYWNoaW5lcnkpKG1hY2hpbmVyeUlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzNS5mb3JtID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBfdGhpczUub3BlbiA9IHRydWU7CiAgICAgICAgX3RoaXM1LnRpdGxlID0gIuS/ruaUueiuvuWkhyI7CiAgICAgICAgX3RoaXM1Lm9wdFR5cGUgPSAiZWRpdCI7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKiog5o+Q5Lqk5oyJ6ZKuICovCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbImZvcm0iXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmIChfdGhpczYuZm9ybS5tYWNoaW5lcnlJZCAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgKDAsIF9tYWNoaW5lcnkudXBkYXRlTWFjaGluZXJ5KShfdGhpczYuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBfdGhpczYuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOwoKICAgICAgICAgICAgICBfdGhpczYub3BlbiA9IGZhbHNlOwoKICAgICAgICAgICAgICBfdGhpczYuZ2V0TGlzdCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRlYnVnZ2VyOwogICAgICAgICAgICAoMCwgX21hY2hpbmVyeS5hZGRNYWNoaW5lcnkpKF90aGlzNi5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIF90aGlzNi4kbW9kYWwubXNnU3VjY2Vzcygi5paw5aKe5oiQ5YqfIik7CgogICAgICAgICAgICAgIF90aGlzNi5vcGVuID0gZmFsc2U7CgogICAgICAgICAgICAgIF90aGlzNi5nZXRMaXN0KCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIC8qKiDliKDpmaTmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZURlbGV0ZTogZnVuY3Rpb24gaGFuZGxlRGVsZXRlKHJvdykgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHZhciBtYWNoaW5lcnlJZHMgPSByb3cubWFjaGluZXJ5SWQgfHwgdGhpcy5pZHM7CiAgICAgIHRoaXMuJG1vZGFsLmNvbmZpcm0oJ+ehruiupOWIoOmZpOaVsOaNrumhue+8nycpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAoMCwgX21hY2hpbmVyeS5kZWxNYWNoaW5lcnkpKG1hY2hpbmVyeUlkcyk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNy5nZXRMaXN0KCk7CgogICAgICAgIF90aGlzNy4kbW9kYWwubXNnU3VjY2Vzcygi5Yig6Zmk5oiQ5YqfIik7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTsKICAgIH0sCgogICAgLyoqIOWvvOWHuuaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlRXhwb3J0OiBmdW5jdGlvbiBoYW5kbGVFeHBvcnQoKSB7CiAgICAgIHRoaXMuZG93bmxvYWQoJ21lcy9kdi9tYWNoaW5lcnkvZXhwb3J0JywgKDAsIF9vYmplY3RTcHJlYWQyLmRlZmF1bHQpKHt9LCB0aGlzLnF1ZXJ5UGFyYW1zKSwgInVzZXJfIi5jb25jYXQobmV3IERhdGUoKS5nZXRUaW1lKCksICIueGxzeCIpKTsKICAgIH0sCgogICAgLyoqIOWvvOWFpeaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlSW1wb3J0OiBmdW5jdGlvbiBoYW5kbGVJbXBvcnQoKSB7CiAgICAgIHRoaXMudXBsb2FkLnRpdGxlID0gIuiuvuWkh+WvvOWFpSI7CiAgICAgIHRoaXMudXBsb2FkLm9wZW4gPSB0cnVlOwogICAgfSwKCiAgICAvKiog5LiL6L295qih5p2/5pON5L2cICovCiAgICBpbXBvcnRUZW1wbGF0ZTogZnVuY3Rpb24gaW1wb3J0VGVtcGxhdGUoKSB7CiAgICAgIHRoaXMuZG93bmxvYWQoJ21lcy9kdi9tYWNoaW5lcnkvaW1wb3J0VGVtcGxhdGUnLCB7fSwgIm1kX2l0ZW1fIi5jb25jYXQobmV3IERhdGUoKS5nZXRUaW1lKCksICIueGxzeCIpKTsKICAgIH0sCiAgICAvLyDmlofku7bkuIrkvKDkuK3lpITnkIYKICAgIGhhbmRsZUZpbGVVcGxvYWRQcm9ncmVzczogZnVuY3Rpb24gaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzKGV2ZW50LCBmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLnVwbG9hZC5pc1VwbG9hZGluZyA9IHRydWU7CiAgICB9LAogICAgLy8g5paH5Lu25LiK5Lyg5oiQ5Yqf5aSE55CGCiAgICBoYW5kbGVGaWxlU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlRmlsZVN1Y2Nlc3MocmVzcG9uc2UsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMudXBsb2FkLm9wZW4gPSBmYWxzZTsKICAgICAgdGhpcy51cGxvYWQuaXNVcGxvYWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy4kcmVmcy51cGxvYWQuY2xlYXJGaWxlcygpOwogICAgICB0aGlzLiRhbGVydCgiPGRpdiBzdHlsZT0nb3ZlcmZsb3c6IGF1dG87b3ZlcmZsb3cteDogaGlkZGVuO21heC1oZWlnaHQ6IDcwdmg7cGFkZGluZzogMTBweCAyMHB4IDA7Jz4iICsgcmVzcG9uc2UubXNnICsgIjwvZGl2PiIsICLlr7zlhaXnu5PmnpwiLCB7CiAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlCiAgICAgIH0pOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICAvLyDmj5DkuqTkuIrkvKDmlofku7YKICAgIHN1Ym1pdEZpbGVGb3JtOiBmdW5jdGlvbiBzdWJtaXRGaWxlRm9ybSgpIHsKICAgICAgdGhpcy4kcmVmcy51cGxvYWQuc3VibWl0KCk7CiAgICB9LAogICAgLy/oh6rliqjnlJ/miJDnvJbnoIEKICAgIGhhbmRsZUF1dG9HZW5DaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUF1dG9HZW5DaGFuZ2UoYXV0b0dlbkZsYWcpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICBkZWJ1Z2dlcjsKCiAgICAgIGlmIChhdXRvR2VuRmxhZykgewogICAgICAgICgwLCBfcnVsZS5nZW5Db2RlKSgnTUFDSElORVJZX0NPREUnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXM4LmZvcm0ubWFjaGluZXJ5Q29kZSA9IHJlc3BvbnNlOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZm9ybS5tYWNoaW5lcnlDb2RlID0gbnVsbDsKICAgICAgfQogICAgfQogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"mappings":"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;IA0GA;IACAC,SA3GA,uBA2GA;MACA;MACA;MACA;MACA;;MACA;QACA;MACA;;MACA;MACA;MACA;IACA,CAtHA;;IAuHA;IACAC,YAxHA,wBAwHAF,GAxHA,EAwHA;MAAA;;MACA;MACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;MACA,CALA;IAMA,CAnIA;;IAoIA;IACAG;MAAA;;MACA;QACA;UACA;YACA;cACA;;cACA;;cACA;YACA,CAJA;UAKA,CANA,MAMA;YACA;YACA;cACA;;cACA;;cACA;YACA,CAJA;UAKA;QACA;MACA,CAjBA;IAkBA,CAxJA;;IAyJA;IACAC,YA1JA,wBA0JAJ,GA1JA,EA0JA;MAAA;;MACA;MACA;QACA;MACA,CAFA,EAEAK,IAFA,CAEA;QACA;;QACA;MACA,CALA,EAKAC,KALA,CAKA,cALA;IAMA,CAlKA;;IAmKA;IACAC,YApKA,0BAoKA;MACA,yEACA,gBADA,kBAEA,oBAFA;IAGA,CAxKA;;IAyKA;IACAC,YA1KA,0BA0KA;MACA;MACA;IACA,CA7KA;;IA8KA;IACAC,cA/KA,4BA+KA;MACA,uEACA,oBADA;IAEA,CAlLA;IAmLA;IACAC,wBApLA,oCAoLAC,KApLA,EAoLAC,IApLA,EAoLAC,QApLA,EAoLA;MACA;IACA,CAtLA;IAuLA;IACAC,iBAxLA,6BAwLAC,QAxLA,EAwLAH,IAxLA,EAwLAC,QAxLA,EAwLA;MACA;MACA;MACA;MACA;QAAAG;MAAA;MACA;IACA,CA9LA;IA+LA;IACAC,cAhMA,4BAgMA;MACA;IACA,CAlMA;IAmMA;IACAC,mBApMA,+BAoMAjF,WApMA,EAoMA;MAAA;;MACA;;MACA;QACA;UACA;QACA,CAFA;MAGA,CAJA,MAIA;QACA;MACA;IACA;EA7MA;AArGA,C","names":["name","dicts","components","Treeselect","data","autoGenFlag","optType","loading","ids","single","multiple","showSearch","total","machineryList","title","machineryTypeOptions","workshopOptions","open","machineryTypeName","children","label","isUploading","updateSupport","headers","Authorization","url","pageNum","pageSize","machineryCode","machineryName","machineryBrand","machinerySpec","machineryTypeId","machineryTypeCode","workshopId","workshopCode","workshopName","status","required","message","trigger","max","watch","val","created","methods","getList","getWorkshops","normalizer","node","id","getTreeselect","filterNode","value","handleNodeClick","cancel","reset","machineryId","remark","createBy","createTime","updateBy","updateTime","handleQuery","resetQuery","handleSelectionChange","selection","handleView","row","handleAdd","handleUpdate","submitForm","handleDelete","then","catch","handleExport","handleImport","importTemplate","handleFileUploadProgress","event","file","fileList","handleFileSuccess","response","dangerouslyUseHTMLString","submitFileForm","handleAutoGenChange"],"sourceRoot":"src/views/mes/dv/machinery","sources":["index.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-row :gutter=\"20\">\n      <!--分类数据-->\n      <el-col :span=\"4\" :xs=\"24\">\n        <div class=\"head-container\">\n          <el-input\n            v-model=\"machineryTypeName\"\n            placeholder=\"请输入分类名称\"\n            clearable\n            size=\"small\"\n            prefix-icon=\"el-icon-search\"\n            style=\"margin-bottom: 20px\"\n          />\n        </div>\n        <div class=\"head-container\">\n          <el-tree\n            :data=\"machineryTypeOptions\"\n            :props=\"defaultProps\"\n            :expand-on-click-node=\"false\"\n            :filter-node-method=\"filterNode\"\n            ref=\"tree\"\n            default-expand-all\n            @node-click=\"handleNodeClick\"\n          />\n        </div>\n      </el-col>\n      <!--设备数据-->\n      <el-col :span=\"20\" :xs=\"24\">\n        <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\n          <el-form-item label=\"设备编码\" prop=\"machineryCode\">\n            <el-input\n              v-model=\"queryParams.machineryCode\"\n              placeholder=\"请输入设备编码\"\n              clearable\n              style=\"width: 240px\"\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item label=\"设备名称\" prop=\"machineryName\">\n            <el-input\n              v-model=\"queryParams.machineryName\"\n              placeholder=\"请输入设备名称\"\n              clearable\n              style=\"width: 240px\"\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n            <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n          </el-form-item>\n        </el-form>\n\n        <el-row :gutter=\"10\" class=\"mb8\">\n          <el-col :span=\"1.5\">\n            <el-button\n              type=\"primary\"\n              plain\n              icon=\"el-icon-plus\"\n              size=\"mini\"\n              @click=\"handleAdd\"\n              v-hasPermi=\"['mes:dv:machinery:add']\"\n            >新增</el-button>\n          </el-col>\n          <el-col :span=\"1.5\">\n            <el-button\n              type=\"success\"\n              plain\n              icon=\"el-icon-edit\"\n              size=\"mini\"\n              :disabled=\"single\"\n              @click=\"handleUpdate\"\n              v-hasPermi=\"['mes:dv:machinery:edit']\"\n            >修改</el-button>\n          </el-col>\n          <el-col :span=\"1.5\">\n            <el-button\n              type=\"danger\"\n              plain\n              icon=\"el-icon-delete\"\n              size=\"mini\"\n              :disabled=\"multiple\"\n              @click=\"handleDelete\"\n              v-hasPermi=\"['mes:dv:machinery:remove']\"\n            >删除</el-button>\n          </el-col>\n          <el-col :span=\"1.5\">\n            <el-button\n              type=\"info\"\n              plain\n              icon=\"el-icon-upload2\"\n              size=\"mini\"\n              @click=\"handleImport\"\n              v-hasPermi=\"['mes:dv:machinery:import']\"\n            >导入</el-button>\n          </el-col>\n          <el-col :span=\"1.5\">\n            <el-button\n              type=\"warning\"\n              plain\n              icon=\"el-icon-download\"\n              size=\"mini\"\n              @click=\"handleExport\"\n              v-hasPermi=\"['mes:dv:machinery:export']\"\n            >导出</el-button>\n          </el-col>\n          <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\n        </el-row>\n\n        <el-table v-loading=\"loading\" :data=\"machineryList\" @selection-change=\"handleSelectionChange\">\n          <el-table-column type=\"selection\" width=\"50\" align=\"center\" />\n          <el-table-column label=\"设备编码\" width = \"120\" align=\"center\" key=\"machineryCode\" prop=\"machineryCode\">\n              <template slot-scope=\"scope\">\n                <el-button\n                  size=\"mini\"\n                  type=\"text\"\n                  @click=\"handleView(scope.row)\"\n                  v-hasPermi=\"['mes:dv:machinery:query']\"\n                >{{scope.row.machineryCode}}</el-button>\n              </template>\n          </el-table-column>\n          <el-table-column label=\"设备名称\" min-width=\"120\" align=\"left\" key=\"machineryName\" prop=\"machineryName\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"品牌\" align=\"left\" key=\"machineryBrand\" prop=\"machineryBrand\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"规格型号\" align=\"left\" key=\"machinerySpec\" prop=\"machinerySpec\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"所属车间\" align=\"center\" key=\"machineryTypeName\" prop=\"machineryTypeName\"  :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"设备状态\" align=\"center\" key=\"status\" prop=\"status\" >\n            <template slot-scope=\"scope\">\n              <dict-tag :options=\"dict.type.mes_machinery_status\" :value=\"scope.row.status\"/>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"160\">\n            <template slot-scope=\"scope\">\n              <span>{{ parseTime(scope.row.createTime) }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column\n            label=\"操作\"\n            align=\"center\"\n            width=\"160\"\n            class-name=\"small-padding fixed-width\"\n          >\n            <template slot-scope=\"scope\">\n              <el-button\n                size=\"mini\"\n                type=\"text\"\n                icon=\"el-icon-edit\"\n                @click=\"handleUpdate(scope.row)\"\n                v-hasPermi=\"['mes:dv:machinery:edit']\"\n              >修改</el-button>\n              <el-button\n                size=\"mini\"\n                type=\"text\"\n                icon=\"el-icon-delete\"\n                @click=\"handleDelete(scope.row)\"\n                v-hasPermi=\"['mes:dv:machinery:remove']\"\n              >删除</el-button>              \n            </template>\n          </el-table-column>\n        </el-table>\n\n        <pagination\n          v-show=\"total>0\"\n          :total=\"total\"\n          :page.sync=\"queryParams.pageNum\"\n          :limit.sync=\"queryParams.pageSize\"\n          @pagination=\"getList\"\n        />\n      </el-col>\n    </el-row>\n\n    <!-- 添加或修改设备对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"960px\" append-to-body>\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\n        <el-row>\n          <el-col :span=\"8\">\n            <el-form-item label=\"设备编码\" prop=\"itemCode\">\n              <el-input v-model=\"form.machineryCode\" readonly=\"readonly\" maxlength=\"64\" v-if=\"optType == 'view'\"/>\n              <el-input v-model=\"form.machineryCode\" placeholder=\"请输入设备编码\" maxlength=\"64\" v-else/>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"4\">\n            <el-form-item  label-width=\"80\">\n              <el-switch v-model=\"autoGenFlag\"\n                  active-color=\"#13ce66\"\n                  active-text=\"自动生成\"\n                  @change=\"handleAutoGenChange(autoGenFlag)\" v-if=\"optType != 'view'\">               \n              </el-switch>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"设备名称\" prop=\"itemName\">\n              <el-input v-model=\"form.machineryName\"  maxlength=\"255\" readonly=\"readonly\" v-if=\"optType=='view'\" />\n              <el-input v-model=\"form.machineryName\" placeholder=\"请输入设备名称\" maxlength=\"255\" v-else/>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"品牌\" prop=\"machineryBrand\">\n              <el-input v-model=\"form.machineryBrand\"  maxlength=\"255\" readonly=\"readonly\" v-if=\"optType=='view'\" />\n              <el-input v-model=\"form.machineryBrand\"  placeholder=\"请输入品牌\" maxlength=\"255\" v-else/>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item  label=\"设备分类\" prop=\"machineryTypeId\">\n              <treeselect v-model=\"form.machineryTypeId\" :options=\"machineryTypeOptions\" :normalizer=\"normalizer\" disabled v-if=\"optType=='view'\"  />\n              <treeselect v-model=\"form.machineryTypeId\" :options=\"machineryTypeOptions\" :normalizer=\"normalizer\" placeholder=\"请选择所属分类\" v-else />\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"规格型号\" prop=\"machinerySpec\">\n              <el-input v-model=\"form.machinerySpec\" type=\"textarea\" maxlength=\"255\" readonly=\"readonly\" v-if=\"optType=='view'\" />\n              <el-input v-model=\"form.machinerySpec\" type=\"textarea\" placeholder=\"请输入规格型号\" maxlength=\"255\" v-else/>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"所属车间\" prop=\"workshopId\">\n            <el-select v-model=\"form.workshopId\" placeholder=\"请选择车间\">\n              <el-option\n                v-for=\"item in workshopOptions\"\n                :key=\"item.workshopId\"\n                :label=\"item.workshopName\"\n                :value=\"item.workshopId\"\n              ></el-option>\n            </el-select>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\">\n            <el-form-item label=\"备注\">\n              <el-input v-model=\"form.remark\" type=\"textarea\" readonly v-if=\"optType=='view'\"></el-input>\n              <el-input v-model=\"form.remark\" type=\"textarea\" placeholder=\"请输入内容\" v-else></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"cancel\" v-if=\"optType =='view'\">返回</el-button>\n        <el-button type=\"primary\" @click=\"submitForm\" v-else>确 定</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 物料导入对话框 -->\n    <el-dialog :title=\"upload.title\" :visible.sync=\"upload.open\" width=\"400px\" append-to-body>\n      <el-upload\n        ref=\"upload\"\n        :limit=\"1\"\n        accept=\".xlsx, .xls\"\n        :headers=\"upload.headers\"\n        :action=\"upload.url + '?updateSupport=' + upload.updateSupport\"\n        :disabled=\"upload.isUploading\"\n        :on-progress=\"handleFileUploadProgress\"\n        :on-success=\"handleFileSuccess\"\n        :auto-upload=\"false\"\n        drag\n      >\n        <i class=\"el-icon-upload\"></i>\n        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n        <div class=\"el-upload__tip text-center\" slot=\"tip\">\n          <div class=\"el-upload__tip\" slot=\"tip\">\n            <el-checkbox v-model=\"upload.updateSupport\" /> 是否更新已经存在的设备数据\n          </div>\n          <span>仅允许导入xls、xlsx格式文件。</span>\n          <el-link type=\"primary\" :underline=\"false\" style=\"font-size:12px;vertical-align: baseline;\" @click=\"importTemplate\">下载模板</el-link>\n        </div>\n      </el-upload>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitFileForm\">确 定</el-button>\n        <el-button @click=\"upload.open = false\">取 消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { listMachinery, getMachinery, delMachinery, addMachinery, updateMachinery } from \"@/api/mes/dv/machinery\";\nimport { listMachinerytype } from \"@/api/mes/dv/machinerytype\";\nimport { listAllWorkshop } from \"@/api/mes/md/workshop\";\nimport {genCode} from \"@/api/system/autocode/rule\"\nimport { getToken } from \"@/utils/auth\";\nimport Treeselect from \"@riophae/vue-treeselect\";\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\n\nexport default {\n  name: \"Machinery\",\n  dicts: ['sys_yes_no','mes_machinery_status'],\n  components: { Treeselect },\n  data() {\n    return {\n      //自动生成编码\n      autoGenFlag:false,\n      optType: undefined,\n      // 遮罩层\n      loading: true,\n      // 选中数组\n      ids: [],\n      // 非单个禁用\n      single: true,\n      // 非多个禁用\n      multiple: true,\n      // 显示搜索条件\n      showSearch: true,\n      // 总条数\n      total: 0,\n      // 物料产品表格数据\n      machineryList: [],\n      // 弹出层标题\n      title: \"\",\n      // 设备类型树选项\n      machineryTypeOptions: [],\n      //车间选项\n      workshopOptions:[],\n      // 是否显示弹出层\n      open: false,\n      // 设备类型名称\n      machineryTypeName: undefined,\n      //自动生成物料编码标识\n      autoGenFlag: false,\n      // 表单参数\n      form: {},\n      defaultProps: {\n        children: \"children\",\n        label: \"machineryTypeName\"\n      },\n      // 用户导入参数\n      upload: {\n        // 是否显示弹出层（用户导入）\n        open: false,\n        // 弹出层标题（用户导入）\n        title: \"\",\n        // 是否禁用上传\n        isUploading: false,\n        // 是否更新已经存在的用户数据\n        updateSupport: 0,\n        // 设置上传的请求头部\n        headers: { Authorization: \"Bearer \" + getToken() },\n        // 上传的地址\n        url: process.env.VUE_APP_BASE_API + \"/mes/dv/machinery/importData\"\n      },\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        machineryCode: null,\n        machineryName: null,\n        machineryBrand: null,\n        machinerySpec: null,\n        machineryTypeId: null,\n        machineryTypeCode: null,\n        machineryTypeName: null,\n        workshopId: null,\n        workshopCode: null,\n        workshopName: null,\n        status: null\n      },\n\n      // 表单校验\n      rules: {\n        machineryCode: [\n          { required: true, message: \"设备编码不能为空\", trigger: \"blur\" },\n          { max: 64, message: '设备编码长度必须小于64个字符', trigger: 'blur' }\n        ],\n        machineryName: [\n          { required: true, message: \"设备名称不能为空\", trigger: \"blur\" }\n        ],\n        workshopId: [\n          { required: true, message: \"车间不能为空\",trigger: \"blur\"}\n        ],\n        machineryTypeId: [\n          { required: true, message: \"设备分类不能为空\", trigger: \"blur\" },\n        ]\n      }\n    };\n  },\n  watch: {\n    // 根据设备分类名称筛选分类树\n    machineryTypeName(val) {\n      this.$refs.tree.filter(val);\n    }\n  },\n  created() {\n    this.getList();\n    this.getTreeselect();\n  },\n  methods: {\n    /** 查询物料编码列表 */\n    getList() {\n      this.loading = true;\n      listMachinery(this.queryParams).then(response => {\n          this.machineryList = response.rows;\n          this.total = response.total;\n          this.loading = false;\n        }\n      );\n    },\n    getWorkshops(){\n      listAllWorkshop().then( response => {\n        debugger;\n        this.workshopOptions =response.data;\n      });\n    },\n    /** 转换设备类型数据结构 */\n    normalizer(node) {\n      if (node.children && !node.children.length) {\n        delete node.children;\n      }\n      return {\n        id: node.machineryTypeId,\n        label: node.machineryTypeName,\n        children: node.children\n      };\n    },\n\t/** 查询设备类型下拉树结构 */\n    getTreeselect() {\n      listMachinerytype().then(response => {\n        debugger;\n        this.machineryTypeOptions = [];\n        const data = this.handleTree(response.data, \"machineryTypeId\", \"parentTypeId\")[0];\n        this.machineryTypeOptions.push(data);\n      });\n    },\n    // 筛选节点\n    filterNode(value, data) {\n      if (!value) return true;\n      return data.machineryTypeName.indexOf(value) !== -1;\n    },\n    // 节点单击事件\n    handleNodeClick(data) {\n      debugger;\n      this.queryParams.machineryTypeId = data.machineryTypeId;\n      this.handleQuery();\n    },\n    // 取消按钮\n    cancel() {\n      this.open = false;\n      this.reset();\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        machineryId: null,\n        machineryCode: null,\n        machineryName: null,\n        machineryBrand: null,\n        machinerySpec: null,\n        machineryTypeId: null,\n        machineryTypeCode: null,\n        machineryTypeName: null,\n        workshopId: null,\n        workshopCode: null,\n        workshopName: null,\n        status: \"STOP\",\n        remark: null,\n        createBy: null,\n        createTime: null,\n        updateBy: null,\n        updateTime: null       \n      };\n      this.autoGenFlag = false;\n      this.resetForm(\"form\");\n    },\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.resetForm(\"queryForm\");\n      this.handleQuery();\n    },\n    // 多选框选中数据\n    handleSelectionChange(selection) {\n      this.ids = selection.map(item => item.machineryId);\n      this.single = selection.length != 1;\n      this.multiple = !selection.length;\n    },\n    // 查询明细按钮操作\n    handleView(row){\n      this.reset();\n      this.getTreeselect();\n      this.getWorkshops();\n      const machineryId = row.machineryId || this.ids;\n      getMachinery(machineryId).then(response => {\n        this.form = response.data;\n        this.open = true;\n        this.title = \"查看设备信息\";\n        this.optType = \"view\";\n      });\n    },\n    /** 新增按钮操作 */\n    handleAdd() {\n      debugger;\n      this.reset();\n      this.getTreeselect();\n      this.getWorkshops();\n      if(this.queryParams.machineryTypeId != 0){\n        this.form.machineryTypeId = this.queryParams.machineryTypeId;\n      }\n      this.optType = \"add\";\n      this.open = true;\n      this.title = \"新增设备\";\n    },\n    /** 修改按钮操作 */\n    handleUpdate(row) {\n      this.reset();\n      this.getTreeselect();\n      this.getWorkshops();\n      const machineryId = row.machineryId || this.ids\n      getMachinery(machineryId).then(response => {\n        this.form = response.data;\n        this.open = true;\n        this.title = \"修改设备\";\n        this.optType = \"edit\";\n      });\n    },\n    /** 提交按钮 */\n    submitForm: function() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.machineryId != undefined) {\n            updateMachinery(this.form).then(response => {\n              this.$modal.msgSuccess(\"修改成功\");\n              this.open = false;\n              this.getList();\n            });\n          } else {\n            debugger;\n            addMachinery(this.form).then(response => {\n              this.$modal.msgSuccess(\"新增成功\");\n              this.open = false;\n              this.getList();\n            });\n          }\n        }\n      });\n    },\n    /** 删除按钮操作 */\n    handleDelete(row) {\n      const machineryIds = row.machineryId || this.ids;\n      this.$modal.confirm('确认删除数据项？').then(function() {\n        return delMachinery(machineryIds);\n      }).then(() => {\n        this.getList();\n        this.$modal.msgSuccess(\"删除成功\");\n      }).catch(() => {});\n    },\n    /** 导出按钮操作 */\n    handleExport() {\n      this.download('mes/dv/machinery/export', {\n        ...this.queryParams\n      }, `user_${new Date().getTime()}.xlsx`)\n    },\n    /** 导入按钮操作 */\n    handleImport() {\n      this.upload.title = \"设备导入\";\n      this.upload.open = true;\n    },\n    /** 下载模板操作 */\n    importTemplate() {\n      this.download('mes/dv/machinery/importTemplate', {\n      }, `md_item_${new Date().getTime()}.xlsx`)\n    },\n    // 文件上传中处理\n    handleFileUploadProgress(event, file, fileList) {\n      this.upload.isUploading = true;\n    },\n    // 文件上传成功处理\n    handleFileSuccess(response, file, fileList) {\n      this.upload.open = false;\n      this.upload.isUploading = false;\n      this.$refs.upload.clearFiles();\n      this.$alert(\"<div style='overflow: auto;overflow-x: hidden;max-height: 70vh;padding: 10px 20px 0;'>\" + response.msg + \"</div>\", \"导入结果\", { dangerouslyUseHTMLString: true });\n      this.getList();\n    },\n    // 提交上传文件\n    submitFileForm() {\n      this.$refs.upload.submit();\n    },\n    //自动生成编码\n    handleAutoGenChange(autoGenFlag){\n      debugger;\n      if(autoGenFlag){\n        genCode('MACHINERY_CODE').then(response =>{\n          this.form.machineryCode = response;\n        });\n      }else{\n        this.form.machineryCode = null;\n      }\n    }\n  }\n};\n</script>"]}]}