{"remainingRequest":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\dv\\machinerytype\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\views\\mes\\dv\\machinerytype\\index.vue","mtime":1665505269000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\babel.config.js","mtime":1665505269000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1662432871518},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1662432874590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9yZXNvdXJjZS9lY2xpcHNlLXdvcmtzcGFjZS9rdGctbWVzLW1hc3Rlci9rdGctbWVzLXVpLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7Cgp2YXIgX21hY2hpbmVyeXR5cGUgPSByZXF1aXJlKCJAL2FwaS9tZXMvZHYvbWFjaGluZXJ5dHlwZSIpOwoKdmFyIF92dWVUcmVlc2VsZWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAcmlvcGhhZS92dWUtdHJlZXNlbGVjdCIpKTsKCnJlcXVpcmUoIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzIik7CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQgPSB7CiAgbmFtZTogIk1hY2hpbmVyeXR5cGUiLAogIGRpY3RzOiBbJ3N5c195ZXNfbm8nXSwKICBjb21wb25lbnRzOiB7CiAgICBUcmVlc2VsZWN0OiBfdnVlVHJlZXNlbGVjdC5kZWZhdWx0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgb3B0VHlwZTogdW5kZWZpbmVkLAogICAgICAvLyDpga7nvanlsYIKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgLy8g5pi+56S65pCc57Si5p2h5Lu2CiAgICAgIHNob3dTZWFyY2g6IHRydWUsCiAgICAgIC8vIOiuvuWkh+exu+Wei+ihqOagvOaVsOaNrgogICAgICBtYWNoaW5lcnl0eXBlTGlzdDogW10sCiAgICAgIC8vIOiuvuWkh+exu+Wei+agkemAiemhuQogICAgICBtYWNoaW5lcnl0eXBlT3B0aW9uczogW10sCiAgICAgIC8vIOW8ueWHuuWxguagh+mimAogICAgICB0aXRsZTogIiIsCiAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxggogICAgICBvcGVuOiBmYWxzZSwKICAgICAgLy8g5p+l6K+i5Y+C5pWwCiAgICAgIHF1ZXJ5UGFyYW1zOiB7CiAgICAgICAgbWFjaGluZXJ5VHlwZUNvZGU6IG51bGwsCiAgICAgICAgbWFjaGluZXJ5VHlwZU5hbWU6IG51bGwsCiAgICAgICAgcGFyZW50VHlwZUlkOiBudWxsLAogICAgICAgIGFuY2VzdG9yczogbnVsbCwKICAgICAgICBlbmFibGVGbGFnOiBudWxsCiAgICAgIH0sCiAgICAgIC8vIOihqOWNleWPguaVsAogICAgICBmb3JtOiB7fSwKICAgICAgLy8g6KGo5Y2V5qCh6aqMCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgcGFyZW50VHlwZUlkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi54i257G75Z6L5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIG1hY2hpbmVyeVR5cGVOYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K6+5aSH57G75Z6L5ZCN56ew5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIGVuYWJsZUZsYWc6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLmmK/lkKblkK/nlKjkuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKiDmn6Xor6Lorr7lpIfnsbvlnovliJfooaggKi8KICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAoMCwgX21hY2hpbmVyeXR5cGUubGlzdE1hY2hpbmVyeXR5cGUpKHRoaXMucXVlcnlQYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMubWFjaGluZXJ5dHlwZUxpc3QgPSBfdGhpcy5oYW5kbGVUcmVlKHJlc3BvbnNlLmRhdGEsICJtYWNoaW5lcnlUeXBlSWQiLCAicGFyZW50VHlwZUlkIik7CiAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqIOi9rOaNouiuvuWkh+exu+Wei+aVsOaNrue7k+aehCAqLwogICAgbm9ybWFsaXplcjogZnVuY3Rpb24gbm9ybWFsaXplcihub2RlKSB7CiAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmICFub2RlLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgIGRlbGV0ZSBub2RlLmNoaWxkcmVuOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGlkOiBub2RlLm1hY2hpbmVyeVR5cGVJZCwKICAgICAgICBsYWJlbDogbm9kZS5tYWNoaW5lcnlUeXBlTmFtZSwKICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbgogICAgICB9OwogICAgfSwKCiAgICAvKiog5p+l6K+i6K6+5aSH57G75Z6L5LiL5ouJ5qCR57uT5p6EICovCiAgICBnZXRUcmVlc2VsZWN0OiBmdW5jdGlvbiBnZXRUcmVlc2VsZWN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgICgwLCBfbWFjaGluZXJ5dHlwZS5saXN0TWFjaGluZXJ5dHlwZSkoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGRlYnVnZ2VyOwogICAgICAgIF90aGlzMi5tYWNoaW5lcnl0eXBlT3B0aW9ucyA9IFtdOwoKICAgICAgICB2YXIgZGF0YSA9IF90aGlzMi5oYW5kbGVUcmVlKHJlc3BvbnNlLmRhdGEsICJtYWNoaW5lcnlUeXBlSWQiLCAicGFyZW50VHlwZUlkIilbMF07CgogICAgICAgIF90aGlzMi5tYWNoaW5lcnl0eXBlT3B0aW9ucy5wdXNoKGRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDlj5bmtojmjInpkq4KICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgdGhpcy5yZXNldCgpOwogICAgfSwKICAgIC8vIOihqOWNlemHjee9rgogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgbWFjaGluZXJ5VHlwZUlkOiBudWxsLAogICAgICAgIG1hY2hpbmVyeVR5cGVOYW1lOiBudWxsLAogICAgICAgIHBhcmVudFR5cGVJZDogMSwKICAgICAgICBhbmNlc3RvcnM6IG51bGwsCiAgICAgICAgZW5hYmxlRmxhZzogJ1knLAogICAgICAgIHJlbWFyazogbnVsbCwKICAgICAgICBjcmVhdGVCeTogbnVsbCwKICAgICAgICBjcmVhdGVUaW1lOiBudWxsLAogICAgICAgIHVwZGF0ZUJ5OiBudWxsLAogICAgICAgIHVwZGF0ZVRpbWU6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy5yZXNldEZvcm0oImZvcm0iKTsKICAgIH0sCgogICAgLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlUXVlcnk6IGZ1bmN0aW9uIGhhbmRsZVF1ZXJ5KCkgewogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCgogICAgLyoqIOmHjee9ruaMiemSruaTjeS9nCAqLwogICAgcmVzZXRRdWVyeTogZnVuY3Rpb24gcmVzZXRRdWVyeSgpIHsKICAgICAgdGhpcy5yZXNldEZvcm0oInF1ZXJ5Rm9ybSIpOwogICAgICB0aGlzLmhhbmRsZVF1ZXJ5KCk7CiAgICB9LAoKICAgIC8qKiDmlrDlop7mjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZUFkZDogZnVuY3Rpb24gaGFuZGxlQWRkKHJvdykgewogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIHRoaXMuZ2V0VHJlZXNlbGVjdCgpOwoKICAgICAgaWYgKHJvdyAhPSBudWxsICYmIHJvdy5tYWNoaW5lcnlUeXBlSWQpIHsKICAgICAgICB0aGlzLmZvcm0ucGFyZW50VHlwZUlkID0gcm93Lm1hY2hpbmVyeVR5cGVJZDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZvcm0ucGFyZW50VHlwZUlkID0gMDsKICAgICAgfQoKICAgICAgdGhpcy5vcGVuID0gdHJ1ZTsKICAgICAgdGhpcy50aXRsZSA9ICLmt7vliqDorr7lpIfnsbvlnosiOwogICAgfSwKCiAgICAvKiog5L+u5pS55oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVVcGRhdGU6IGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZShyb3cpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIHRoaXMuZ2V0VHJlZXNlbGVjdCgpOwoKICAgICAgaWYgKHJvdyAhPSBudWxsKSB7CiAgICAgICAgdGhpcy5mb3JtLnBhcmVudFR5cGVJZCA9IHJvdy5tYWNoaW5lcnlUeXBlSWQ7CiAgICAgIH0KCiAgICAgICgwLCBfbWFjaGluZXJ5dHlwZS5nZXRNYWNoaW5lcnl0eXBlKShyb3cubWFjaGluZXJ5VHlwZUlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy5mb3JtID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBfdGhpczMub3BlbiA9IHRydWU7CiAgICAgICAgX3RoaXMzLnRpdGxlID0gIuS/ruaUueiuvuWkh+exu+WeiyI7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKiog5o+Q5Lqk5oyJ6ZKuICovCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbImZvcm0iXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmIChfdGhpczQuZm9ybS5tYWNoaW5lcnlUeXBlSWQgIT0gbnVsbCkgewogICAgICAgICAgICAoMCwgX21hY2hpbmVyeXR5cGUudXBkYXRlTWFjaGluZXJ5dHlwZSkoX3RoaXM0LmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgX3RoaXM0LiRtb2RhbC5tc2dTdWNjZXNzKCLkv67mlLnmiJDlip8iKTsKCiAgICAgICAgICAgICAgX3RoaXM0Lm9wZW4gPSBmYWxzZTsKCiAgICAgICAgICAgICAgX3RoaXM0LmdldExpc3QoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAoMCwgX21hY2hpbmVyeXR5cGUuYWRkTWFjaGluZXJ5dHlwZSkoX3RoaXM0LmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgX3RoaXM0LiRtb2RhbC5tc2dTdWNjZXNzKCLmlrDlop7miJDlip8iKTsKCiAgICAgICAgICAgICAgX3RoaXM0Lm9wZW4gPSBmYWxzZTsKCiAgICAgICAgICAgICAgX3RoaXM0LmdldExpc3QoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLyoqIOWIoOmZpOaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGUocm93KSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy4kbW9kYWwuY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk6K6+5aSH57G75Z6L57yW5Y+35Li6IicgKyByb3cubWFjaGluZXJ5VHlwZUlkICsgJyLnmoTmlbDmja7pobnvvJ8nKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gKDAsIF9tYWNoaW5lcnl0eXBlLmRlbE1hY2hpbmVyeXR5cGUpKHJvdy5tYWNoaW5lcnlUeXBlSWQpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczUuZ2V0TGlzdCgpOwoKICAgICAgICBfdGhpczUuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9CiAgfQp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"mappings":";;;;;;;;;AAwIA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAA,qBADA;EAEAC,qBAFA;EAGAC;IACAC;EADA,CAHA;EAMAC,IANA,kBAMA;IACA;MACAC,kBADA;MAEA;MACAC,aAHA;MAIA;MACAC,gBALA;MAMA;MACAC,qBAPA;MAQA;MACAC,wBATA;MAUA;MACAC,SAXA;MAYA;MACAC,WAbA;MAcA;MACAC;QACAC,uBADA;QAEAC,uBAFA;QAGAC,kBAHA;QAIAC,eAJA;QAKAC;MALA,CAfA;MAsBA;MACAC,QAvBA;MAwBA;MACAC;QACAJ,eACA;UAAAK;UAAAC;UAAAC;QAAA,CADA,CADA;QAIAR,oBACA;UAAAM;UAAAC;UAAAC;QAAA,CADA,CAJA;QAOAL,aACA;UAAAG;UAAAC;UAAAC;QAAA,CADA;MAPA;IAzBA;EAqCA,CA5CA;EA6CAC,OA7CA,qBA6CA;IACA;EACA,CA/CA;EAgDAC;IACA;IACAC,OAFA,qBAEA;MAAA;;MACA;MACA;QACA;QACA;MACA,CAHA;IAIA,CARA;;IASA;IACAC,UAVA,sBAUAC,IAVA,EAUA;MACA;QACA;MACA;;MACA;QACAC,wBADA;QAEAC,6BAFA;QAGAC;MAHA;IAKA,CAnBA;;IAoBA;IACAC,aArBA,2BAqBA;MAAA;;MACA;QACA;QACA;;QACA;;QACA;MACA,CALA;IAMA,CA5BA;IA6BA;IACAC,MA9BA,oBA8BA;MACA;MACA;IACA,CAjCA;IAkCA;IACAC,KAnCA,mBAmCA;MACA;QACAC,qBADA;QAEApB,uBAFA;QAGAC,eAHA;QAIAC,eAJA;QAKAC,eALA;QAMAkB,YANA;QAOAC,cAPA;QAQAC,gBARA;QASAC,cATA;QAUAC;MAVA;MAYA;IACA,CAjDA;;IAkDA;IACAC,WAnDA,yBAmDA;MACA;IACA,CArDA;;IAsDA;IACAC,UAvDA,wBAuDA;MACA;MACA;IACA,CA1DA;;IA2DA;IACAC,SA5DA,qBA4DAC,GA5DA,EA4DA;MACA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;;MACA;MACA;IACA,CAtEA;;IAuEA;IACAC,YAxEA,wBAwEAD,GAxEA,EAwEA;MAAA;;MACA;MACA;;MACA;QACA;MACA;;MACA;QACA;QACA;QACA;MACA,CAJA;IAKA,CAnFA;;IAoFA;IACAE,UArFA,wBAqFA;MAAA;;MACA;QACA;UACA;YACA;cACA;;cACA;;cACA;YACA,CAJA;UAKA,CANA,MAMA;YACA;cACA;;cACA;;cACA;YACA,CAJA;UAKA;QACA;MACA,CAhBA;IAiBA,CAvGA;;IAwGA;IACAC,YAzGA,wBAyGAH,GAzGA,EAyGA;MAAA;;MACA;QACA;MACA,CAFA,EAEAI,IAFA,CAEA;QACA;;QACA;MACA,CALA,EAKAC,KALA,CAKA,cALA;IAMA;EAhHA;AAhDA,C","names":["name","dicts","components","Treeselect","data","optType","loading","showSearch","machinerytypeList","machinerytypeOptions","title","open","queryParams","machineryTypeCode","machineryTypeName","parentTypeId","ancestors","enableFlag","form","rules","required","message","trigger","created","methods","getList","normalizer","node","id","label","children","getTreeselect","cancel","reset","machineryTypeId","remark","createBy","createTime","updateBy","updateTime","handleQuery","resetQuery","handleAdd","row","handleUpdate","submitForm","handleDelete","then","catch"],"sourceRoot":"src/views/mes/dv/machinerytype","sources":["index.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\n      <el-form-item label=\"类型名称\" prop=\"machineryTypeName\">\n        <el-input\n          v-model=\"queryParams.machineryTypeName\"\n          placeholder=\"请输入设备类型名称\"\n          clearable\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item label=\"是否启用\" prop=\"enableFlag\">\n        <el-select v-model=\"queryParams.enableFlag\" placeholder=\"选择是或否\" clearable>\n          <el-option\n            v-for=\"dict in dict.type.sys_yes_no\"\n            :key=\"dict.value\"\n            :label=\"dict.label\"\n            :value=\"dict.value\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n\t    <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n    <el-row :gutter=\"10\" class=\"mb8\">\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"primary\"\n          plain\n          icon=\"el-icon-plus\"\n          size=\"mini\"\n          @click=\"handleAdd\"\n          v-hasPermi=\"['mes:dv:machinerytype:add']\"\n        >新增</el-button>\n      </el-col>\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\n    </el-row>\n\n    <el-table\n      v-loading=\"loading\"\n      :data=\"machinerytypeList\"\n      row-key=\"machineryTypeId\"\n      default-expand-all\n      :tree-props=\"{children: 'children', hasChildren: 'hasChildren'}\"\n    >\n      <el-table-column label=\"设备类型编码\" prop=\"machineryTypeCode\" />\n      <el-table-column label=\"设备类型名称\" align=\"center\" prop=\"machineryTypeName\" />\n      <el-table-column label=\"是否启用\" align=\"center\" prop=\"enableFlag\" >\n        <template slot-scope=\"scope\">\n          <dict-tag :options=\"dict.type.sys_yes_no\" :value=\"scope.row.enableFlag\"/>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"备注\" align=\"center\" prop=\"remark\" />\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-edit\"\n            @click=\"handleUpdate(scope.row)\"\n            v-hasPermi=\"['dv:machinerytype:edit']\"\n          >修改</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-plus\"\n            @click=\"handleAdd(scope.row)\"\n            v-hasPermi=\"['dv:machinerytype:add']\"\n          >新增</el-button>\n          <el-button\n            v-if=\"scope.row.parentTypeId != 0\"\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-delete\"\n            @click=\"handleDelete(scope.row)\"\n            v-hasPermi=\"['dv:machinerytype:remove']\"\n          >删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 添加或修改设备类型对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"700px\" append-to-body>\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\n        <el-row>\n          <el-col :span=\"24\" v-if=\"form.parentTypeId !== 0\">\n            <el-form-item label=\"父类型\" prop=\"parentTypeId\">\n              <treeselect v-model=\"form.parentTypeId\" :options=\"machinerytypeOptions\" :normalizer=\"normalizer\" placeholder=\"请选择父类型\" />\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"设备类型名称\" prop=\"machineryTypeName\">\n              <el-input v-model=\"form.machineryTypeName\" placeholder=\"请输入设备类型名称\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"是否启用\" prop=\"enableFlag\">\n              <el-radio-group v-model=\"form.enableFlag\" disabled v-if=\"optType=='view'\">\n                <el-radio\n                  v-for=\"dict in dict.type.sys_yes_no\"\n                  :key=\"dict.value\"\n                  :label=\"dict.value\"\n                >{{dict.label}}</el-radio>\n              </el-radio-group>\n              <el-radio-group v-model=\"form.enableFlag\" v-else>\n                <el-radio\n                  v-for=\"dict in dict.type.sys_yes_no\"\n                  :key=\"dict.value\"\n                  :label=\"dict.value\"\n                >{{dict.label}}</el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\">\n            <el-form-item label=\"备注\" prop=\"remark\">\n              <el-input v-model=\"form.remark\" type=\"textarea\" placeholder=\"请输入内容\" />\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { listMachinerytype, getMachinerytype, delMachinerytype, addMachinerytype, updateMachinerytype } from \"@/api/mes/dv/machinerytype\";\nimport Treeselect from \"@riophae/vue-treeselect\";\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\n\nexport default {\n  name: \"Machinerytype\",\n  dicts: ['sys_yes_no'],\n  components: {\n    Treeselect\n  },\n  data() {\n    return {\n      optType:undefined,\n      // 遮罩层\n      loading: true,\n      // 显示搜索条件\n      showSearch: true,\n      // 设备类型表格数据\n      machinerytypeList: [],\n      // 设备类型树选项\n      machinerytypeOptions: [],\n      // 弹出层标题\n      title: \"\",\n      // 是否显示弹出层\n      open: false,\n      // 查询参数\n      queryParams: {\n        machineryTypeCode: null,\n        machineryTypeName: null,\n        parentTypeId: null,\n        ancestors: null,\n        enableFlag: null,\n      },\n      // 表单参数\n      form: {},\n      // 表单校验\n      rules: {\n        parentTypeId: [\n          { required: true, message: \"父类型不能为空\", trigger: \"blur\" }\n        ],\n        machineryTypeName: [\n          { required: true, message: \"设备类型名称不能为空\", trigger: \"blur\" }\n        ],\n        enableFlag: [\n          { required: true, message: \"是否启用不能为空\", trigger: \"blur\" }\n        ],\n      }\n    };\n  },\n  created() {\n    this.getList();\n  },\n  methods: {\n    /** 查询设备类型列表 */\n    getList() {\n      this.loading = true;\n      listMachinerytype(this.queryParams).then(response => {\n        this.machinerytypeList = this.handleTree(response.data, \"machineryTypeId\", \"parentTypeId\");\n        this.loading = false;\n      });\n    },\n    /** 转换设备类型数据结构 */\n    normalizer(node) {\n      if (node.children && !node.children.length) {\n        delete node.children;\n      }\n      return {\n        id: node.machineryTypeId,\n        label: node.machineryTypeName,\n        children: node.children\n      };\n    },\n\t/** 查询设备类型下拉树结构 */\n    getTreeselect() {\n      listMachinerytype().then(response => {\n        debugger;\n        this.machinerytypeOptions = [];\n        const data = this.handleTree(response.data, \"machineryTypeId\", \"parentTypeId\")[0];\n        this.machinerytypeOptions.push(data);\n      });\n    },\n    // 取消按钮\n    cancel() {\n      this.open = false;\n      this.reset();\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        machineryTypeId: null,\n        machineryTypeName: null,\n        parentTypeId: 1,\n        ancestors: null,\n        enableFlag: 'Y',\n        remark: null,\n        createBy: null,\n        createTime: null,\n        updateBy: null,\n        updateTime: null\n      };\n      this.resetForm(\"form\");\n    },\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.getList();\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.resetForm(\"queryForm\");\n      this.handleQuery();\n    },\n    /** 新增按钮操作 */\n    handleAdd(row) {\n      this.reset();\n      this.getTreeselect();\n      if (row != null && row.machineryTypeId) {\n        this.form.parentTypeId = row.machineryTypeId;\n      } else {\n        this.form.parentTypeId = 0;\n      }\n      this.open = true;\n      this.title = \"添加设备类型\";\n    },\n    /** 修改按钮操作 */\n    handleUpdate(row) {\n      this.reset();\n      this.getTreeselect();\n      if (row != null) {\n        this.form.parentTypeId = row.machineryTypeId;\n      }\n      getMachinerytype(row.machineryTypeId).then(response => {\n        this.form = response.data;\n        this.open = true;\n        this.title = \"修改设备类型\";\n      });\n    },\n    /** 提交按钮 */\n    submitForm() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.machineryTypeId != null) {\n            updateMachinerytype(this.form).then(response => {\n              this.$modal.msgSuccess(\"修改成功\");\n              this.open = false;\n              this.getList();\n            });\n          } else {\n            addMachinerytype(this.form).then(response => {\n              this.$modal.msgSuccess(\"新增成功\");\n              this.open = false;\n              this.getList();\n            });\n          }\n        }\n      });\n    },\n    /** 删除按钮操作 */\n    handleDelete(row) {\n      this.$modal.confirm('是否确认删除设备类型编号为\"' + row.machineryTypeId + '\"的数据项？').then(function() {\n        return delMachinerytype(row.machineryTypeId);\n      }).then(() => {\n        this.getList();\n        this.$modal.msgSuccess(\"删除成功\");\n      }).catch(() => {});\n    }\n  }\n};\n</script>\n"]}]}