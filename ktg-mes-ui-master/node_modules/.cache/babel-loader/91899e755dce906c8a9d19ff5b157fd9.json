{"remainingRequest":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\utils\\dict\\Dict.js","dependencies":[{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\src\\utils\\dict\\Dict.js","mtime":1662109326000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\babel.config.js","mtime":1662109326000},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662432868786},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1662432871518},{"path":"D:\\resource\\eclipse-workspace\\ktg-mes-master\\ktg-mes-ui-master\\node_modules\\eslint-loader\\index.js","mtime":1662432869370}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJEOi9yZXNvdXJjZS9lY2xpcHNlLXdvcmtzcGFjZS9rdGctbWVzLW1hc3Rlci9rdGctbWVzLXVpLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6L3Jlc291cmNlL2VjbGlwc2Utd29ya3NwYWNlL2t0Zy1tZXMtbWFzdGVyL2t0Zy1tZXMtdWktbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRDovcmVzb3VyY2UvZWNsaXBzZS13b3Jrc3BhY2Uva3RnLW1lcy1tYXN0ZXIva3RnLW1lcy11aS1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLm1heC1zYWZlLWludGVnZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCB7IG1lcmdlUmVjdXJzaXZlIH0gZnJvbSAiQC91dGlscy9ydW95aSI7CmltcG9ydCBEaWN0TWV0YSBmcm9tICcuL0RpY3RNZXRhJzsKaW1wb3J0IERpY3REYXRhIGZyb20gJy4vRGljdERhdGEnOwp2YXIgREVGQVVMVF9ESUNUX09QVElPTlMgPSB7CiAgdHlwZXM6IFtdCn07Ci8qKgogKiBAY2xhc3NkZXNjIOWtl+WFuAogKiBAcHJvcGVydHkge09iamVjdH0gbGFiZWwg5qCH562+5a+56LGh77yM5YaF6YOo5bGe5oCn5ZCN5Li65a2X5YW457G75Z6L5ZCN56ewCiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBkaWN0IOWtl+auteaVsOe7hO+8jOWGhemDqOWxnuaAp+WQjeS4uuWtl+WFuOexu+Wei+WQjeensAogKiBAcHJvcGVydHkge0FycmF5LjxEaWN0TWV0YT59IF9kaWN0TWV0YXMg5a2X5YW45YWD5pWw5o2u5pWw57uECiAqLwoKdmFyIERpY3QgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIERpY3QoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGljdCk7CgogICAgdGhpcy5vd25lciA9IG51bGw7CiAgICB0aGlzLmxhYmVsID0ge307CiAgICB0aGlzLnR5cGUgPSB7fTsKICB9CgogIF9jcmVhdGVDbGFzcyhEaWN0LCBbewogICAga2V5OiAiaW5pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChvcHRpb25zKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAob3B0aW9ucyBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgb3B0aW9ucyA9IHsKICAgICAgICAgIHR5cGVzOiBvcHRpb25zCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIG9wdHMgPSBtZXJnZVJlY3Vyc2l2ZShERUZBVUxUX0RJQ1RfT1BUSU9OUywgb3B0aW9ucyk7CgogICAgICBpZiAob3B0cy50eXBlcyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCduZWVkIGRpY3QgdHlwZXMnKTsKICAgICAgfQoKICAgICAgdmFyIHBzID0gW107CiAgICAgIHRoaXMuX2RpY3RNZXRhcyA9IG9wdHMudHlwZXMubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIERpY3RNZXRhLnBhcnNlKHQpOwogICAgICB9KTsKCiAgICAgIHRoaXMuX2RpY3RNZXRhcy5mb3JFYWNoKGZ1bmN0aW9uIChkaWN0TWV0YSkgewogICAgICAgIHZhciB0eXBlID0gZGljdE1ldGEudHlwZTsKICAgICAgICBWdWUuc2V0KF90aGlzLmxhYmVsLCB0eXBlLCB7fSk7CiAgICAgICAgVnVlLnNldChfdGhpcy50eXBlLCB0eXBlLCBbXSk7CgogICAgICAgIGlmIChkaWN0TWV0YS5sYXp5KSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBwcy5wdXNoKGxvYWREaWN0KF90aGlzLCBkaWN0TWV0YSkpOwogICAgICB9KTsKCiAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcyk7CiAgICB9CiAgICAvKioKICAgICAqIOmHjeaWsOWKoOi9veWtl+WFuAogICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUg5a2X5YW457G75Z6LCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicmVsb2FkRGljdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVsb2FkRGljdCh0eXBlKSB7CiAgICAgIHZhciBkaWN0TWV0YSA9IHRoaXMuX2RpY3RNZXRhcy5maW5kKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUudHlwZSA9PT0gdHlwZTsKICAgICAgfSk7CgogICAgICBpZiAoZGljdE1ldGEgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgidGhlIGRpY3QgbWV0YSBvZiAiLmNvbmNhdCh0eXBlLCAiIHdhcyBub3QgZm91bmQiKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBsb2FkRGljdCh0aGlzLCBkaWN0TWV0YSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRGljdDsKfSgpOwovKioKICog5Yqg6L295a2X5YW4CiAqIEBwYXJhbSB7RGljdH0gZGljdCDlrZflhbgKICogQHBhcmFtIHtEaWN0TWV0YX0gZGljdE1ldGEg5a2X5YW45YWD5pWw5o2uCiAqIEByZXR1cm5zIHtQcm9taXNlfQogKi8KCgpleHBvcnQgeyBEaWN0IGFzIGRlZmF1bHQgfTsKCmZ1bmN0aW9uIGxvYWREaWN0KGRpY3QsIGRpY3RNZXRhKSB7CiAgcmV0dXJuIGRpY3RNZXRhLnJlcXVlc3QoZGljdE1ldGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICB2YXIgX2RpY3QkdHlwZSR0eXBlOwoKICAgIHZhciB0eXBlID0gZGljdE1ldGEudHlwZTsKICAgIHZhciBkaWN0cyA9IGRpY3RNZXRhLnJlc3BvbnNlQ29udmVydGVyKHJlc3BvbnNlLCBkaWN0TWV0YSk7CgogICAgaWYgKCEoZGljdHMgaW5zdGFuY2VvZiBBcnJheSkpIHsKICAgICAgY29uc29sZS5lcnJvcigndGhlIHJldHVybiBvZiByZXNwb25zZUNvbnZlcnRlciBtdXN0IGJlIEFycmF5LjxEaWN0RGF0YT4nKTsKICAgICAgZGljdHMgPSBbXTsKICAgIH0gZWxzZSBpZiAoZGljdHMuZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgIHJldHVybiBkIGluc3RhbmNlb2YgRGljdERhdGE7CiAgICB9KS5sZW5ndGggIT09IGRpY3RzLmxlbmd0aCkgewogICAgICBjb25zb2xlLmVycm9yKCd0aGUgdHlwZSBvZiBlbGVtZW50cyBpbiBkaWN0cyBtdXN0IGJlIERpY3REYXRhJyk7CiAgICAgIGRpY3RzID0gW107CiAgICB9CgogICAgKF9kaWN0JHR5cGUkdHlwZSA9IGRpY3QudHlwZVt0eXBlXSkuc3BsaWNlLmFwcGx5KF9kaWN0JHR5cGUkdHlwZSwgWzAsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGRpY3RzKSkpOwoKICAgIGRpY3RzLmZvckVhY2goZnVuY3Rpb24gKGQpIHsKICAgICAgVnVlLnNldChkaWN0LmxhYmVsW3R5cGVdLCBkLnZhbHVlLCBkLmxhYmVsKTsKICAgIH0pOwogICAgcmV0dXJuIGRpY3RzOwogIH0pOwp9"},{"version":3,"names":["Vue","mergeRecursive","DictMeta","DictData","DEFAULT_DICT_OPTIONS","types","Dict","owner","label","type","options","Array","opts","undefined","Error","ps","_dictMetas","map","t","parse","forEach","dictMeta","set","lazy","push","loadDict","Promise","all","find","e","reject","dict","request","then","response","dicts","responseConverter","console","error","filter","d","length","splice","Number","MAX_SAFE_INTEGER","value"],"sources":["D:/resource/eclipse-workspace/ktg-mes-master/ktg-mes-ui-master/src/utils/dict/Dict.js"],"sourcesContent":["import Vue from 'vue'\nimport { mergeRecursive } from \"@/utils/ruoyi\";\nimport DictMeta from './DictMeta'\nimport DictData from './DictData'\n\nconst DEFAULT_DICT_OPTIONS = {\n  types: [],\n}\n\n/**\n * @classdesc 字典\n * @property {Object} label 标签对象，内部属性名为字典类型名称\n * @property {Object} dict 字段数组，内部属性名为字典类型名称\n * @property {Array.<DictMeta>} _dictMetas 字典元数据数组\n */\nexport default class Dict {\n  constructor() {\n    this.owner = null\n    this.label = {}\n    this.type = {}\n  }\n\n  init(options) {\n    if (options instanceof Array) {\n      options = { types: options }\n    }\n    const opts = mergeRecursive(DEFAULT_DICT_OPTIONS, options)\n    if (opts.types === undefined) {\n      throw new Error('need dict types')\n    }\n    const ps = []\n    this._dictMetas = opts.types.map(t => DictMeta.parse(t))\n    this._dictMetas.forEach(dictMeta => {\n      const type = dictMeta.type\n      Vue.set(this.label, type, {})\n      Vue.set(this.type, type, [])\n      if (dictMeta.lazy) {\n        return\n      }\n      ps.push(loadDict(this, dictMeta))\n    })\n    return Promise.all(ps)\n  }\n\n  /**\n   * 重新加载字典\n   * @param {String} type 字典类型\n   */\n  reloadDict(type) {\n    const dictMeta = this._dictMetas.find(e => e.type === type)\n    if (dictMeta === undefined) {\n      return Promise.reject(`the dict meta of ${type} was not found`)\n    }\n    return loadDict(this, dictMeta)\n  }\n}\n\n/**\n * 加载字典\n * @param {Dict} dict 字典\n * @param {DictMeta} dictMeta 字典元数据\n * @returns {Promise}\n */\nfunction loadDict(dict, dictMeta) {\n  return dictMeta.request(dictMeta)\n    .then(response => {\n      const type = dictMeta.type\n      let dicts = dictMeta.responseConverter(response, dictMeta)\n      if (!(dicts instanceof Array)) {\n        console.error('the return of responseConverter must be Array.<DictData>')\n        dicts = []\n      } else if (dicts.filter(d => d instanceof DictData).length !== dicts.length) {\n        console.error('the type of elements in dicts must be DictData')\n        dicts = []\n      }\n      dict.type[type].splice(0, Number.MAX_SAFE_INTEGER, ...dicts)\n      dicts.forEach(d => {\n        Vue.set(dict.label[type], d.value, d.label)\n      })\n      return dicts\n    })\n}\n"],"mappings":"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"}]}